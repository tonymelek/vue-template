(() => { var e = { 2991: (e, t, r) => { "use strict"; r.d(t, { R: () => a, Y: () => o }); var n = r(2176), i = {}; function a() { return (0, n.KV)() ? r.g : "undefined" != typeof window ? window : "undefined" != typeof self ? self : i } function o(e, t, r) { var n = r || a(), i = n.__SENTRY__ = n.__SENTRY__ || {}; return i[e] || (i[e] = t()) } }, 2176: (e, t, r) => { "use strict"; function n() { return !("undefined" != typeof __SENTRY_BROWSER_BUNDLE__ && __SENTRY_BROWSER_BUNDLE__) && "[object process]" === Object.prototype.toString.call("undefined" != typeof process ? process : 0) } function i(e, t) { return e.require(t) } r.d(t, { l$: () => i, KV: () => n }), e = r.hmd(e) }, 1170: (e, t, r) => { "use strict"; r.d(t, { ph: () => u, yW: () => c }); var n = r(2991), i = r(2176); e = r.hmd(e); var a = { nowSeconds: () => Date.now() / 1e3 }, o = (0, i.KV)() ? function () { try { return (0, i.l$)(e, "perf_hooks").performance } catch (e) { return } }() : function () { const { performance: e } = (0, n.R)(); if (e && e.now) return { now: () => e.now(), timeOrigin: Date.now() - e.now() } }(), s = void 0 === o ? a : { nowSeconds: () => (o.timeOrigin + o.now()) / 1e3 }, c = a.nowSeconds.bind(a), u = s.nowSeconds.bind(s); let l; (() => { const { performance: e } = (0, n.R)(); if (e && e.now) { var t = 36e5, r = e.now(), i = Date.now(), a = e.timeOrigin ? Math.abs(e.timeOrigin + r - i) : t, o = a < t, s = e.timing && e.timing.navigationStart, c = "number" == typeof s ? Math.abs(s + r - i) : t; return o || c < t ? a <= c ? (l = "timeOrigin", e.timeOrigin) : (l = "navigationStart", s) : (l = "dateNow", i) } l = "none" })() }, 9662: (e, t, r) => { var n = r(614), i = r(6330), a = TypeError; e.exports = function (e) { if (n(e)) return e; throw a(i(e) + " is not a function") } }, 9483: (e, t, r) => { var n = r(4411), i = r(6330), a = TypeError; e.exports = function (e) { if (n(e)) return e; throw a(i(e) + " is not a constructor") } }, 6077: (e, t, r) => { var n = r(614), i = String, a = TypeError; e.exports = function (e) { if ("object" == typeof e || n(e)) return e; throw a("Can't set " + i(e) + " as a prototype") } }, 1223: (e, t, r) => { var n = r(5112), i = r(30), a = r(3070).f, o = n("unscopables"), s = Array.prototype; null == s[o] && a(s, o, { configurable: !0, value: i(null) }), e.exports = function (e) { s[o][e] = !0 } }, 1530: (e, t, r) => { "use strict"; var n = r(8710).charAt; e.exports = function (e, t, r) { return t + (r ? n(e, t).length : 1) } }, 5787: (e, t, r) => { var n = r(7976), i = TypeError; e.exports = function (e, t) { if (n(t, e)) return e; throw i("Incorrect invocation") } }, 9670: (e, t, r) => { var n = r(111), i = String, a = TypeError; e.exports = function (e) { if (n(e)) return e; throw a(i(e) + " is not an object") } }, 8533: (e, t, r) => { "use strict"; var n = r(2092).forEach, i = r(9341)("forEach"); e.exports = i ? [].forEach : function (e) { return n(this, e, arguments.length > 1 ? arguments[1] : void 0) } }, 8457: (e, t, r) => { "use strict"; var n = r(9974), i = r(6916), a = r(7908), o = r(3411), s = r(7659), c = r(4411), u = r(6244), l = r(6135), d = r(8554), p = r(1246), h = Array; e.exports = function (e) { var t = a(e), r = c(this), f = arguments.length, g = f > 1 ? arguments[1] : void 0, m = void 0 !== g; m && (g = n(g, f > 2 ? arguments[2] : void 0)); var v, E, y, _, A, I, S = p(t), C = 0; if (!S || this === h && s(S)) for (v = u(t), E = r ? new this(v) : h(v); v > C; C++)I = m ? g(t[C], C) : t[C], l(E, C, I); else for (A = (_ = d(t, S)).next, E = r ? new this : []; !(y = i(A, _)).done; C++)I = m ? o(_, g, [y.value, C], !0) : y.value, l(E, C, I); return E.length = C, E } }, 1318: (e, t, r) => { var n = r(5656), i = r(1400), a = r(6244), o = function (e) { return function (t, r, o) { var s, c = n(t), u = a(c), l = i(o, u); if (e && r != r) { for (; u > l;)if ((s = c[l++]) != s) return !0 } else for (; u > l; l++)if ((e || l in c) && c[l] === r) return e || l || 0; return !e && -1 } }; e.exports = { includes: o(!0), indexOf: o(!1) } }, 2092: (e, t, r) => { var n = r(9974), i = r(1702), a = r(8361), o = r(7908), s = r(6244), c = r(5417), u = i([].push), l = function (e) { var t = 1 == e, r = 2 == e, i = 3 == e, l = 4 == e, d = 6 == e, p = 7 == e, h = 5 == e || d; return function (f, g, m, v) { for (var E, y, _ = o(f), A = a(_), I = n(g, m), S = s(A), C = 0, O = v || c, T = t ? O(f, S) : r || p ? O(f, 0) : void 0; S > C; C++)if ((h || C in A) && (y = I(E = A[C], C, _), e)) if (t) T[C] = y; else if (y) switch (e) { case 3: return !0; case 5: return E; case 6: return C; case 2: u(T, E) } else switch (e) { case 4: return !1; case 7: u(T, E) }return d ? -1 : i || l ? l : T } }; e.exports = { forEach: l(0), map: l(1), filter: l(2), some: l(3), every: l(4), find: l(5), findIndex: l(6), filterReject: l(7) } }, 9341: (e, t, r) => { "use strict"; var n = r(7293); e.exports = function (e, t) { var r = [][e]; return !!r && n((function () { r.call(null, t || function () { return 1 }, 1) })) } }, 3671: (e, t, r) => { var n = r(9662), i = r(7908), a = r(8361), o = r(6244), s = TypeError, c = function (e) { return function (t, r, c, u) { n(r); var l = i(t), d = a(l), p = o(l), h = e ? p - 1 : 0, f = e ? -1 : 1; if (c < 2) for (; ;) { if (h in d) { u = d[h], h += f; break } if (h += f, e ? h < 0 : p <= h) throw s("Reduce of empty array with no initial value") } for (; e ? h >= 0 : p > h; h += f)h in d && (u = r(u, d[h], h, l)); return u } }; e.exports = { left: c(!1), right: c(!0) } }, 1589: (e, t, r) => { var n = r(1400), i = r(6244), a = r(6135), o = Array, s = Math.max; e.exports = function (e, t, r) { for (var c = i(e), u = n(t, c), l = n(void 0 === r ? c : r, c), d = o(s(l - u, 0)), p = 0; u < l; u++, p++)a(d, p, e[u]); return d.length = p, d } }, 4362: (e, t, r) => { var n = r(1589), i = Math.floor, a = function (e, t) { var r = e.length, c = i(r / 2); return r < 8 ? o(e, t) : s(e, a(n(e, 0, c), t), a(n(e, c), t), t) }, o = function (e, t) { for (var r, n, i = e.length, a = 1; a < i;) { for (n = a, r = e[a]; n && t(e[n - 1], r) > 0;)e[n] = e[--n]; n !== a++ && (e[n] = r) } return e }, s = function (e, t, r, n) { for (var i = t.length, a = r.length, o = 0, s = 0; o < i || s < a;)e[o + s] = o < i && s < a ? n(t[o], r[s]) <= 0 ? t[o++] : r[s++] : o < i ? t[o++] : r[s++]; return e }; e.exports = a }, 7475: (e, t, r) => { var n = r(3157), i = r(4411), a = r(111), o = r(5112)("species"), s = Array; e.exports = function (e) { var t; return n(e) && (t = e.constructor, (i(t) && (t === s || n(t.prototype)) || a(t) && null === (t = t[o])) && (t = void 0)), void 0 === t ? s : t } }, 5417: (e, t, r) => { var n = r(7475); e.exports = function (e, t) { return new (n(e))(0 === t ? 0 : t) } }, 3411: (e, t, r) => { var n = r(9670), i = r(9212); e.exports = function (e, t, r, a) { try { return a ? t(n(r)[0], r[1]) : t(r) } catch (t) { i(e, "throw", t) } } }, 4326: (e, t, r) => { var n = r(1702), i = n({}.toString), a = n("".slice); e.exports = function (e) { return a(i(e), 8, -1) } }, 648: (e, t, r) => { var n = r(1694), i = r(614), a = r(4326), o = r(5112)("toStringTag"), s = Object, c = "Arguments" == a(function () { return arguments }()); e.exports = n ? a : function (e) { var t, r, n; return void 0 === e ? "Undefined" : null === e ? "Null" : "string" == typeof (r = function (e, t) { try { return e[t] } catch (e) { } }(t = s(e), o)) ? r : c ? a(t) : "Object" == (n = a(t)) && i(t.callee) ? "Arguments" : n } }, 9920: (e, t, r) => { var n = r(2597), i = r(3887), a = r(1236), o = r(3070); e.exports = function (e, t, r) { for (var s = i(t), c = o.f, u = a.f, l = 0; l < s.length; l++) { var d = s[l]; n(e, d) || r && n(r, d) || c(e, d, u(t, d)) } } }, 4964: (e, t, r) => { var n = r(5112)("match"); e.exports = function (e) { var t = /./; try { "/./"[e](t) } catch (r) { try { return t[n] = !1, "/./"[e](t) } catch (e) { } } return !1 } }, 8544: (e, t, r) => { var n = r(7293); e.exports = !n((function () { function e() { } return e.prototype.constructor = null, Object.getPrototypeOf(new e) !== e.prototype })) }, 4994: (e, t, r) => { "use strict"; var n = r(3383).IteratorPrototype, i = r(30), a = r(9114), o = r(8003), s = r(7497), c = function () { return this }; e.exports = function (e, t, r, u) { var l = t + " Iterator"; return e.prototype = i(n, { next: a(+!u, r) }), o(e, l, !1, !0), s[l] = c, e } }, 8880: (e, t, r) => { var n = r(9781), i = r(3070), a = r(9114); e.exports = n ? function (e, t, r) { return i.f(e, t, a(1, r)) } : function (e, t, r) { return e[t] = r, e } }, 9114: e => { e.exports = function (e, t) { return { enumerable: !(1 & e), configurable: !(2 & e), writable: !(4 & e), value: t } } }, 6135: (e, t, r) => { "use strict"; var n = r(4948), i = r(3070), a = r(9114); e.exports = function (e, t, r) { var o = n(t); o in e ? i.f(e, o, a(0, r)) : e[o] = r } }, 7045: (e, t, r) => { var n = r(6339), i = r(3070); e.exports = function (e, t, r) { return r.get && n(r.get, t, { getter: !0 }), r.set && n(r.set, t, { setter: !0 }), i.f(e, t, r) } }, 8052: (e, t, r) => { var n = r(614), i = r(3070), a = r(6339), o = r(3072); e.exports = function (e, t, r, s) { s || (s = {}); var c = s.enumerable, u = void 0 !== s.name ? s.name : t; if (n(r) && a(r, u, s), s.global) c ? e[t] = r : o(t, r); else { try { s.unsafe ? e[t] && (c = !0) : delete e[t] } catch (e) { } c ? e[t] = r : i.f(e, t, { value: r, enumerable: !1, configurable: !s.nonConfigurable, writable: !s.nonWritable }) } return e } }, 9190: (e, t, r) => { var n = r(8052); e.exports = function (e, t, r) { for (var i in t) n(e, i, t[i], r); return e } }, 3072: (e, t, r) => { var n = r(7854), i = Object.defineProperty; e.exports = function (e, t) { try { i(n, e, { value: t, configurable: !0, writable: !0 }) } catch (r) { n[e] = t } return t } }, 654: (e, t, r) => { "use strict"; var n = r(2109), i = r(6916), a = r(1913), o = r(6530), s = r(614), c = r(4994), u = r(9518), l = r(7674), d = r(8003), p = r(8880), h = r(8052), f = r(5112), g = r(7497), m = r(3383), v = o.PROPER, E = o.CONFIGURABLE, y = m.IteratorPrototype, _ = m.BUGGY_SAFARI_ITERATORS, A = f("iterator"), I = "keys", S = "values", C = "entries", O = function () { return this }; e.exports = function (e, t, r, o, f, m, T) { c(r, t, o); var P, R, N, w = function (e) { if (e === f && U) return U; if (!_ && e in L) return L[e]; switch (e) { case I: case S: case C: return function () { return new r(this, e) } }return function () { return new r(this) } }, b = t + " Iterator", D = !1, L = e.prototype, x = L[A] || L["@@iterator"] || f && L[f], U = !_ && x || w(f), M = "Array" == t && L.entries || x; if (M && (P = u(M.call(new e))) !== Object.prototype && P.next && (a || u(P) === y || (l ? l(P, y) : s(P[A]) || h(P, A, O)), d(P, b, !0, !0), a && (g[b] = O)), v && f == S && x && x.name !== S && (!a && E ? p(L, "name", S) : (D = !0, U = function () { return i(x, this) })), f) if (R = { values: w(S), keys: m ? U : w(I), entries: w(C) }, T) for (N in R) (_ || D || !(N in L)) && h(L, N, R[N]); else n({ target: t, proto: !0, forced: _ || D }, R); return a && !T || L[A] === U || h(L, A, U, { name: f }), g[t] = U, R } }, 9781: (e, t, r) => { var n = r(7293); e.exports = !n((function () { return 7 != Object.defineProperty({}, 1, { get: function () { return 7 } })[1] })) }, 317: (e, t, r) => { var n = r(7854), i = r(111), a = n.document, o = i(a) && i(a.createElement); e.exports = function (e) { return o ? a.createElement(e) : {} } }, 8324: e => { e.exports = { CSSRuleList: 0, CSSStyleDeclaration: 0, CSSValueList: 0, ClientRectList: 0, DOMRectList: 0, DOMStringList: 0, DOMTokenList: 1, DataTransferItemList: 0, FileList: 0, HTMLAllCollection: 0, HTMLCollection: 0, HTMLFormElement: 0, HTMLSelectElement: 0, MediaList: 0, MimeTypeArray: 0, NamedNodeMap: 0, NodeList: 1, PaintRequestList: 0, Plugin: 0, PluginArray: 0, SVGLengthList: 0, SVGNumberList: 0, SVGPathSegList: 0, SVGPointList: 0, SVGStringList: 0, SVGTransformList: 0, SourceBufferList: 0, StyleSheetList: 0, TextTrackCueList: 0, TextTrackList: 0, TouchList: 0 } }, 8509: (e, t, r) => { var n = r(317)("span").classList, i = n && n.constructor && n.constructor.prototype; e.exports = i === Object.prototype ? void 0 : i }, 5268: (e, t, r) => { var n = r(4326), i = r(7854); e.exports = "process" == n(i.process) }, 8113: (e, t, r) => { var n = r(5005); e.exports = n("navigator", "userAgent") || "" }, 7392: (e, t, r) => { var n, i, a = r(7854), o = r(8113), s = a.process, c = a.Deno, u = s && s.versions || c && c.version, l = u && u.v8; l && (i = (n = l.split("."))[0] > 0 && n[0] < 4 ? 1 : +(n[0] + n[1])), !i && o && (!(n = o.match(/Edge\/(\d+)/)) || n[1] >= 74) && (n = o.match(/Chrome\/(\d+)/)) && (i = +n[1]), e.exports = i }, 748: e => { e.exports = ["constructor", "hasOwnProperty", "isPrototypeOf", "propertyIsEnumerable", "toLocaleString", "toString", "valueOf"] }, 2109: (e, t, r) => { var n = r(7854), i = r(1236).f, a = r(8880), o = r(8052), s = r(3072), c = r(9920), u = r(4705); e.exports = function (e, t) { var r, l, d, p, h, f = e.target, g = e.global, m = e.stat; if (r = g ? n : m ? n[f] || s(f, {}) : (n[f] || {}).prototype) for (l in t) { if (p = t[l], d = e.dontCallGetSet ? (h = i(r, l)) && h.value : r[l], !u(g ? l : f + (m ? "." : "#") + l, e.forced) && void 0 !== d) { if (typeof p == typeof d) continue; c(p, d) } (e.sham || d && d.sham) && a(p, "sham", !0), o(r, l, p, e) } } }, 7293: e => { e.exports = function (e) { try { return !!e() } catch (e) { return !0 } } }, 7007: (e, t, r) => { "use strict"; r(4916); var n = r(1702), i = r(8052), a = r(2261), o = r(7293), s = r(5112), c = r(8880), u = s("species"), l = RegExp.prototype; e.exports = function (e, t, r, d) { var p = s(e), h = !o((function () { var t = {}; return t[p] = function () { return 7 }, 7 != ""[e](t) })), f = h && !o((function () { var t = !1, r = /a/; return "split" === e && ((r = {}).constructor = {}, r.constructor[u] = function () { return r }, r.flags = "", r[p] = /./[p]), r.exec = function () { return t = !0, null }, r[p](""), !t })); if (!h || !f || r) { var g = n(/./[p]), m = t(p, ""[e], (function (e, t, r, i, o) { var s = n(e), c = t.exec; return c === a || c === l.exec ? h && !o ? { done: !0, value: g(t, r, i) } : { done: !0, value: s(r, t, i) } : { done: !1 } })); i(String.prototype, e, m[0]), i(l, p, m[1]) } d && c(l[p], "sham", !0) } }, 2104: (e, t, r) => { var n = r(4374), i = Function.prototype, a = i.apply, o = i.call; e.exports = "object" == typeof Reflect && Reflect.apply || (n ? o.bind(a) : function () { return o.apply(a, arguments) }) }, 9974: (e, t, r) => { var n = r(1702), i = r(9662), a = r(4374), o = n(n.bind); e.exports = function (e, t) { return i(e), void 0 === t ? e : a ? o(e, t) : function () { return e.apply(t, arguments) } } }, 4374: (e, t, r) => { var n = r(7293); e.exports = !n((function () { var e = function () { }.bind(); return "function" != typeof e || e.hasOwnProperty("prototype") })) }, 6916: (e, t, r) => { var n = r(4374), i = Function.prototype.call; e.exports = n ? i.bind(i) : function () { return i.apply(i, arguments) } }, 6530: (e, t, r) => { var n = r(9781), i = r(2597), a = Function.prototype, o = n && Object.getOwnPropertyDescriptor, s = i(a, "name"), c = s && "something" === function () { }.name, u = s && (!n || n && o(a, "name").configurable); e.exports = { EXISTS: s, PROPER: c, CONFIGURABLE: u } }, 1702: (e, t, r) => { var n = r(4374), i = Function.prototype, a = i.bind, o = i.call, s = n && a.bind(o, o); e.exports = n ? function (e) { return e && s(e) } : function (e) { return e && function () { return o.apply(e, arguments) } } }, 5005: (e, t, r) => { var n = r(7854), i = r(614), a = function (e) { return i(e) ? e : void 0 }; e.exports = function (e, t) { return arguments.length < 2 ? a(n[e]) : n[e] && n[e][t] } }, 1246: (e, t, r) => { var n = r(648), i = r(8173), a = r(7497), o = r(5112)("iterator"); e.exports = function (e) { if (null != e) return i(e, o) || i(e, "@@iterator") || a[n(e)] } }, 8554: (e, t, r) => { var n = r(6916), i = r(9662), a = r(9670), o = r(6330), s = r(1246), c = TypeError; e.exports = function (e, t) { var r = arguments.length < 2 ? s(e) : t; if (i(r)) return a(n(r, e)); throw c(o(e) + " is not iterable") } }, 8173: (e, t, r) => { var n = r(9662); e.exports = function (e, t) { var r = e[t]; return null == r ? void 0 : n(r) } }, 647: (e, t, r) => { var n = r(1702), i = r(7908), a = Math.floor, o = n("".charAt), s = n("".replace), c = n("".slice), u = /\$([$&'`]|\d{1,2}|<[^>]*>)/g, l = /\$([$&'`]|\d{1,2})/g; e.exports = function (e, t, r, n, d, p) { var h = r + e.length, f = n.length, g = l; return void 0 !== d && (d = i(d), g = u), s(p, g, (function (i, s) { var u; switch (o(s, 0)) { case "$": return "$"; case "&": return e; case "`": return c(t, 0, r); case "'": return c(t, h); case "<": u = d[c(s, 1, -1)]; break; default: var l = +s; if (0 === l) return i; if (l > f) { var p = a(l / 10); return 0 === p ? i : p <= f ? void 0 === n[p - 1] ? o(s, 1) : n[p - 1] + o(s, 1) : i } u = n[l - 1] }return void 0 === u ? "" : u })) } }, 7854: (e, t, r) => { var n = function (e) { return e && e.Math == Math && e }; e.exports = n("object" == typeof globalThis && globalThis) || n("object" == typeof window && window) || n("object" == typeof self && self) || n("object" == typeof r.g && r.g) || function () { return this }() || Function("return this")() }, 2597: (e, t, r) => { var n = r(1702), i = r(7908), a = n({}.hasOwnProperty); e.exports = Object.hasOwn || function (e, t) { return a(i(e), t) } }, 3501: e => { e.exports = {} }, 490: (e, t, r) => { var n = r(5005); e.exports = n("document", "documentElement") }, 4664: (e, t, r) => { var n = r(9781), i = r(7293), a = r(317); e.exports = !n && !i((function () { return 7 != Object.defineProperty(a("div"), "a", { get: function () { return 7 } }).a })) }, 8361: (e, t, r) => { var n = r(1702), i = r(7293), a = r(4326), o = Object, s = n("".split); e.exports = i((function () { return !o("z").propertyIsEnumerable(0) })) ? function (e) { return "String" == a(e) ? s(e, "") : o(e) } : o }, 9587: (e, t, r) => { var n = r(614), i = r(111), a = r(7674); e.exports = function (e, t, r) { var o, s; return a && n(o = t.constructor) && o !== r && i(s = o.prototype) && s !== r.prototype && a(e, s), e } }, 2788: (e, t, r) => { var n = r(1702), i = r(614), a = r(5465), o = n(Function.toString); i(a.inspectSource) || (a.inspectSource = function (e) { return o(e) }), e.exports = a.inspectSource }, 9909: (e, t, r) => { var n, i, a, o = r(8536), s = r(7854), c = r(1702), u = r(111), l = r(8880), d = r(2597), p = r(5465), h = r(6200), f = r(3501), g = "Object already initialized", m = s.TypeError, v = s.WeakMap; if (o || p.state) { var E = p.state || (p.state = new v), y = c(E.get), _ = c(E.has), A = c(E.set); n = function (e, t) { if (_(E, e)) throw new m(g); return t.facade = e, A(E, e, t), t }, i = function (e) { return y(E, e) || {} }, a = function (e) { return _(E, e) } } else { var I = h("state"); f[I] = !0, n = function (e, t) { if (d(e, I)) throw new m(g); return t.facade = e, l(e, I, t), t }, i = function (e) { return d(e, I) ? e[I] : {} }, a = function (e) { return d(e, I) } } e.exports = { set: n, get: i, has: a, enforce: function (e) { return a(e) ? i(e) : n(e, {}) }, getterFor: function (e) { return function (t) { var r; if (!u(t) || (r = i(t)).type !== e) throw m("Incompatible receiver, " + e + " required"); return r } } } }, 7659: (e, t, r) => { var n = r(5112), i = r(7497), a = n("iterator"), o = Array.prototype; e.exports = function (e) { return void 0 !== e && (i.Array === e || o[a] === e) } }, 3157: (e, t, r) => { var n = r(4326); e.exports = Array.isArray || function (e) { return "Array" == n(e) } }, 614: e => { e.exports = function (e) { return "function" == typeof e } }, 4411: (e, t, r) => { var n = r(1702), i = r(7293), a = r(614), o = r(648), s = r(5005), c = r(2788), u = function () { }, l = [], d = s("Reflect", "construct"), p = /^\s*(?:class|function)\b/, h = n(p.exec), f = !p.exec(u), g = function (e) { if (!a(e)) return !1; try { return d(u, l, e), !0 } catch (e) { return !1 } }, m = function (e) { if (!a(e)) return !1; switch (o(e)) { case "AsyncFunction": case "GeneratorFunction": case "AsyncGeneratorFunction": return !1 }try { return f || !!h(p, c(e)) } catch (e) { return !0 } }; m.sham = !0, e.exports = !d || i((function () { var e; return g(g.call) || !g(Object) || !g((function () { e = !0 })) || e })) ? m : g }, 4705: (e, t, r) => { var n = r(7293), i = r(614), a = /#|\.prototype\./, o = function (e, t) { var r = c[s(e)]; return r == l || r != u && (i(t) ? n(t) : !!t) }, s = o.normalize = function (e) { return String(e).replace(a, ".").toLowerCase() }, c = o.data = {}, u = o.NATIVE = "N", l = o.POLYFILL = "P"; e.exports = o }, 111: (e, t, r) => { var n = r(614); e.exports = function (e) { return "object" == typeof e ? null !== e : n(e) } }, 1913: e => { e.exports = !1 }, 7850: (e, t, r) => { var n = r(111), i = r(4326), a = r(5112)("match"); e.exports = function (e) { var t; return n(e) && (void 0 !== (t = e[a]) ? !!t : "RegExp" == i(e)) } }, 2190: (e, t, r) => { var n = r(5005), i = r(614), a = r(7976), o = r(3307), s = Object; e.exports = o ? function (e) { return "symbol" == typeof e } : function (e) { var t = n("Symbol"); return i(t) && a(t.prototype, s(e)) } }, 408: (e, t, r) => { var n = r(9974), i = r(6916), a = r(9670), o = r(6330), s = r(7659), c = r(6244), u = r(7976), l = r(8554), d = r(1246), p = r(9212), h = TypeError, f = function (e, t) { this.stopped = e, this.result = t }, g = f.prototype; e.exports = function (e, t, r) { var m, v, E, y, _, A, I, S = r && r.that, C = !(!r || !r.AS_ENTRIES), O = !(!r || !r.IS_RECORD), T = !(!r || !r.IS_ITERATOR), P = !(!r || !r.INTERRUPTED), R = n(t, S), N = function (e) { return m && p(m, "normal", e), new f(!0, e) }, w = function (e) { return C ? (a(e), P ? R(e[0], e[1], N) : R(e[0], e[1])) : P ? R(e, N) : R(e) }; if (O) m = e.iterator; else if (T) m = e; else { if (!(v = d(e))) throw h(o(e) + " is not iterable"); if (s(v)) { for (E = 0, y = c(e); y > E; E++)if ((_ = w(e[E])) && u(g, _)) return _; return new f(!1) } m = l(e, v) } for (A = O ? e.next : m.next; !(I = i(A, m)).done;) { try { _ = w(I.value) } catch (e) { p(m, "throw", e) } if ("object" == typeof _ && _ && u(g, _)) return _ } return new f(!1) } }, 9212: (e, t, r) => { var n = r(6916), i = r(9670), a = r(8173); e.exports = function (e, t, r) { var o, s; i(e); try { if (!(o = a(e, "return"))) { if ("throw" === t) throw r; return r } o = n(o, e) } catch (e) { s = !0, o = e } if ("throw" === t) throw r; if (s) throw o; return i(o), r } }, 3383: (e, t, r) => { "use strict"; var n, i, a, o = r(7293), s = r(614), c = r(30), u = r(9518), l = r(8052), d = r(5112), p = r(1913), h = d("iterator"), f = !1;[].keys && ("next" in (a = [].keys()) ? (i = u(u(a))) !== Object.prototype && (n = i) : f = !0), null == n || o((function () { var e = {}; return n[h].call(e) !== e })) ? n = {} : p && (n = c(n)), s(n[h]) || l(n, h, (function () { return this })), e.exports = { IteratorPrototype: n, BUGGY_SAFARI_ITERATORS: f } }, 7497: e => { e.exports = {} }, 6244: (e, t, r) => { var n = r(7466); e.exports = function (e) { return n(e.length) } }, 6339: (e, t, r) => { var n = r(7293), i = r(614), a = r(2597), o = r(9781), s = r(6530).CONFIGURABLE, c = r(2788), u = r(9909), l = u.enforce, d = u.get, p = Object.defineProperty, h = o && !n((function () { return 8 !== p((function () { }), "length", { value: 8 }).length })), f = String(String).split("String"), g = e.exports = function (e, t, r) { "Symbol(" === String(t).slice(0, 7) && (t = "[" + String(t).replace(/^Symbol\(([^)]*)\)/, "$1") + "]"), r && r.getter && (t = "get " + t), r && r.setter && (t = "set " + t), (!a(e, "name") || s && e.name !== t) && (o ? p(e, "name", { value: t, configurable: !0 }) : e.name = t), h && r && a(r, "arity") && e.length !== r.arity && p(e, "length", { value: r.arity }); try { r && a(r, "constructor") && r.constructor ? o && p(e, "prototype", { writable: !1 }) : e.prototype && (e.prototype = void 0) } catch (e) { } var n = l(e); return a(n, "source") || (n.source = f.join("string" == typeof t ? t : "")), e }; Function.prototype.toString = g((function () { return i(this) && d(this).source || c(this) }), "toString") }, 4758: e => { var t = Math.ceil, r = Math.floor; e.exports = Math.trunc || function (e) { var n = +e; return (n > 0 ? r : t)(n) } }, 133: (e, t, r) => { var n = r(7392), i = r(7293); e.exports = !!Object.getOwnPropertySymbols && !i((function () { var e = Symbol(); return !String(e) || !(Object(e) instanceof Symbol) || !Symbol.sham && n && n < 41 })) }, 590: (e, t, r) => { var n = r(7293), i = r(5112), a = r(1913), o = i("iterator"); e.exports = !n((function () { var e = new URL("b?a=1&b=2&c=3", "http://a"), t = e.searchParams, r = ""; return e.pathname = "c%20d", t.forEach((function (e, n) { t.delete("b"), r += n + e })), a && !e.toJSON || !t.sort || "http://a/c%20d?a=1&c=3" !== e.href || "3" !== t.get("c") || "a=1" !== String(new URLSearchParams("?a=1")) || !t[o] || "a" !== new URL("https://a@b").username || "b" !== new URLSearchParams(new URLSearchParams("a=b")).get("a") || "xn--e1aybc" !== new URL("http://Ñ‚ÐµÑÑ‚").host || "#%D0%B1" !== new URL("http://a#Ð±").hash || "a1c3" !== r || "x" !== new URL("http://x", void 0).host })) }, 8536: (e, t, r) => { var n = r(7854), i = r(614), a = r(2788), o = n.WeakMap; e.exports = i(o) && /native code/.test(a(o)) }, 3929: (e, t, r) => { var n = r(7850), i = TypeError; e.exports = function (e) { if (n(e)) throw i("The method doesn't accept regular expressions"); return e } }, 2814: (e, t, r) => { var n = r(7854), i = r(7293), a = r(1702), o = r(1340), s = r(3111).trim, c = r(1361), u = a("".charAt), l = n.parseFloat, d = n.Symbol, p = d && d.iterator, h = 1 / l(c + "-0") != -1 / 0 || p && !i((function () { l(Object(p)) })); e.exports = h ? function (e) { var t = s(o(e)), r = l(t); return 0 === r && "-" == u(t, 0) ? -0 : r } : l }, 3009: (e, t, r) => { var n = r(7854), i = r(7293), a = r(1702), o = r(1340), s = r(3111).trim, c = r(1361), u = n.parseInt, l = n.Symbol, d = l && l.iterator, p = /^[+-]?0x/i, h = a(p.exec), f = 8 !== u(c + "08") || 22 !== u(c + "0x16") || d && !i((function () { u(Object(d)) })); e.exports = f ? function (e, t) { var r = s(o(e)); return u(r, t >>> 0 || (h(p, r) ? 16 : 10)) } : u }, 1574: (e, t, r) => { "use strict"; var n = r(9781), i = r(1702), a = r(6916), o = r(7293), s = r(1956), c = r(5181), u = r(5296), l = r(7908), d = r(8361), p = Object.assign, h = Object.defineProperty, f = i([].concat); e.exports = !p || o((function () { if (n && 1 !== p({ b: 1 }, p(h({}, "a", { enumerable: !0, get: function () { h(this, "b", { value: 3, enumerable: !1 }) } }), { b: 2 })).b) return !0; var e = {}, t = {}, r = Symbol(), i = "abcdefghijklmnopqrst"; return e[r] = 7, i.split("").forEach((function (e) { t[e] = e })), 7 != p({}, e)[r] || s(p({}, t)).join("") != i })) ? function (e, t) { for (var r = l(e), i = arguments.length, o = 1, p = c.f, h = u.f; i > o;)for (var g, m = d(arguments[o++]), v = p ? f(s(m), p(m)) : s(m), E = v.length, y = 0; E > y;)g = v[y++], n && !a(h, m, g) || (r[g] = m[g]); return r } : p }, 30: (e, t, r) => { var n, i = r(9670), a = r(6048), o = r(748), s = r(3501), c = r(490), u = r(317), l = r(6200)("IE_PROTO"), d = function () { }, p = function (e) { return "<script>" + e + "<\/script>" }, h = function (e) { e.write(p("")), e.close(); var t = e.parentWindow.Object; return e = null, t }, f = function () { try { n = new ActiveXObject("htmlfile") } catch (e) { } var e, t; f = "undefined" != typeof document ? document.domain && n ? h(n) : ((t = u("iframe")).style.display = "none", c.appendChild(t), t.src = String("javascript:"), (e = t.contentWindow.document).open(), e.write(p("document.F=Object")), e.close(), e.F) : h(n); for (var r = o.length; r--;)delete f.prototype[o[r]]; return f() }; s[l] = !0, e.exports = Object.create || function (e, t) { var r; return null !== e ? (d.prototype = i(e), r = new d, d.prototype = null, r[l] = e) : r = f(), void 0 === t ? r : a.f(r, t) } }, 6048: (e, t, r) => { var n = r(9781), i = r(3353), a = r(3070), o = r(9670), s = r(5656), c = r(1956); t.f = n && !i ? Object.defineProperties : function (e, t) { o(e); for (var r, n = s(t), i = c(t), u = i.length, l = 0; u > l;)a.f(e, r = i[l++], n[r]); return e } }, 3070: (e, t, r) => { var n = r(9781), i = r(4664), a = r(3353), o = r(9670), s = r(4948), c = TypeError, u = Object.defineProperty, l = Object.getOwnPropertyDescriptor; t.f = n ? a ? function (e, t, r) { if (o(e), t = s(t), o(r), "function" == typeof e && "prototype" === t && "value" in r && "writable" in r && !r.writable) { var n = l(e, t); n && n.writable && (e[t] = r.value, r = { configurable: "configurable" in r ? r.configurable : n.configurable, enumerable: "enumerable" in r ? r.enumerable : n.enumerable, writable: !1 }) } return u(e, t, r) } : u : function (e, t, r) { if (o(e), t = s(t), o(r), i) try { return u(e, t, r) } catch (e) { } if ("get" in r || "set" in r) throw c("Accessors not supported"); return "value" in r && (e[t] = r.value), e } }, 1236: (e, t, r) => { var n = r(9781), i = r(6916), a = r(5296), o = r(9114), s = r(5656), c = r(4948), u = r(2597), l = r(4664), d = Object.getOwnPropertyDescriptor; t.f = n ? d : function (e, t) { if (e = s(e), t = c(t), l) try { return d(e, t) } catch (e) { } if (u(e, t)) return o(!i(a.f, e, t), e[t]) } }, 8006: (e, t, r) => { var n = r(6324), i = r(748).concat("length", "prototype"); t.f = Object.getOwnPropertyNames || function (e) { return n(e, i) } }, 5181: (e, t) => { t.f = Object.getOwnPropertySymbols }, 9518: (e, t, r) => { var n = r(2597), i = r(614), a = r(7908), o = r(6200), s = r(8544), c = o("IE_PROTO"), u = Object, l = u.prototype; e.exports = s ? u.getPrototypeOf : function (e) { var t = a(e); if (n(t, c)) return t[c]; var r = t.constructor; return i(r) && t instanceof r ? r.prototype : t instanceof u ? l : null } }, 7976: (e, t, r) => { var n = r(1702); e.exports = n({}.isPrototypeOf) }, 6324: (e, t, r) => { var n = r(1702), i = r(2597), a = r(5656), o = r(1318).indexOf, s = r(3501), c = n([].push); e.exports = function (e, t) { var r, n = a(e), u = 0, l = []; for (r in n) !i(s, r) && i(n, r) && c(l, r); for (; t.length > u;)i(n, r = t[u++]) && (~o(l, r) || c(l, r)); return l } }, 1956: (e, t, r) => { var n = r(6324), i = r(748); e.exports = Object.keys || function (e) { return n(e, i) } }, 5296: (e, t) => { "use strict"; var r = {}.propertyIsEnumerable, n = Object.getOwnPropertyDescriptor, i = n && !r.call({ 1: 2 }, 1); t.f = i ? function (e) { var t = n(this, e); return !!t && t.enumerable } : r }, 7674: (e, t, r) => { var n = r(1702), i = r(9670), a = r(6077); e.exports = Object.setPrototypeOf || ("__proto__" in {} ? function () { var e, t = !1, r = {}; try { (e = n(Object.getOwnPropertyDescriptor(Object.prototype, "__proto__").set))(r, []), t = r instanceof Array } catch (e) { } return function (r, n) { return i(r), a(n), t ? e(r, n) : r.__proto__ = n, r } }() : void 0) }, 4699: (e, t, r) => { var n = r(9781), i = r(1702), a = r(1956), o = r(5656), s = i(r(5296).f), c = i([].push), u = function (e) { return function (t) { for (var r, i = o(t), u = a(i), l = u.length, d = 0, p = []; l > d;)r = u[d++], n && !s(i, r) || c(p, e ? [r, i[r]] : i[r]); return p } }; e.exports = { entries: u(!0), values: u(!1) } }, 2140: (e, t, r) => { var n = r(6916), i = r(614), a = r(111), o = TypeError; e.exports = function (e, t) { var r, s; if ("string" === t && i(r = e.toString) && !a(s = n(r, e))) return s; if (i(r = e.valueOf) && !a(s = n(r, e))) return s; if ("string" !== t && i(r = e.toString) && !a(s = n(r, e))) return s; throw o("Can't convert object to primitive value") } }, 3887: (e, t, r) => { var n = r(5005), i = r(1702), a = r(8006), o = r(5181), s = r(9670), c = i([].concat); e.exports = n("Reflect", "ownKeys") || function (e) { var t = a.f(s(e)), r = o.f; return r ? c(t, r(e)) : t } }, 2626: (e, t, r) => { var n = r(3070).f; e.exports = function (e, t, r) { r in e || n(e, r, { configurable: !0, get: function () { return t[r] }, set: function (e) { t[r] = e } }) } }, 7651: (e, t, r) => { var n = r(6916), i = r(9670), a = r(614), o = r(4326), s = r(2261), c = TypeError; e.exports = function (e, t) { var r = e.exec; if (a(r)) { var u = n(r, e, t); return null !== u && i(u), u } if ("RegExp" === o(e)) return n(s, e, t); throw c("RegExp#exec called on incompatible receiver") } }, 2261: (e, t, r) => { "use strict"; var n, i, a = r(6916), o = r(1702), s = r(1340), c = r(7066), u = r(2999), l = r(2309), d = r(30), p = r(9909).get, h = r(9441), f = r(7168), g = l("native-string-replace", String.prototype.replace), m = RegExp.prototype.exec, v = m, E = o("".charAt), y = o("".indexOf), _ = o("".replace), A = o("".slice), I = (i = /b*/g, a(m, n = /a/, "a"), a(m, i, "a"), 0 !== n.lastIndex || 0 !== i.lastIndex), S = u.BROKEN_CARET, C = void 0 !== /()??/.exec("")[1]; (I || C || S || h || f) && (v = function (e) { var t, r, n, i, o, u, l, h = this, f = p(h), O = s(e), T = f.raw; if (T) return T.lastIndex = h.lastIndex, t = a(v, T, O), h.lastIndex = T.lastIndex, t; var P = f.groups, R = S && h.sticky, N = a(c, h), w = h.source, b = 0, D = O; if (R && (N = _(N, "y", ""), -1 === y(N, "g") && (N += "g"), D = A(O, h.lastIndex), h.lastIndex > 0 && (!h.multiline || h.multiline && "\n" !== E(O, h.lastIndex - 1)) && (w = "(?: " + w + ")", D = " " + D, b++), r = new RegExp("^(?:" + w + ")", N)), C && (r = new RegExp("^" + w + "$(?!\\s)", N)), I && (n = h.lastIndex), i = a(m, R ? r : h, D), R ? i ? (i.input = A(i.input, b), i[0] = A(i[0], b), i.index = h.lastIndex, h.lastIndex += i[0].length) : h.lastIndex = 0 : I && i && (h.lastIndex = h.global ? i.index + i[0].length : n), C && i && i.length > 1 && a(g, i[0], r, (function () { for (o = 1; o < arguments.length - 2; o++)void 0 === arguments[o] && (i[o] = void 0) })), i && P) for (i.groups = u = d(null), o = 0; o < P.length; o++)u[(l = P[o])[0]] = i[l[1]]; return i }), e.exports = v }, 7066: (e, t, r) => { "use strict"; var n = r(9670); e.exports = function () { var e = n(this), t = ""; return e.hasIndices && (t += "d"), e.global && (t += "g"), e.ignoreCase && (t += "i"), e.multiline && (t += "m"), e.dotAll && (t += "s"), e.unicode && (t += "u"), e.unicodeSets && (t += "v"), e.sticky && (t += "y"), t } }, 4706: (e, t, r) => { var n = r(6916), i = r(2597), a = r(7976), o = r(7066), s = RegExp.prototype; e.exports = function (e) { var t = e.flags; return void 0 !== t || "flags" in s || i(e, "flags") || !a(s, e) ? t : n(o, e) } }, 2999: (e, t, r) => { var n = r(7293), i = r(7854).RegExp, a = n((function () { var e = i("a", "y"); return e.lastIndex = 2, null != e.exec("abcd") })), o = a || n((function () { return !i("a", "y").sticky })), s = a || n((function () { var e = i("^r", "gy"); return e.lastIndex = 2, null != e.exec("str") })); e.exports = { BROKEN_CARET: s, MISSED_STICKY: o, UNSUPPORTED_Y: a } }, 9441: (e, t, r) => { var n = r(7293), i = r(7854).RegExp; e.exports = n((function () { var e = i(".", "s"); return !(e.dotAll && e.exec("\n") && "s" === e.flags) })) }, 7168: (e, t, r) => { var n = r(7293), i = r(7854).RegExp; e.exports = n((function () { var e = i("(?<a>b)", "g"); return "b" !== e.exec("b").groups.a || "bc" !== "b".replace(e, "$<a>c") })) }, 4488: e => { var t = TypeError; e.exports = function (e) { if (null == e) throw t("Can't call method on " + e); return e } }, 1150: e => { e.exports = Object.is || function (e, t) { return e === t ? 0 !== e || 1 / e == 1 / t : e != e && t != t } }, 6340: (e, t, r) => { "use strict"; var n = r(5005), i = r(3070), a = r(5112), o = r(9781), s = a("species"); e.exports = function (e) { var t = n(e), r = i.f; o && t && !t[s] && r(t, s, { configurable: !0, get: function () { return this } }) } }, 8003: (e, t, r) => { var n = r(3070).f, i = r(2597), a = r(5112)("toStringTag"); e.exports = function (e, t, r) { e && !r && (e = e.prototype), e && !i(e, a) && n(e, a, { configurable: !0, value: t }) } }, 6200: (e, t, r) => { var n = r(2309), i = r(9711), a = n("keys"); e.exports = function (e) { return a[e] || (a[e] = i(e)) } }, 5465: (e, t, r) => { var n = r(7854), i = r(3072), a = "__core-js_shared__", o = n[a] || i(a, {}); e.exports = o }, 2309: (e, t, r) => { var n = r(1913), i = r(5465); (e.exports = function (e, t) { return i[e] || (i[e] = void 0 !== t ? t : {}) })("versions", []).push({ version: "3.24.0", mode: n ? "pure" : "global", copyright: "Â© 2014-2022 Denis Pushkarev (zloirock.ru)", license: "https://github.com/zloirock/core-js/blob/v3.24.0/LICENSE", source: "https://github.com/zloirock/core-js" }) }, 6707: (e, t, r) => { var n = r(9670), i = r(9483), a = r(5112)("species"); e.exports = function (e, t) { var r, o = n(e).constructor; return void 0 === o || null == (r = n(o)[a]) ? t : i(r) } }, 8710: (e, t, r) => { var n = r(1702), i = r(9303), a = r(1340), o = r(4488), s = n("".charAt), c = n("".charCodeAt), u = n("".slice), l = function (e) { return function (t, r) { var n, l, d = a(o(t)), p = i(r), h = d.length; return p < 0 || p >= h ? e ? "" : void 0 : (n = c(d, p)) < 55296 || n > 56319 || p + 1 === h || (l = c(d, p + 1)) < 56320 || l > 57343 ? e ? s(d, p) : n : e ? u(d, p, p + 2) : l - 56320 + (n - 55296 << 10) + 65536 } }; e.exports = { codeAt: l(!1), charAt: l(!0) } }, 3197: (e, t, r) => { "use strict"; var n = r(1702), i = 2147483647, a = /[^\0-\u007E]/, o = /[.\u3002\uFF0E\uFF61]/g, s = "Overflow: input needs wider integers to process", c = RangeError, u = n(o.exec), l = Math.floor, d = String.fromCharCode, p = n("".charCodeAt), h = n([].join), f = n([].push), g = n("".replace), m = n("".split), v = n("".toLowerCase), E = function (e) { return e + 22 + 75 * (e < 26) }, y = function (e, t, r) { var n = 0; for (e = r ? l(e / 700) : e >> 1, e += l(e / t); e > 455;)e = l(e / 35), n += 36; return l(n + 36 * e / (e + 38)) }, _ = function (e) { var t = []; e = function (e) { for (var t = [], r = 0, n = e.length; r < n;) { var i = p(e, r++); if (i >= 55296 && i <= 56319 && r < n) { var a = p(e, r++); 56320 == (64512 & a) ? f(t, ((1023 & i) << 10) + (1023 & a) + 65536) : (f(t, i), r--) } else f(t, i) } return t }(e); var r, n, a = e.length, o = 128, u = 0, g = 72; for (r = 0; r < e.length; r++)(n = e[r]) < 128 && f(t, d(n)); var m = t.length, v = m; for (m && f(t, "-"); v < a;) { var _ = i; for (r = 0; r < e.length; r++)(n = e[r]) >= o && n < _ && (_ = n); var A = v + 1; if (_ - o > l((i - u) / A)) throw c(s); for (u += (_ - o) * A, o = _, r = 0; r < e.length; r++) { if ((n = e[r]) < o && ++u > i) throw c(s); if (n == o) { for (var I = u, S = 36; ;) { var C = S <= g ? 1 : S >= g + 26 ? 26 : S - g; if (I < C) break; var O = I - C, T = 36 - C; f(t, d(E(C + O % T))), I = l(O / T), S += 36 } f(t, d(E(I))), g = y(u, A, v == m), u = 0, v++ } } u++, o++ } return h(t, "") }; e.exports = function (e) { var t, r, n = [], i = m(g(v(e), o, "."), "."); for (t = 0; t < i.length; t++)r = i[t], f(n, u(a, r) ? "xn--" + _(r) : r); return h(n, ".") } }, 8415: (e, t, r) => { "use strict"; var n = r(9303), i = r(1340), a = r(4488), o = RangeError; e.exports = function (e) { var t = i(a(this)), r = "", s = n(e); if (s < 0 || s == 1 / 0) throw o("Wrong number of repetitions"); for (; s > 0; (s >>>= 1) && (t += t))1 & s && (r += t); return r } }, 6091: (e, t, r) => { var n = r(6530).PROPER, i = r(7293), a = r(1361); e.exports = function (e) { return i((function () { return !!a[e]() || "â€‹Â…á Ž" !== "â€‹Â…á Ž"[e]() || n && a[e].name !== e })) } }, 3111: (e, t, r) => { var n = r(1702), i = r(4488), a = r(1340), o = r(1361), s = n("".replace), c = "[" + o + "]", u = RegExp("^" + c + c + "*"), l = RegExp(c + c + "*$"), d = function (e) { return function (t) { var r = a(i(t)); return 1 & e && (r = s(r, u, "")), 2 & e && (r = s(r, l, "")), r } }; e.exports = { start: d(1), end: d(2), trim: d(3) } }, 863: (e, t, r) => { var n = r(1702); e.exports = n(1..valueOf) }, 1400: (e, t, r) => { var n = r(9303), i = Math.max, a = Math.min; e.exports = function (e, t) { var r = n(e); return r < 0 ? i(r + t, 0) : a(r, t) } }, 5656: (e, t, r) => { var n = r(8361), i = r(4488); e.exports = function (e) { return n(i(e)) } }, 9303: (e, t, r) => { var n = r(4758); e.exports = function (e) { var t = +e; return t != t || 0 === t ? 0 : n(t) } }, 7466: (e, t, r) => { var n = r(9303), i = Math.min; e.exports = function (e) { return e > 0 ? i(n(e), 9007199254740991) : 0 } }, 7908: (e, t, r) => { var n = r(4488), i = Object; e.exports = function (e) { return i(n(e)) } }, 7593: (e, t, r) => { var n = r(6916), i = r(111), a = r(2190), o = r(8173), s = r(2140), c = r(5112), u = TypeError, l = c("toPrimitive"); e.exports = function (e, t) { if (!i(e) || a(e)) return e; var r, c = o(e, l); if (c) { if (void 0 === t && (t = "default"), r = n(c, e, t), !i(r) || a(r)) return r; throw u("Can't convert object to primitive value") } return void 0 === t && (t = "number"), s(e, t) } }, 4948: (e, t, r) => { var n = r(7593), i = r(2190); e.exports = function (e) { var t = n(e, "string"); return i(t) ? t : t + "" } }, 1694: (e, t, r) => { var n = {}; n[r(5112)("toStringTag")] = "z", e.exports = "[object z]" === String(n) }, 1340: (e, t, r) => { var n = r(648), i = String; e.exports = function (e) { if ("Symbol" === n(e)) throw TypeError("Cannot convert a Symbol value to a string"); return i(e) } }, 6330: e => { var t = String; e.exports = function (e) { try { return t(e) } catch (e) { return "Object" } } }, 9711: (e, t, r) => { var n = r(1702), i = 0, a = Math.random(), o = n(1..toString); e.exports = function (e) { return "Symbol(" + (void 0 === e ? "" : e) + ")_" + o(++i + a, 36) } }, 3307: (e, t, r) => { var n = r(133); e.exports = n && !Symbol.sham && "symbol" == typeof Symbol.iterator }, 3353: (e, t, r) => { var n = r(9781), i = r(7293); e.exports = n && i((function () { return 42 != Object.defineProperty((function () { }), "prototype", { value: 42, writable: !1 }).prototype })) }, 8053: e => { var t = TypeError; e.exports = function (e, r) { if (e < r) throw t("Not enough arguments"); return e } }, 5112: (e, t, r) => { var n = r(7854), i = r(2309), a = r(2597), o = r(9711), s = r(133), c = r(3307), u = i("wks"), l = n.Symbol, d = l && l.for, p = c ? l : l && l.withoutSetter || o; e.exports = function (e) { if (!a(u, e) || !s && "string" != typeof u[e]) { var t = "Symbol." + e; s && a(l, e) ? u[e] = l[e] : u[e] = c && d ? d(t) : p(t) } return u[e] } }, 1361: e => { e.exports = "\t\n\v\f\r Â áš€â€€â€â€‚â€ƒâ€„â€…â€†â€‡â€ˆâ€‰â€Šâ€¯âŸã€€\u2028\u2029\ufeff" }, 6699: (e, t, r) => { "use strict"; var n = r(2109), i = r(1318).includes, a = r(7293), o = r(1223); n({ target: "Array", proto: !0, forced: a((function () { return !Array(1).includes() })) }, { includes: function (e) { return i(this, e, arguments.length > 1 ? arguments[1] : void 0) } }), o("includes") }, 6992: (e, t, r) => { "use strict"; var n = r(5656), i = r(1223), a = r(7497), o = r(9909), s = r(3070).f, c = r(654), u = r(1913), l = r(9781), d = "Array Iterator", p = o.set, h = o.getterFor(d); e.exports = c(Array, "Array", (function (e, t) { p(this, { type: d, target: n(e), index: 0, kind: t }) }), (function () { var e = h(this), t = e.target, r = e.kind, n = e.index++; return !t || n >= t.length ? (e.target = void 0, { value: void 0, done: !0 }) : "keys" == r ? { value: n, done: !1 } : "values" == r ? { value: t[n], done: !1 } : { value: [n, t[n]], done: !1 } }), "values"); var f = a.Arguments = a.Array; if (i("keys"), i("values"), i("entries"), !u && l && "values" !== f.name) try { s(f, "name", { value: "values" }) } catch (e) { } }, 5827: (e, t, r) => { "use strict"; var n = r(2109), i = r(3671).left, a = r(9341), o = r(7392), s = r(5268); n({ target: "Array", proto: !0, forced: !a("reduce") || !s && o > 79 && o < 83 }, { reduce: function (e) { var t = arguments.length; return i(this, e, t, t > 1 ? arguments[1] : void 0) } }) }, 1874: (e, t, r) => { var n = r(2109), i = r(2814); n({ target: "Number", stat: !0, forced: Number.parseFloat != i }, { parseFloat: i }) }, 9494: (e, t, r) => { var n = r(2109), i = r(3009); n({ target: "Number", stat: !0, forced: Number.parseInt != i }, { parseInt: i }) }, 6977: (e, t, r) => { "use strict"; var n = r(2109), i = r(1702), a = r(9303), o = r(863), s = r(8415), c = r(7293), u = RangeError, l = String, d = Math.floor, p = i(s), h = i("".slice), f = i(1..toFixed), g = function (e, t, r) { return 0 === t ? r : t % 2 == 1 ? g(e, t - 1, r * e) : g(e * e, t / 2, r) }, m = function (e, t, r) { for (var n = -1, i = r; ++n < 6;)i += t * e[n], e[n] = i % 1e7, i = d(i / 1e7) }, v = function (e, t) { for (var r = 6, n = 0; --r >= 0;)n += e[r], e[r] = d(n / t), n = n % t * 1e7 }, E = function (e) { for (var t = 6, r = ""; --t >= 0;)if ("" !== r || 0 === t || 0 !== e[t]) { var n = l(e[t]); r = "" === r ? n : r + p("0", 7 - n.length) + n } return r }; n({ target: "Number", proto: !0, forced: c((function () { return "0.000" !== f(8e-5, 3) || "1" !== f(.9, 0) || "1.25" !== f(1.255, 2) || "1000000000000000128" !== f(0xde0b6b3a7640080, 0) })) || !c((function () { f({}) })) }, { toFixed: function (e) { var t, r, n, i, s = o(this), c = a(e), d = [0, 0, 0, 0, 0, 0], f = "", y = "0"; if (c < 0 || c > 20) throw u("Incorrect fraction digits"); if (s != s) return "NaN"; if (s <= -1e21 || s >= 1e21) return l(s); if (s < 0 && (f = "-", s = -s), s > 1e-21) if (r = (t = function (e) { for (var t = 0, r = e; r >= 4096;)t += 12, r /= 4096; for (; r >= 2;)t += 1, r /= 2; return t }(s * g(2, 69, 1)) - 69) < 0 ? s * g(2, -t, 1) : s / g(2, t, 1), r *= 4503599627370496, (t = 52 - t) > 0) { for (m(d, 0, r), n = c; n >= 7;)m(d, 1e7, 0), n -= 7; for (m(d, g(10, n, 1), 0), n = t - 1; n >= 23;)v(d, 1 << 23), n -= 23; v(d, 1 << n), m(d, 1, 1), v(d, 2), y = E(d) } else m(d, 0, r), m(d, 1 << -t, 0), y = E(d) + p("0", c); return c > 0 ? f + ((i = y.length) <= c ? "0." + p("0", c - i) + y : h(y, 0, i - c) + "." + h(y, i - c)) : f + y } }) }, 9601: (e, t, r) => { var n = r(2109), i = r(1574); n({ target: "Object", stat: !0, arity: 2, forced: Object.assign !== i }, { assign: i }) }, 9720: (e, t, r) => { var n = r(2109), i = r(4699).entries; n({ target: "Object", stat: !0 }, { entries: function (e) { return i(e) } }) }, 8559: (e, t, r) => { var n = r(2109), i = r(408), a = r(6135); n({ target: "Object", stat: !0 }, { fromEntries: function (e) { var t = {}; return i(e, (function (e, r) { a(t, e, r) }), { AS_ENTRIES: !0 }), t } }) }, 6833: (e, t, r) => { var n = r(2109), i = r(4699).values; n({ target: "Object", stat: !0 }, { values: function (e) { return i(e) } }) }, 4603: (e, t, r) => { var n = r(9781), i = r(7854), a = r(1702), o = r(4705), s = r(9587), c = r(8880), u = r(8006).f, l = r(7976), d = r(7850), p = r(1340), h = r(4706), f = r(2999), g = r(2626), m = r(8052), v = r(7293), E = r(2597), y = r(9909).enforce, _ = r(6340), A = r(5112), I = r(9441), S = r(7168), C = A("match"), O = i.RegExp, T = O.prototype, P = i.SyntaxError, R = a(T.exec), N = a("".charAt), w = a("".replace), b = a("".indexOf), D = a("".slice), L = /^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/, x = /a/g, U = /a/g, M = new O(x) !== x, k = f.MISSED_STICKY, H = f.UNSUPPORTED_Y; if (o("RegExp", n && (!M || k || I || S || v((function () { return U[C] = !1, O(x) != x || O(U) == U || "/a/i" != O(x, "i") }))))) { for (var B = function (e, t) { var r, n, i, a, o, u, f = l(T, this), g = d(e), m = void 0 === t, v = [], _ = e; if (!f && g && m && e.constructor === B) return e; if ((g || l(T, e)) && (e = e.source, m && (t = h(_))), e = void 0 === e ? "" : p(e), t = void 0 === t ? "" : p(t), _ = e, I && "dotAll" in x && (n = !!t && b(t, "s") > -1) && (t = w(t, /s/g, "")), r = t, k && "sticky" in x && (i = !!t && b(t, "y") > -1) && H && (t = w(t, /y/g, "")), S && (a = function (e) { for (var t, r = e.length, n = 0, i = "", a = [], o = {}, s = !1, c = !1, u = 0, l = ""; n <= r; n++) { if ("\\" === (t = N(e, n))) t += N(e, ++n); else if ("]" === t) s = !1; else if (!s) switch (!0) { case "[" === t: s = !0; break; case "(" === t: R(L, D(e, n + 1)) && (n += 2, c = !0), i += t, u++; continue; case ">" === t && c: if ("" === l || E(o, l)) throw new P("Invalid capture group name"); o[l] = !0, a[a.length] = [l, u], c = !1, l = ""; continue }c ? l += t : i += t } return [i, a] }(e), e = a[0], v = a[1]), o = s(O(e, t), f ? this : T, B), (n || i || v.length) && (u = y(o), n && (u.dotAll = !0, u.raw = B(function (e) { for (var t, r = e.length, n = 0, i = "", a = !1; n <= r; n++)"\\" !== (t = N(e, n)) ? a || "." !== t ? ("[" === t ? a = !0 : "]" === t && (a = !1), i += t) : i += "[\\s\\S]" : i += t + N(e, ++n); return i }(e), r)), i && (u.sticky = !0), v.length && (u.groups = v)), e !== _) try { c(o, "source", "" === _ ? "(?:)" : _) } catch (e) { } return o }, G = u(O), F = 0; G.length > F;)g(B, O, G[F++]); T.constructor = B, B.prototype = T, m(i, "RegExp", B, { constructor: !0 }) } _("RegExp") }, 4916: (e, t, r) => { "use strict"; var n = r(2109), i = r(2261); n({ target: "RegExp", proto: !0, forced: /./.exec !== i }, { exec: i }) }, 9714: (e, t, r) => { "use strict"; var n = r(6530).PROPER, i = r(8052), a = r(9670), o = r(1340), s = r(7293), c = r(4706), u = "toString", l = RegExp.prototype.toString, d = s((function () { return "/a/b" != l.call({ source: "a", flags: "b" }) })), p = n && l.name != u; (d || p) && i(RegExp.prototype, u, (function () { var e = a(this); return "/" + o(e.source) + "/" + o(c(e)) }), { unsafe: !0 }) }, 7852: (e, t, r) => { "use strict"; var n, i = r(2109), a = r(1702), o = r(1236).f, s = r(7466), c = r(1340), u = r(3929), l = r(4488), d = r(4964), p = r(1913), h = a("".endsWith), f = a("".slice), g = Math.min, m = d("endsWith"); i({ target: "String", proto: !0, forced: !(!p && !m && (n = o(String.prototype, "endsWith"), n && !n.writable) || m) }, { endsWith: function (e) { var t = c(l(this)); u(e); var r = arguments.length > 1 ? arguments[1] : void 0, n = t.length, i = void 0 === r ? n : g(s(r), n), a = c(e); return h ? h(t, a, i) : f(t, i - a.length, i) === a } }) }, 2023: (e, t, r) => { "use strict"; var n = r(2109), i = r(1702), a = r(3929), o = r(4488), s = r(1340), c = r(4964), u = i("".indexOf); n({ target: "String", proto: !0, forced: !c("includes") }, { includes: function (e) { return !!~u(s(o(this)), s(a(e)), arguments.length > 1 ? arguments[1] : void 0) } }) }, 8783: (e, t, r) => { "use strict"; var n = r(8710).charAt, i = r(1340), a = r(9909), o = r(654), s = "String Iterator", c = a.set, u = a.getterFor(s); o(String, "String", (function (e) { c(this, { type: s, string: i(e), index: 0 }) }), (function () { var e, t = u(this), r = t.string, i = t.index; return i >= r.length ? { value: void 0, done: !0 } : (e = n(r, i), t.index += e.length, { value: e, done: !1 }) })) }, 4723: (e, t, r) => { "use strict"; var n = r(6916), i = r(7007), a = r(9670), o = r(7466), s = r(1340), c = r(4488), u = r(8173), l = r(1530), d = r(7651); i("match", (function (e, t, r) { return [function (t) { var r = c(this), i = null == t ? void 0 : u(t, e); return i ? n(i, t, r) : new RegExp(t)[e](s(r)) }, function (e) { var n = a(this), i = s(e), c = r(t, n, i); if (c.done) return c.value; if (!n.global) return d(n, i); var u = n.unicode; n.lastIndex = 0; for (var p, h = [], f = 0; null !== (p = d(n, i));) { var g = s(p[0]); h[f] = g, "" === g && (n.lastIndex = l(i, o(n.lastIndex), u)), f++ } return 0 === f ? null : h }] })) }, 5306: (e, t, r) => { "use strict"; var n = r(2104), i = r(6916), a = r(1702), o = r(7007), s = r(7293), c = r(9670), u = r(614), l = r(9303), d = r(7466), p = r(1340), h = r(4488), f = r(1530), g = r(8173), m = r(647), v = r(7651), E = r(5112)("replace"), y = Math.max, _ = Math.min, A = a([].concat), I = a([].push), S = a("".indexOf), C = a("".slice), O = "$0" === "a".replace(/./, "$0"), T = !!/./[E] && "" === /./[E]("a", "$0"); o("replace", (function (e, t, r) { var a = T ? "$" : "$0"; return [function (e, r) { var n = h(this), a = null == e ? void 0 : g(e, E); return a ? i(a, e, n, r) : i(t, p(n), e, r) }, function (e, i) { var o = c(this), s = p(e); if ("string" == typeof i && -1 === S(i, a) && -1 === S(i, "$<")) { var h = r(t, o, s, i); if (h.done) return h.value } var g = u(i); g || (i = p(i)); var E = o.global; if (E) { var O = o.unicode; o.lastIndex = 0 } for (var T = []; ;) { var P = v(o, s); if (null === P) break; if (I(T, P), !E) break; "" === p(P[0]) && (o.lastIndex = f(s, d(o.lastIndex), O)) } for (var R, N = "", w = 0, b = 0; b < T.length; b++) { for (var D = p((P = T[b])[0]), L = y(_(l(P.index), s.length), 0), x = [], U = 1; U < P.length; U++)I(x, void 0 === (R = P[U]) ? R : String(R)); var M = P.groups; if (g) { var k = A([D], x, L, s); void 0 !== M && I(k, M); var H = p(n(i, void 0, k)) } else H = m(D, s, L, x, M, i); L >= w && (N += C(s, w, L) + H, w = L + D.length) } return N + C(s, w) }] }), !!s((function () { var e = /./; return e.exec = function () { var e = []; return e.groups = { a: "7" }, e }, "7" !== "".replace(e, "$<a>") })) || !O || T) }, 4765: (e, t, r) => { "use strict"; var n = r(6916), i = r(7007), a = r(9670), o = r(4488), s = r(1150), c = r(1340), u = r(8173), l = r(7651); i("search", (function (e, t, r) { return [function (t) { var r = o(this), i = null == t ? void 0 : u(t, e); return i ? n(i, t, r) : new RegExp(t)[e](c(r)) }, function (e) { var n = a(this), i = c(e), o = r(t, n, i); if (o.done) return o.value; var u = n.lastIndex; s(u, 0) || (n.lastIndex = 0); var d = l(n, i); return s(n.lastIndex, u) || (n.lastIndex = u), null === d ? -1 : d.index }] })) }, 3123: (e, t, r) => { "use strict"; var n = r(2104), i = r(6916), a = r(1702), o = r(7007), s = r(7850), c = r(9670), u = r(4488), l = r(6707), d = r(1530), p = r(7466), h = r(1340), f = r(8173), g = r(1589), m = r(7651), v = r(2261), E = r(2999), y = r(7293), _ = E.UNSUPPORTED_Y, A = 4294967295, I = Math.min, S = [].push, C = a(/./.exec), O = a(S), T = a("".slice); o("split", (function (e, t, r) { var a; return a = "c" == "abbc".split(/(b)*/)[1] || 4 != "test".split(/(?:)/, -1).length || 2 != "ab".split(/(?:ab)*/).length || 4 != ".".split(/(.?)(.?)/).length || ".".split(/()()/).length > 1 || "".split(/.?/).length ? function (e, r) { var a = h(u(this)), o = void 0 === r ? A : r >>> 0; if (0 === o) return []; if (void 0 === e) return [a]; if (!s(e)) return i(t, a, e, o); for (var c, l, d, p = [], f = (e.ignoreCase ? "i" : "") + (e.multiline ? "m" : "") + (e.unicode ? "u" : "") + (e.sticky ? "y" : ""), m = 0, E = new RegExp(e.source, f + "g"); (c = i(v, E, a)) && !((l = E.lastIndex) > m && (O(p, T(a, m, c.index)), c.length > 1 && c.index < a.length && n(S, p, g(c, 1)), d = c[0].length, m = l, p.length >= o));)E.lastIndex === c.index && E.lastIndex++; return m === a.length ? !d && C(E, "") || O(p, "") : O(p, T(a, m)), p.length > o ? g(p, 0, o) : p } : "0".split(void 0, 0).length ? function (e, r) { return void 0 === e && 0 === r ? [] : i(t, this, e, r) } : t, [function (t, r) { var n = u(this), o = null == t ? void 0 : f(t, e); return o ? i(o, t, n, r) : i(a, h(n), t, r) }, function (e, n) { var i = c(this), o = h(e), s = r(a, i, o, n, a !== t); if (s.done) return s.value; var u = l(i, RegExp), f = i.unicode, g = (i.ignoreCase ? "i" : "") + (i.multiline ? "m" : "") + (i.unicode ? "u" : "") + (_ ? "g" : "y"), v = new u(_ ? "^(?:" + i.source + ")" : i, g), E = void 0 === n ? A : n >>> 0; if (0 === E) return []; if (0 === o.length) return null === m(v, o) ? [o] : []; for (var y = 0, S = 0, C = []; S < o.length;) { v.lastIndex = _ ? 0 : S; var P, R = m(v, _ ? T(o, S) : o); if (null === R || (P = I(p(v.lastIndex + (_ ? S : 0)), o.length)) === y) S = d(o, S, f); else { if (O(C, T(o, y, S)), C.length === E) return C; for (var N = 1; N <= R.length - 1; N++)if (O(C, R[N]), C.length === E) return C; S = y = P } } return O(C, T(o, y)), C }] }), !!y((function () { var e = /(?:)/, t = e.exec; e.exec = function () { return t.apply(this, arguments) }; var r = "ab".split(e); return 2 !== r.length || "a" !== r[0] || "b" !== r[1] })), _) }, 6755: (e, t, r) => { "use strict"; var n, i = r(2109), a = r(1702), o = r(1236).f, s = r(7466), c = r(1340), u = r(3929), l = r(4488), d = r(4964), p = r(1913), h = a("".startsWith), f = a("".slice), g = Math.min, m = d("startsWith"); i({ target: "String", proto: !0, forced: !(!p && !m && (n = o(String.prototype, "startsWith"), n && !n.writable) || m) }, { startsWith: function (e) { var t = c(l(this)); u(e); var r = s(g(arguments.length > 1 ? arguments[1] : void 0, t.length)), n = c(e); return h ? h(t, n, r) : f(t, r, r + n.length) === n } }) }, 3210: (e, t, r) => { "use strict"; var n = r(2109), i = r(3111).trim; n({ target: "String", proto: !0, forced: r(6091)("trim") }, { trim: function () { return i(this) } }) }, 4747: (e, t, r) => { var n = r(7854), i = r(8324), a = r(8509), o = r(8533), s = r(8880), c = function (e) { if (e && e.forEach !== o) try { s(e, "forEach", o) } catch (t) { e.forEach = o } }; for (var u in i) i[u] && c(n[u] && n[u].prototype); c(a) }, 3948: (e, t, r) => { var n = r(7854), i = r(8324), a = r(8509), o = r(6992), s = r(8880), c = r(5112), u = c("iterator"), l = c("toStringTag"), d = o.values, p = function (e, t) { if (e) { if (e[u] !== d) try { s(e, u, d) } catch (t) { e[u] = d } if (e[l] || s(e, l, t), i[t]) for (var r in o) if (e[r] !== o[r]) try { s(e, r, o[r]) } catch (t) { e[r] = o[r] } } }; for (var h in i) p(n[h] && n[h].prototype, h); p(a, "DOMTokenList") }, 5556: (e, t, r) => { "use strict"; r(6992); var n = r(2109), i = r(7854), a = r(6916), o = r(1702), s = r(9781), c = r(590), u = r(8052), l = r(9190), d = r(8003), p = r(4994), h = r(9909), f = r(5787), g = r(614), m = r(2597), v = r(9974), E = r(648), y = r(9670), _ = r(111), A = r(1340), I = r(30), S = r(9114), C = r(8554), O = r(1246), T = r(8053), P = r(5112), R = r(4362), N = P("iterator"), w = "URLSearchParams", b = "URLSearchParamsIterator", D = h.set, L = h.getterFor(w), x = h.getterFor(b), U = Object.getOwnPropertyDescriptor, M = function (e) { if (!s) return i[e]; var t = U(i, e); return t && t.value }, k = M("fetch"), H = M("Request"), B = M("Headers"), G = H && H.prototype, F = B && B.prototype, q = i.RegExp, j = i.TypeError, V = i.decodeURIComponent, Y = i.encodeURIComponent, z = o("".charAt), K = o([].join), W = o([].push), $ = o("".replace), Q = o([].shift), Z = o([].splice), J = o("".split), X = o("".slice), ee = /\+/g, te = Array(4), re = function (e) { return te[e - 1] || (te[e - 1] = q("((?:%[\\da-f]{2}){" + e + "})", "gi")) }, ne = function (e) { try { return V(e) } catch (t) { return e } }, ie = function (e) { var t = $(e, ee, " "), r = 4; try { return V(t) } catch (e) { for (; r;)t = $(t, re(r--), ne); return t } }, ae = /[!'()~]|%20/g, oe = { "!": "%21", "'": "%27", "(": "%28", ")": "%29", "~": "%7E", "%20": "+" }, se = function (e) { return oe[e] }, ce = function (e) { return $(Y(e), ae, se) }, ue = p((function (e, t) { D(this, { type: b, iterator: C(L(e).entries), kind: t }) }), "Iterator", (function () { var e = x(this), t = e.kind, r = e.iterator.next(), n = r.value; return r.done || (r.value = "keys" === t ? n.key : "values" === t ? n.value : [n.key, n.value]), r }), !0), le = function (e) { this.entries = [], this.url = null, void 0 !== e && (_(e) ? this.parseObject(e) : this.parseQuery("string" == typeof e ? "?" === z(e, 0) ? X(e, 1) : e : A(e))) }; le.prototype = { type: w, bindURL: function (e) { this.url = e, this.update() }, parseObject: function (e) { var t, r, n, i, o, s, c, u = O(e); if (u) for (r = (t = C(e, u)).next; !(n = a(r, t)).done;) { if (o = (i = C(y(n.value))).next, (s = a(o, i)).done || (c = a(o, i)).done || !a(o, i).done) throw j("Expected sequence with length 2"); W(this.entries, { key: A(s.value), value: A(c.value) }) } else for (var l in e) m(e, l) && W(this.entries, { key: l, value: A(e[l]) }) }, parseQuery: function (e) { if (e) for (var t, r, n = J(e, "&"), i = 0; i < n.length;)(t = n[i++]).length && (r = J(t, "="), W(this.entries, { key: ie(Q(r)), value: ie(K(r, "=")) })) }, serialize: function () { for (var e, t = this.entries, r = [], n = 0; n < t.length;)e = t[n++], W(r, ce(e.key) + "=" + ce(e.value)); return K(r, "&") }, update: function () { this.entries.length = 0, this.parseQuery(this.url.query) }, updateURL: function () { this.url && this.url.update() } }; var de = function () { f(this, pe); var e = arguments.length > 0 ? arguments[0] : void 0; D(this, new le(e)) }, pe = de.prototype; if (l(pe, { append: function (e, t) { T(arguments.length, 2); var r = L(this); W(r.entries, { key: A(e), value: A(t) }), r.updateURL() }, delete: function (e) { T(arguments.length, 1); for (var t = L(this), r = t.entries, n = A(e), i = 0; i < r.length;)r[i].key === n ? Z(r, i, 1) : i++; t.updateURL() }, get: function (e) { T(arguments.length, 1); for (var t = L(this).entries, r = A(e), n = 0; n < t.length; n++)if (t[n].key === r) return t[n].value; return null }, getAll: function (e) { T(arguments.length, 1); for (var t = L(this).entries, r = A(e), n = [], i = 0; i < t.length; i++)t[i].key === r && W(n, t[i].value); return n }, has: function (e) { T(arguments.length, 1); for (var t = L(this).entries, r = A(e), n = 0; n < t.length;)if (t[n++].key === r) return !0; return !1 }, set: function (e, t) { T(arguments.length, 1); for (var r, n = L(this), i = n.entries, a = !1, o = A(e), s = A(t), c = 0; c < i.length; c++)(r = i[c]).key === o && (a ? Z(i, c--, 1) : (a = !0, r.value = s)); a || W(i, { key: o, value: s }), n.updateURL() }, sort: function () { var e = L(this); R(e.entries, (function (e, t) { return e.key > t.key ? 1 : -1 })), e.updateURL() }, forEach: function (e) { for (var t, r = L(this).entries, n = v(e, arguments.length > 1 ? arguments[1] : void 0), i = 0; i < r.length;)n((t = r[i++]).value, t.key, this) }, keys: function () { return new ue(this, "keys") }, values: function () { return new ue(this, "values") }, entries: function () { return new ue(this, "entries") } }, { enumerable: !0 }), u(pe, N, pe.entries, { name: "entries" }), u(pe, "toString", (function () { return L(this).serialize() }), { enumerable: !0 }), d(de, w), n({ global: !0, constructor: !0, forced: !c }, { URLSearchParams: de }), !c && g(B)) { var he = o(F.has), fe = o(F.set), ge = function (e) { if (_(e)) { var t, r = e.body; if (E(r) === w) return t = e.headers ? new B(e.headers) : new B, he(t, "content-type") || fe(t, "content-type", "application/x-www-form-urlencoded;charset=UTF-8"), I(e, { body: S(0, A(r)), headers: S(0, t) }) } return e }; if (g(k) && n({ global: !0, enumerable: !0, dontCallGetSet: !0, forced: !0 }, { fetch: function (e) { return k(e, arguments.length > 1 ? ge(arguments[1]) : {}) } }), g(H)) { var me = function (e) { return f(this, G), new H(e, arguments.length > 1 ? ge(arguments[1]) : {}) }; G.constructor = me, me.prototype = G, n({ global: !0, constructor: !0, dontCallGetSet: !0, forced: !0 }, { Request: me }) } } e.exports = { URLSearchParams: de, getState: L } }, 1637: (e, t, r) => { r(5556) }, 8789: (e, t, r) => { "use strict"; r(8783); var n, i = r(2109), a = r(9781), o = r(590), s = r(7854), c = r(9974), u = r(1702), l = r(8052), d = r(7045), p = r(5787), h = r(2597), f = r(1574), g = r(8457), m = r(1589), v = r(8710).codeAt, E = r(3197), y = r(1340), _ = r(8003), A = r(8053), I = r(5556), S = r(9909), C = S.set, O = S.getterFor("URL"), T = I.URLSearchParams, P = I.getState, R = s.URL, N = s.TypeError, w = s.parseInt, b = Math.floor, D = Math.pow, L = u("".charAt), x = u(/./.exec), U = u([].join), M = u(1..toString), k = u([].pop), H = u([].push), B = u("".replace), G = u([].shift), F = u("".split), q = u("".slice), j = u("".toLowerCase), V = u([].unshift), Y = "Invalid scheme", z = "Invalid host", K = "Invalid port", W = /[a-z]/i, $ = /[\d+-.a-z]/i, Q = /\d/, Z = /^0x/i, J = /^[0-7]+$/, X = /^\d+$/, ee = /^[\da-f]+$/i, te = /[\0\t\n\r #%/:<>?@[\\\]^|]/, re = /[\0\t\n\r #/:<>?@[\\\]^|]/, ne = /^[\u0000-\u0020]+|[\u0000-\u0020]+$/g, ie = /[\t\n\r]/g, ae = function (e) { var t, r, n, i; if ("number" == typeof e) { for (t = [], r = 0; r < 4; r++)V(t, e % 256), e = b(e / 256); return U(t, ".") } if ("object" == typeof e) { for (t = "", n = function (e) { for (var t = null, r = 1, n = null, i = 0, a = 0; a < 8; a++)0 !== e[a] ? (i > r && (t = n, r = i), n = null, i = 0) : (null === n && (n = a), ++i); return i > r && (t = n, r = i), t }(e), r = 0; r < 8; r++)i && 0 === e[r] || (i && (i = !1), n === r ? (t += r ? ":" : "::", i = !0) : (t += M(e[r], 16), r < 7 && (t += ":"))); return "[" + t + "]" } return e }, oe = {}, se = f({}, oe, { " ": 1, '"': 1, "<": 1, ">": 1, "`": 1 }), ce = f({}, se, { "#": 1, "?": 1, "{": 1, "}": 1 }), ue = f({}, ce, { "/": 1, ":": 1, ";": 1, "=": 1, "@": 1, "[": 1, "\\": 1, "]": 1, "^": 1, "|": 1 }), le = function (e, t) { var r = v(e, 0); return r > 32 && r < 127 && !h(t, e) ? e : encodeURIComponent(e) }, de = { ftp: 21, file: null, http: 80, https: 443, ws: 80, wss: 443 }, pe = function (e, t) { var r; return 2 == e.length && x(W, L(e, 0)) && (":" == (r = L(e, 1)) || !t && "|" == r) }, he = function (e) { var t; return e.length > 1 && pe(q(e, 0, 2)) && (2 == e.length || "/" === (t = L(e, 2)) || "\\" === t || "?" === t || "#" === t) }, fe = function (e) { return "." === e || "%2e" === j(e) }, ge = {}, me = {}, ve = {}, Ee = {}, ye = {}, _e = {}, Ae = {}, Ie = {}, Se = {}, Ce = {}, Oe = {}, Te = {}, Pe = {}, Re = {}, Ne = {}, we = {}, be = {}, De = {}, Le = {}, xe = {}, Ue = {}, Me = function (e, t, r) { var n, i, a, o = y(e); if (t) { if (i = this.parse(o)) throw N(i); this.searchParams = null } else { if (void 0 !== r && (n = new Me(r, !0)), i = this.parse(o, null, n)) throw N(i); (a = P(new T)).bindURL(this), this.searchParams = a } }; Me.prototype = { type: "URL", parse: function (e, t, r) { var i, a, o, s, c, u = this, l = t || ge, d = 0, p = "", f = !1, v = !1, E = !1; for (e = y(e), t || (u.scheme = "", u.username = "", u.password = "", u.host = null, u.port = null, u.path = [], u.query = null, u.fragment = null, u.cannotBeABaseURL = !1, e = B(e, ne, "")), e = B(e, ie, ""), i = g(e); d <= i.length;) { switch (a = i[d], l) { case ge: if (!a || !x(W, a)) { if (t) return Y; l = ve; continue } p += j(a), l = me; break; case me: if (a && (x($, a) || "+" == a || "-" == a || "." == a)) p += j(a); else { if (":" != a) { if (t) return Y; p = "", l = ve, d = 0; continue } if (t && (u.isSpecial() != h(de, p) || "file" == p && (u.includesCredentials() || null !== u.port) || "file" == u.scheme && !u.host)) return; if (u.scheme = p, t) return void (u.isSpecial() && de[u.scheme] == u.port && (u.port = null)); p = "", "file" == u.scheme ? l = Re : u.isSpecial() && r && r.scheme == u.scheme ? l = Ee : u.isSpecial() ? l = Ie : "/" == i[d + 1] ? (l = ye, d++) : (u.cannotBeABaseURL = !0, H(u.path, ""), l = Le) } break; case ve: if (!r || r.cannotBeABaseURL && "#" != a) return Y; if (r.cannotBeABaseURL && "#" == a) { u.scheme = r.scheme, u.path = m(r.path), u.query = r.query, u.fragment = "", u.cannotBeABaseURL = !0, l = Ue; break } l = "file" == r.scheme ? Re : _e; continue; case Ee: if ("/" != a || "/" != i[d + 1]) { l = _e; continue } l = Se, d++; break; case ye: if ("/" == a) { l = Ce; break } l = De; continue; case _e: if (u.scheme = r.scheme, a == n) u.username = r.username, u.password = r.password, u.host = r.host, u.port = r.port, u.path = m(r.path), u.query = r.query; else if ("/" == a || "\\" == a && u.isSpecial()) l = Ae; else if ("?" == a) u.username = r.username, u.password = r.password, u.host = r.host, u.port = r.port, u.path = m(r.path), u.query = "", l = xe; else { if ("#" != a) { u.username = r.username, u.password = r.password, u.host = r.host, u.port = r.port, u.path = m(r.path), u.path.length--, l = De; continue } u.username = r.username, u.password = r.password, u.host = r.host, u.port = r.port, u.path = m(r.path), u.query = r.query, u.fragment = "", l = Ue } break; case Ae: if (!u.isSpecial() || "/" != a && "\\" != a) { if ("/" != a) { u.username = r.username, u.password = r.password, u.host = r.host, u.port = r.port, l = De; continue } l = Ce } else l = Se; break; case Ie: if (l = Se, "/" != a || "/" != L(p, d + 1)) continue; d++; break; case Se: if ("/" != a && "\\" != a) { l = Ce; continue } break; case Ce: if ("@" == a) { f && (p = "%40" + p), f = !0, o = g(p); for (var _ = 0; _ < o.length; _++) { var A = o[_]; if (":" != A || E) { var I = le(A, ue); E ? u.password += I : u.username += I } else E = !0 } p = "" } else if (a == n || "/" == a || "?" == a || "#" == a || "\\" == a && u.isSpecial()) { if (f && "" == p) return "Invalid authority"; d -= g(p).length + 1, p = "", l = Oe } else p += a; break; case Oe: case Te: if (t && "file" == u.scheme) { l = we; continue } if (":" != a || v) { if (a == n || "/" == a || "?" == a || "#" == a || "\\" == a && u.isSpecial()) { if (u.isSpecial() && "" == p) return z; if (t && "" == p && (u.includesCredentials() || null !== u.port)) return; if (s = u.parseHost(p)) return s; if (p = "", l = be, t) return; continue } "[" == a ? v = !0 : "]" == a && (v = !1), p += a } else { if ("" == p) return z; if (s = u.parseHost(p)) return s; if (p = "", l = Pe, t == Te) return } break; case Pe: if (!x(Q, a)) { if (a == n || "/" == a || "?" == a || "#" == a || "\\" == a && u.isSpecial() || t) { if ("" != p) { var S = w(p, 10); if (S > 65535) return K; u.port = u.isSpecial() && S === de[u.scheme] ? null : S, p = "" } if (t) return; l = be; continue } return K } p += a; break; case Re: if (u.scheme = "file", "/" == a || "\\" == a) l = Ne; else { if (!r || "file" != r.scheme) { l = De; continue } if (a == n) u.host = r.host, u.path = m(r.path), u.query = r.query; else if ("?" == a) u.host = r.host, u.path = m(r.path), u.query = "", l = xe; else { if ("#" != a) { he(U(m(i, d), "")) || (u.host = r.host, u.path = m(r.path), u.shortenPath()), l = De; continue } u.host = r.host, u.path = m(r.path), u.query = r.query, u.fragment = "", l = Ue } } break; case Ne: if ("/" == a || "\\" == a) { l = we; break } r && "file" == r.scheme && !he(U(m(i, d), "")) && (pe(r.path[0], !0) ? H(u.path, r.path[0]) : u.host = r.host), l = De; continue; case we: if (a == n || "/" == a || "\\" == a || "?" == a || "#" == a) { if (!t && pe(p)) l = De; else if ("" == p) { if (u.host = "", t) return; l = be } else { if (s = u.parseHost(p)) return s; if ("localhost" == u.host && (u.host = ""), t) return; p = "", l = be } continue } p += a; break; case be: if (u.isSpecial()) { if (l = De, "/" != a && "\\" != a) continue } else if (t || "?" != a) if (t || "#" != a) { if (a != n && (l = De, "/" != a)) continue } else u.fragment = "", l = Ue; else u.query = "", l = xe; break; case De: if (a == n || "/" == a || "\\" == a && u.isSpecial() || !t && ("?" == a || "#" == a)) { if (".." === (c = j(c = p)) || "%2e." === c || ".%2e" === c || "%2e%2e" === c ? (u.shortenPath(), "/" == a || "\\" == a && u.isSpecial() || H(u.path, "")) : fe(p) ? "/" == a || "\\" == a && u.isSpecial() || H(u.path, "") : ("file" == u.scheme && !u.path.length && pe(p) && (u.host && (u.host = ""), p = L(p, 0) + ":"), H(u.path, p)), p = "", "file" == u.scheme && (a == n || "?" == a || "#" == a)) for (; u.path.length > 1 && "" === u.path[0];)G(u.path); "?" == a ? (u.query = "", l = xe) : "#" == a && (u.fragment = "", l = Ue) } else p += le(a, ce); break; case Le: "?" == a ? (u.query = "", l = xe) : "#" == a ? (u.fragment = "", l = Ue) : a != n && (u.path[0] += le(a, oe)); break; case xe: t || "#" != a ? a != n && ("'" == a && u.isSpecial() ? u.query += "%27" : u.query += "#" == a ? "%23" : le(a, oe)) : (u.fragment = "", l = Ue); break; case Ue: a != n && (u.fragment += le(a, se)) }d++ } }, parseHost: function (e) { var t, r, n; if ("[" == L(e, 0)) { if ("]" != L(e, e.length - 1)) return z; if (t = function (e) { var t, r, n, i, a, o, s, c = [0, 0, 0, 0, 0, 0, 0, 0], u = 0, l = null, d = 0, p = function () { return L(e, d) }; if (":" == p()) { if (":" != L(e, 1)) return; d += 2, l = ++u } for (; p();) { if (8 == u) return; if (":" != p()) { for (t = r = 0; r < 4 && x(ee, p());)t = 16 * t + w(p(), 16), d++, r++; if ("." == p()) { if (0 == r) return; if (d -= r, u > 6) return; for (n = 0; p();) { if (i = null, n > 0) { if (!("." == p() && n < 4)) return; d++ } if (!x(Q, p())) return; for (; x(Q, p());) { if (a = w(p(), 10), null === i) i = a; else { if (0 == i) return; i = 10 * i + a } if (i > 255) return; d++ } c[u] = 256 * c[u] + i, 2 != ++n && 4 != n || u++ } if (4 != n) return; break } if (":" == p()) { if (d++, !p()) return } else if (p()) return; c[u++] = t } else { if (null !== l) return; d++, l = ++u } } if (null !== l) for (o = u - l, u = 7; 0 != u && o > 0;)s = c[u], c[u--] = c[l + o - 1], c[l + --o] = s; else if (8 != u) return; return c }(q(e, 1, -1)), !t) return z; this.host = t } else if (this.isSpecial()) { if (e = E(e), x(te, e)) return z; if (t = function (e) { var t, r, n, i, a, o, s, c = F(e, "."); if (c.length && "" == c[c.length - 1] && c.length--, (t = c.length) > 4) return e; for (r = [], n = 0; n < t; n++) { if ("" == (i = c[n])) return e; if (a = 10, i.length > 1 && "0" == L(i, 0) && (a = x(Z, i) ? 16 : 8, i = q(i, 8 == a ? 1 : 2)), "" === i) o = 0; else { if (!x(10 == a ? X : 8 == a ? J : ee, i)) return e; o = w(i, a) } H(r, o) } for (n = 0; n < t; n++)if (o = r[n], n == t - 1) { if (o >= D(256, 5 - t)) return null } else if (o > 255) return null; for (s = k(r), n = 0; n < r.length; n++)s += r[n] * D(256, 3 - n); return s }(e), null === t) return z; this.host = t } else { if (x(re, e)) return z; for (t = "", r = g(e), n = 0; n < r.length; n++)t += le(r[n], oe); this.host = t } }, cannotHaveUsernamePasswordPort: function () { return !this.host || this.cannotBeABaseURL || "file" == this.scheme }, includesCredentials: function () { return "" != this.username || "" != this.password }, isSpecial: function () { return h(de, this.scheme) }, shortenPath: function () { var e = this.path, t = e.length; !t || "file" == this.scheme && 1 == t && pe(e[0], !0) || e.length-- }, serialize: function () { var e = this, t = e.scheme, r = e.username, n = e.password, i = e.host, a = e.port, o = e.path, s = e.query, c = e.fragment, u = t + ":"; return null !== i ? (u += "//", e.includesCredentials() && (u += r + (n ? ":" + n : "") + "@"), u += ae(i), null !== a && (u += ":" + a)) : "file" == t && (u += "//"), u += e.cannotBeABaseURL ? o[0] : o.length ? "/" + U(o, "/") : "", null !== s && (u += "?" + s), null !== c && (u += "#" + c), u }, setHref: function (e) { var t = this.parse(e); if (t) throw N(t); this.searchParams.update() }, getOrigin: function () { var e = this.scheme, t = this.port; if ("blob" == e) try { return new ke(e.path[0]).origin } catch (e) { return "null" } return "file" != e && this.isSpecial() ? e + "://" + ae(this.host) + (null !== t ? ":" + t : "") : "null" }, getProtocol: function () { return this.scheme + ":" }, setProtocol: function (e) { this.parse(y(e) + ":", ge) }, getUsername: function () { return this.username }, setUsername: function (e) { var t = g(y(e)); if (!this.cannotHaveUsernamePasswordPort()) { this.username = ""; for (var r = 0; r < t.length; r++)this.username += le(t[r], ue) } }, getPassword: function () { return this.password }, setPassword: function (e) { var t = g(y(e)); if (!this.cannotHaveUsernamePasswordPort()) { this.password = ""; for (var r = 0; r < t.length; r++)this.password += le(t[r], ue) } }, getHost: function () { var e = this.host, t = this.port; return null === e ? "" : null === t ? ae(e) : ae(e) + ":" + t }, setHost: function (e) { this.cannotBeABaseURL || this.parse(e, Oe) }, getHostname: function () { var e = this.host; return null === e ? "" : ae(e) }, setHostname: function (e) { this.cannotBeABaseURL || this.parse(e, Te) }, getPort: function () { var e = this.port; return null === e ? "" : y(e) }, setPort: function (e) { this.cannotHaveUsernamePasswordPort() || ("" == (e = y(e)) ? this.port = null : this.parse(e, Pe)) }, getPathname: function () { var e = this.path; return this.cannotBeABaseURL ? e[0] : e.length ? "/" + U(e, "/") : "" }, setPathname: function (e) { this.cannotBeABaseURL || (this.path = [], this.parse(e, be)) }, getSearch: function () { var e = this.query; return e ? "?" + e : "" }, setSearch: function (e) { "" == (e = y(e)) ? this.query = null : ("?" == L(e, 0) && (e = q(e, 1)), this.query = "", this.parse(e, xe)), this.searchParams.update() }, getSearchParams: function () { return this.searchParams.facade }, getHash: function () { var e = this.fragment; return e ? "#" + e : "" }, setHash: function (e) { "" != (e = y(e)) ? ("#" == L(e, 0) && (e = q(e, 1)), this.fragment = "", this.parse(e, Ue)) : this.fragment = null }, update: function () { this.query = this.searchParams.serialize() || null } }; var ke = function (e) { var t = p(this, He), r = A(arguments.length, 1) > 1 ? arguments[1] : void 0, n = C(t, new Me(e, !1, r)); a || (t.href = n.serialize(), t.origin = n.getOrigin(), t.protocol = n.getProtocol(), t.username = n.getUsername(), t.password = n.getPassword(), t.host = n.getHost(), t.hostname = n.getHostname(), t.port = n.getPort(), t.pathname = n.getPathname(), t.search = n.getSearch(), t.searchParams = n.getSearchParams(), t.hash = n.getHash()) }, He = ke.prototype, Be = function (e, t) { return { get: function () { return O(this)[e]() }, set: t && function (e) { return O(this)[t](e) }, configurable: !0, enumerable: !0 } }; if (a && (d(He, "href", Be("serialize", "setHref")), d(He, "origin", Be("getOrigin")), d(He, "protocol", Be("getProtocol", "setProtocol")), d(He, "username", Be("getUsername", "setUsername")), d(He, "password", Be("getPassword", "setPassword")), d(He, "host", Be("getHost", "setHost")), d(He, "hostname", Be("getHostname", "setHostname")), d(He, "port", Be("getPort", "setPort")), d(He, "pathname", Be("getPathname", "setPathname")), d(He, "search", Be("getSearch", "setSearch")), d(He, "searchParams", Be("getSearchParams")), d(He, "hash", Be("getHash", "setHash"))), l(He, "toJSON", (function () { return O(this).serialize() }), { enumerable: !0 }), l(He, "toString", (function () { return O(this).serialize() }), { enumerable: !0 }), R) { var Ge = R.createObjectURL, Fe = R.revokeObjectURL; Ge && l(ke, "createObjectURL", c(Ge, R)), Fe && l(ke, "revokeObjectURL", c(Fe, R)) } _(ke, "URL"), i({ global: !0, constructor: !0, forced: !o, sham: !a }, { URL: ke }) }, 285: (e, t, r) => { r(8789) } }, t = {}; function r(n) { var i = t[n]; if (void 0 !== i) return i.exports; var a = t[n] = { id: n, loaded: !1, exports: {} }; return e[n](a, a.exports, r), a.loaded = !0, a.exports } r.d = (e, t) => { for (var n in t) r.o(t, n) && !r.o(e, n) && Object.defineProperty(e, n, { enumerable: !0, get: t[n] }) }, r.g = function () { if ("object" == typeof globalThis) return globalThis; try { return this || new Function("return this")() } catch (e) { if ("object" == typeof window) return window } }(), r.hmd = e => ((e = Object.create(e)).children || (e.children = []), Object.defineProperty(e, "exports", { enumerable: !0, set: () => { throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: " + e.id) } }), e), r.o = (e, t) => Object.prototype.hasOwnProperty.call(e, t), r.r = e => { "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, { value: "Module" }), Object.defineProperty(e, "__esModule", { value: !0 }) }, (() => { "use strict"; var e = {}; r.r(e), r.d(e, { FunctionToString: () => W, InboundFilters: () => ce }); var t = {}; r.r(t), r.d(t, { Breadcrumbs: () => At, Dedupe: () => wt, GlobalHandlers: () => st, HttpContext: () => Nt, LinkedErrors: () => Tt, TryCatch: () => ft }), r(6992), r(3948), r(4916), r(285), r(1637), r(4747); var n = /android/i; function i() { var e, t = null === (e = navigator) || void 0 === e ? void 0 : e.userAgent; return !!t && Boolean((/Safari/.test(t) && (/iPhone/.test(t) || /iPad/.test(t)) && !/Trident/.test(t) || /AppleWebKit/.test(t) && !(/Android/.test(t) || /Linux/.test(t) || /Trident/.test(t)) && (/Mobile/.test(t) || /iPhone/.test(t) || /iPad/.test(t)) && !/Macintosh/.test(t) && !/Windows/.test(t)) && !(/Chrome/.test(t) || /CriOS/.test(t) || /Edg/.test(t))) } function a() { var e, t = null === (e = navigator) || void 0 === e ? void 0 : e.userAgent; return !!t && Boolean((/Safari/.test(t) || /AppleWebKit/.test(t)) && (/Macintosh/.test(t) || /Windows/.test(t)) && !/iPhone/.test(t) && !/iPad/.test(t) && !/Chrome/.test(t) && !/Edg/.test(t) && !/Firefox/.test(t)) } var o, s, c, u, l, d, p, h, f, g = { get documentBody() { return window.document.body }, get documentReferrer() { return window.document.referrer }, get documentVisibilityState() { return document.visibilityState }, getQueryParams: function (e, t) { var r = new URL(e), n = {}; return t.forEach((e => { var t = r.searchParams.get(e); t && (n[e] = t) })), n }, isAndroid: function () { return n.test(window.navigator.userAgent) }, isDesktopSafari: a, isMobileSafari: i, isSafari: function () { return i() || a() }, isSupported: function () { return void 0 !== window.postMessage && void 0 !== window.fetch && void 0 !== document.createElement("a").classList }, redirectTo: function (e) { window.location.href = e }, replaceWindowState: function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : document.title; window.history.replaceState(null, t, e) }, submitForm: function (e) { e.submit() }, get windowHash() { return window.location.hash }, get windowInnerHeight() { return window.innerHeight }, get windowInnerWidth() { return window.innerWidth }, get windowLocation() { return window.location }, get windowNavigationBeacon() { return window.navigator.sendBeacon }, get windowNavigationLanguage() { var e = window.navigator.language; return !e && window.navigator.languages.length > 0 && (e = window.navigator.languages[0]), e }, get windowParentLocation() { return window.parent.location }, get windowPerformance() { return window.performance } }; function m(e) { return t = e, r = f.JAVASCRIPT, n = new Blob([t], { type: r }), URL.createObjectURL(n); var t, r, n } !function (e) { e.Final = "FINAL", e.Estimated = "ESTIMATED", e.Unknown = "NOT_CURRENTLY_KNOWN" }(o || (o = {})), function (e) { e.INITIALIZE = "INITIALIZE", e.PAYMENT_AUTHORIZATION = "PAYMENT_AUTHORIZATION", e.SHIPPING_ADDRESS = "SHIPPING_ADDRESS", e.SHIPPING_OPTION = "SHIPPING_OPTION" }(s || (s = {})), function (e) { e.FULL = "FULL", e.MIN = "MIN" }(c || (c = {})), function (e) { e.CARD = "CARD" }(u || (u = {})), function (e) { e.PAYMENT_GATEWAY = "PAYMENT_GATEWAY" }(l || (l = {})), function (e) { e.SUCCESS = "SUCCESS" }(d || (d = {})), function (e) { e.TEST = "TEST", e.PRODUCTION = "PRODUCTION" }(p || (p = {})), function (e) { e.development = "development", e.sandbox = "sandbox", e.production = "production", e.staging = "staging", e.test = "test" }(h || (h = {})), function (e) { e.JAVASCRIPT = "text/javascript", e.HTML = "text/html" }(f || (f = {})); var v = null !== "production" ? "production" : "development", E = "".length > 0 ? "-".concat("") : "", y = { get AFTERPAY_SCRIPT_URL() { switch (v) { case h.test: return m("window.AfterPay = {};"); case h.production: return "https://portal.afterpay.com/afterpay.js?merchant_key=".concat(this.AFTERPAY_MERCHANT_ID); case h.sandbox: return "https://portal.sandbox.afterpay.com/afterpay.js?merchant_key=".concat(this.AFTERPAY_MERCHANT_ID); default: return "https://portal.stage.afterpay-beta.com/afterpay.js?merchant_key=".concat(this.AFTERPAY_MERCHANT_ID) } }, get AFTERPAY_MESSAGING_SCRIPT_URL() { return v === h.test ? m("window.Afterpay = {};") : "https://js.afterpay.com/afterpay-1.x.js" }, get AFTERPAY_CREATE_CHECKOUT() { return "".concat(this.API_URL, "/bnpl/afterpay/create-checkout") }, get AFTERPAY_MERCHANT_ID() { return "b8a38183b2e5959390488e48f9b109f6a73fd53c" }, get AFTERPAY_STYLES() { return "".concat(this.ASSET_URL, "/afterpay.css") }, get ANALYTICS_PUBLIC_ENDPOINT() { return v === h.test ? m("window.Square.Analytics = {};") : "".concat(this.API_PROTOCOL, "js.").concat(this.API_PUBLIC_HOST, "/payments/data.js") }, get API_HOST() { switch (v) { case h.production: return "pci-connect.squareup.com"; case h.sandbox: return "pci-connect.squareupsandbox.com"; default: return "pci-connect.squareupstaging.com" } }, get API_PROTOCOL() { return "https://" }, get API_PUBLIC_HOST() { switch (v) { case h.production: return "squareup.com"; case h.sandbox: return "squareupsandbox.com"; default: return "squareupstaging.com" } }, get API_URL() { return "".concat(this.API_PROTOCOL).concat(this.API_HOST) }, get APPENDED_FILE_NAME() { return E }, get APPLEPAY_VALIDATE_MERCHANT_ENDPOINT() { return "".concat(this.API_URL, "/v2/apple-pay/validate-merchant") }, get ASSET_BASE_URL() { return function (e) { switch (e) { case h.production: return "https://web.squarecdn.com"; case h.sandbox: return "https://sandbox.web.squarecdn.com"; case h.development: return "https://localhost:1779"; default: return "https://staging.web.squarecdn.com" } }(h[v]) }, get ASSET_URL() { return "local" === this.VERSION ? this.ASSET_BASE_URL : "".concat(this.ASSET_BASE_URL, "/").concat(this.VERSION) }, get BANK_NONCE_ENDPOINT() { return "".concat(this.API_URL, "/v2/bank-nonce") }, get CARD_NONCE_ENDPOINT() { return "".concat(this.API_URL, "/v2/card-nonce") }, get CASH_APP_API() { return v === h.production ? "https://api.cash.app" : "https://api.cashstaging.app" }, get CASH_APP_API_CUSTOMER() { return "".concat(this.CASH_APP_API, "/customer") }, get CASH_APP_AUTH_ENDPOINT() { return "".concat(this.API_URL, "/digital-wallets/cash-app/auth") }, get CASH_APP_PAY_CLIENT_ID() { switch (v) { case h.production: return "CA-CI_SQ_SELLER"; case h.sandbox: return "CAS-CI_SQ_SELLER_SANDBOX"; default: return "CAS-CI_SQ_SELLER_STAGING" } }, get CASH_APP_STYLES() { return "".concat(this.ASSET_URL, "/cash.css") }, get CASH_APP_PAY_SCRIPT_URL() { switch (v) { case h.production: return "https://kit.cash.app/v1/pay.js"; case h.test: return m("window.CashApp = {};"); default: return "https://sandbox.kit.cash.app/v1/pay.js" } }, get CREATE_PLAID_LINK_SESSION_ENDPOINT() { return "".concat(this.API_URL, "/digital-wallets/plaid/link-session") }, get PLAID_OAUTH_REDIRECT_URI() { return "" }, get CREATE_OAUTH_PLAID_LINK_SESSION_ENDPOINT() { return "".concat(this.API_URL, "/digital-wallets/plaid/oauth-link-session") }, get ENABLE_ERROR_LOGGING() { return v !== h.development }, get GET_PRODUCT_INFORMATION_ENDPOINT() { return "".concat(this.API_URL, "/v2/tokenization/product-information") }, get GIFT_CARD_IFRAME() { return "".concat(this.ASSET_URL, "/gift-card-element-iframe").concat(E, ".html") }, get GOOGLE_PAY_ENV() { return v === h.production ? p.PRODUCTION : p.TEST }, get GOOGLE_PAY_GENERATE_TOKEN_ENDPOINT() { return "".concat(this.API_URL, "/digital-wallets/google-pay/token") }, get GOOGLE_PAY_MERCHANT_ID() { return "05498866192997955200" }, get GOOGLE_PAY_SCRIPT_URL() { return v === h.test ? m("window.google = {};") : "https://pay.google.com/gp/p/js/pay.js" }, get HYDRATION_ENDPOINT() { return "".concat(this.API_URL, "/payments/hydrate") }, get IFRAME_SRC() { return "".concat(this.ASSET_URL, "/main-iframe").concat(E, ".html") }, get INSTANT_WALLET_NONCE_ENDPOINT() { return "".concat(this.API_URL, "/v2/instant-wallet-nonce") }, get MASTERPASS_CALLBACK_ENDPOINT() { return "".concat(this.API_URL, "/v2/masterpass/callback") }, get MASTERPASS_LIBRARY_URL() { return "".concat(this.API_URL, "/v2/masterpass/frame") }, get METRICS_ERROR_URL() { return "".concat(this.API_URL, "/payments/mtx/error") }, get METRICS_URL() { return "".concat(this.API_URL, "/payments/mtx") }, get METRICS_V2_URL() { return "".concat(this.API_URL, "/payments/mtx/v2") }, get PAYMENTS_UI_STYLES() { return v === h.test ? m("") : "".concat(this.ASSET_URL, "/payments-ui.css") }, get PLAID_LINK_ENV() { return v === h.production ? "production" : "sandbox" }, get PLAID_LINK_SCRIPT_URL() { return v === h.test ? m("window.Plaid = {};") : "https://cdn.plaid.com/link/v2/stable/link-initialize.js" }, get SENTRY_DSN() { switch (v) { case h.test: case h.development: return "https://acacaeaccacacacabcaacdacdacadaca@sentry.io/000001"; default: return "https://565ee38bb5ff45dabc25ab6d7b8bebe3@o160250.ingest.sentry.io/3478832" } }, get SINGLE_CARD_IFRAME() { return "".concat(this.ASSET_URL, "/single-card-element-iframe").concat(E, ".html") }, get SINGLE_CARD_WRAPPER_STYLES() { return "".concat(this.ASSET_URL, "/card-wrapper.css") }, STATIC_ASSET(e) { return "".concat(this.ASSET_URL, "/static-assets/").concat(e) }, get VERSION() { return "1.40.0" }, get WALLET_NONCE_ENDPOINT() { return "".concat(this.API_URL, "/v2/wallet-nonce") }, env: v }, _ = (r(9714), r(9720), r(2991)), A = Object.prototype.toString; function I(e) { switch (A.call(e)) { case "[object Error]": case "[object Exception]": case "[object DOMException]": return !0; default: return b(e, Error) } } function S(e, t) { return A.call(e) === `[object ${t}]` } function C(e) { return S(e, "ErrorEvent") } function O(e) { return S(e, "DOMError") } function T(e) { return S(e, "String") } function P(e) { return null === e || "object" != typeof e && "function" != typeof e } function R(e) { return S(e, "Object") } function N(e) { return "undefined" != typeof Event && b(e, Event) } function w(e) { return Boolean(e && e.then && "function" == typeof e.then) } function b(e, t) { try { return e instanceof t } catch (e) { return !1 } } function D(e, t) { try { let i = e; var r = []; let a = 0, o = 0; var n = " > ".length; let s; for (; i && a++ < 5 && (s = L(i, t), !("html" === s || a > 1 && o + r.length * n + s.length >= 80));)r.push(s), o += s.length, i = i.parentNode; return r.reverse().join(" > ") } catch (e) { return "<unknown>" } } function L(e, t) { var r = e, n = []; let i, a, o, s, c; if (!r || !r.tagName) return ""; n.push(r.tagName.toLowerCase()); var u = t && t.length ? t.filter((e => r.getAttribute(e))).map((e => [e, r.getAttribute(e)])) : null; if (u && u.length) u.forEach((e => { n.push(`[${e[0]}="${e[1]}"]`) })); else if (r.id && n.push(`#${r.id}`), i = r.className, i && T(i)) for (a = i.split(/\s+/), c = 0; c < a.length; c++)n.push(`.${a[c]}`); var l = ["type", "name", "title", "alt"]; for (c = 0; c < l.length; c++)o = l[c], s = r.getAttribute(o), s && n.push(`[${o}="${s}"]`); return n.join("") } function x(e, t = 0) { return "string" != typeof e || 0 === t || e.length <= t ? e : `${e.substr(0, t)}...` } function U(e, t) { if (!Array.isArray(e)) return ""; var r = []; for (let t = 0; t < e.length; t++) { var n = e[t]; try { r.push(String(n)) } catch (e) { r.push("[value cannot be serialized]") } } return r.join(t) } function M(e, t) { return !!T(e) && (S(t, "RegExp") ? t.test(e) : "string" == typeof t && -1 !== e.indexOf(t)) } function k(e, t, r) { if (t in e) { var n = e[t], i = r(n); if ("function" == typeof i) try { B(i, n) } catch (e) { } e[t] = i } } function H(e, t, r) { Object.defineProperty(e, t, { value: r, writable: !0, configurable: !0 }) } function B(e, t) { var r = t.prototype || {}; e.prototype = t.prototype = r, H(e, "__sentry_original__", t) } function G(e) { return e.__sentry_original__ } function F(e) { if (I(e)) return { message: e.message, name: e.name, stack: e.stack, ...j(e) }; if (N(e)) { var t = { type: e.type, target: q(e.target), currentTarget: q(e.currentTarget), ...j(e) }; return "undefined" != typeof CustomEvent && b(e, CustomEvent) && (t.detail = e.detail), t } return e } function q(e) { try { return "undefined" != typeof Element && b(e, Element) ? D(e) : Object.prototype.toString.call(e) } catch (e) { return "<unknown>" } } function j(e) { if ("object" == typeof e && null !== e) { var t = {}; for (var r in e) Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]); return t } return {} } function V(e, t = 40) { var r = Object.keys(F(e)); if (r.sort(), !r.length) return "[object has no keys]"; if (r[0].length >= t) return x(r[0], t); for (let e = r.length; e > 0; e--) { var n = r.slice(0, e).join(", "); if (!(n.length > t)) return e === r.length ? n : x(n, t) } return "" } function Y(e) { return z(e, new Map) } function z(e, t) { if (R(e)) { if (void 0 !== (i = t.get(e))) return i; var r = {}; for (var n of (t.set(e, r), Object.keys(e))) void 0 !== e[n] && (r[n] = z(e[n], t)); return r } var i; return Array.isArray(e) ? void 0 !== (i = t.get(e)) ? i : (r = [], t.set(e, r), e.forEach((e => { r.push(z(e, t)) })), r) : e } let K; class W { constructor() { W.prototype.__init.call(this) } static __initStatic() { this.id = "FunctionToString" } __init() { this.name = W.id } setupOnce() { K = Function.prototype.toString, Function.prototype.toString = function (...e) { var t = G(this) || this; return K.apply(t, e) } } } W.__initStatic(); var $ = (0, _.R)(), Q = ["debug", "info", "warn", "error", "log", "assert", "trace"]; function Z(e) { var t = (0, _.R)(); if (!("console" in t)) return e(); var r = t.console, n = {}; Q.forEach((e => { var i = r[e] && r[e].__sentry_original__; e in t.console && i && (n[e] = r[e], r[e] = i) })); try { return e() } finally { Object.keys(n).forEach((e => { r[e] = n[e] })) } } function J() { let e = !1; var t = { enable: () => { e = !0 }, disable: () => { e = !1 } }; return "undefined" == typeof __SENTRY_DEBUG__ || __SENTRY_DEBUG__ ? Q.forEach((r => { t[r] = (...t) => { e && Z((() => { $.console[r](`Sentry Logger [${r}]:`, ...t) })) } })) : Q.forEach((e => { t[e] = () => { } })), t } let X; function ee() { var e = (0, _.R)(), t = e.crypto || e.msCrypto; if (void 0 !== t && t.getRandomValues) { var r = new Uint16Array(8); t.getRandomValues(r), r[3] = 4095 & r[3] | 16384, r[4] = 16383 & r[4] | 32768; var n = e => { let t = e.toString(16); for (; t.length < 4;)t = `0${t}`; return t }; return n(r[0]) + n(r[1]) + n(r[2]) + n(r[3]) + n(r[4]) + n(r[5]) + n(r[6]) + n(r[7]) } return "xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g, (e => { var t = 16 * Math.random() | 0; return ("x" === e ? t : 3 & t | 8).toString(16) })) } function te(e) { if (!e) return {}; var t = e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/); if (!t) return {}; var r = t[6] || "", n = t[8] || ""; return { host: t[4], path: t[5], protocol: t[2], relative: t[5] + r + n } } function re(e) { return e.exception && e.exception.values ? e.exception.values[0] : void 0 } function ne(e) { const { message: t, event_id: r } = e; if (t) return t; var n = re(e); return n ? n.type && n.value ? `${n.type}: ${n.value}` : n.type || n.value || r || "<unknown>" : r || "<unknown>" } function ie(e, t, r) { var n = e.exception = e.exception || {}, i = n.values = n.values || [], a = i[0] = i[0] || {}; a.value || (a.value = t || ""), a.type || (a.type = r || "Error") } function ae(e, t) { var r = re(e); if (r) { var n = r.mechanism; if (r.mechanism = { type: "generic", handled: !0, ...n, ...t }, t && "data" in t) { var i = { ...n && n.data, ...t.data }; r.mechanism.data = i } } } function oe(e) { if (e && e.__sentry_captured__) return !0; try { H(e, "__sentry_captured__", !0) } catch (e) { } return !1 } X = "undefined" == typeof __SENTRY_DEBUG__ || __SENTRY_DEBUG__ ? (0, _.Y)("logger", J) : J(); var se = [/^Script error\.?$/, /^Javascript error: Script error\.? on line 0$/]; class ce { static __initStatic() { this.id = "InboundFilters" } __init() { this.name = ce.id } constructor(e = {}) { this._options = e, ce.prototype.__init.call(this) } setupOnce(e, t) { var r = e => { var r = t(); if (r) { var n = r.getIntegration(ce); if (n) { var i = r.getClient(), a = i ? i.getOptions() : {}, o = function (e = {}, t = {}) { return { allowUrls: [...e.allowUrls || [], ...t.allowUrls || []], denyUrls: [...e.denyUrls || [], ...t.denyUrls || []], ignoreErrors: [...e.ignoreErrors || [], ...t.ignoreErrors || [], ...se], ignoreInternal: void 0 === e.ignoreInternal || e.ignoreInternal } }(n._options, a); return function (e, t) { return t.ignoreInternal && function (e) { try { return "SentryError" === e.exception.values[0].type } catch (e) { } return !1 }(e) ? (("undefined" == typeof __SENTRY_DEBUG__ || __SENTRY_DEBUG__) && X.warn(`Event dropped due to being internal Sentry Error.\nEvent: ${ne(e)}`), !0) : function (e, t) { return !(!t || !t.length) && function (e) { if (e.message) return [e.message]; if (e.exception) try { const { type: t = "", value: r = "" } = e.exception.values && e.exception.values[0] || {}; return [`${r}`, `${t}: ${r}`] } catch (t) { return ("undefined" == typeof __SENTRY_DEBUG__ || __SENTRY_DEBUG__) && X.error(`Cannot extract message for event ${ne(e)}`), [] } return [] }(e).some((e => t.some((t => M(e, t))))) }(e, t.ignoreErrors) ? (("undefined" == typeof __SENTRY_DEBUG__ || __SENTRY_DEBUG__) && X.warn(`Event dropped due to being matched by \`ignoreErrors\` option.\nEvent: ${ne(e)}`), !0) : function (e, t) { if (!t || !t.length) return !1; var r = ue(e); return !!r && t.some((e => M(r, e))) }(e, t.denyUrls) ? (("undefined" == typeof __SENTRY_DEBUG__ || __SENTRY_DEBUG__) && X.warn(`Event dropped due to being matched by \`denyUrls\` option.\nEvent: ${ne(e)}.\nUrl: ${ue(e)}`), !0) : !function (e, t) { if (!t || !t.length) return !0; var r = ue(e); return !r || t.some((e => M(r, e))) }(e, t.allowUrls) && (("undefined" == typeof __SENTRY_DEBUG__ || __SENTRY_DEBUG__) && X.warn(`Event dropped due to not being matched by \`allowUrls\` option.\nEvent: ${ne(e)}.\nUrl: ${ue(e)}`), !0) }(e, o) ? null : e } } return e }; r.id = this.name, e(r) } } function ue(e) { try { let t; try { t = e.exception.values[0].stacktrace.frames } catch (e) { } return t ? function (e = []) { for (let r = e.length - 1; r >= 0; r--) { var t = e[r]; if (t && "<anonymous>" !== t.filename && "[native code]" !== t.filename) return t.filename || null } return null }(t) : null } catch (t) { return ("undefined" == typeof __SENTRY_DEBUG__ || __SENTRY_DEBUG__) && X.error(`Cannot extract url for event ${ne(e)}`), null } } ce.__initStatic(); var le, de = r(1170), pe = r(2176); function he(e) { return new ge((t => { t(e) })) } function fe(e) { return new ge(((t, r) => { r(e) })) } !function (e) { e[e.PENDING = 0] = "PENDING", e[e.RESOLVED = 1] = "RESOLVED", e[e.REJECTED = 2] = "REJECTED" }(le || (le = {})); class ge { __init() { this._state = le.PENDING } __init2() { this._handlers = [] } constructor(e) { ge.prototype.__init.call(this), ge.prototype.__init2.call(this), ge.prototype.__init3.call(this), ge.prototype.__init4.call(this), ge.prototype.__init5.call(this), ge.prototype.__init6.call(this); try { e(this._resolve, this._reject) } catch (e) { this._reject(e) } } then(e, t) { return new ge(((r, n) => { this._handlers.push([!1, t => { if (e) try { r(e(t)) } catch (e) { n(e) } else r(t) }, e => { if (t) try { r(t(e)) } catch (e) { n(e) } else n(e) }]), this._executeHandlers() })) } catch(e) { return this.then((e => e), e) } finally(e) { return new ge(((t, r) => { let n, i; return this.then((t => { i = !1, n = t, e && e() }), (t => { i = !0, n = t, e && e() })).then((() => { i ? r(n) : t(n) })) })) } __init3() { this._resolve = e => { this._setResult(le.RESOLVED, e) } } __init4() { this._reject = e => { this._setResult(le.REJECTED, e) } } __init5() { this._setResult = (e, t) => { this._state === le.PENDING && (w(t) ? t.then(this._resolve, this._reject) : (this._state = e, this._value = t, this._executeHandlers())) } } __init6() { this._executeHandlers = () => { if (this._state !== le.PENDING) { var e = this._handlers.slice(); this._handlers = [], e.forEach((e => { e[0] || (this._state === le.RESOLVED && e[1](this._value), this._state === le.REJECTED && e[2](this._value), e[0] = !0) })) } } } } function me(e, t = {}) { if (t.user && (!e.ipAddress && t.user.ip_address && (e.ipAddress = t.user.ip_address), e.did || t.did || (e.did = t.user.id || t.user.email || t.user.username)), e.timestamp = t.timestamp || (0, de.ph)(), t.ignoreDuration && (e.ignoreDuration = t.ignoreDuration), t.sid && (e.sid = 32 === t.sid.length ? t.sid : ee()), void 0 !== t.init && (e.init = t.init), !e.did && t.did && (e.did = `${t.did}`), "number" == typeof t.started && (e.started = t.started), e.ignoreDuration) e.duration = void 0; else if ("number" == typeof t.duration) e.duration = t.duration; else { var r = e.timestamp - e.started; e.duration = r >= 0 ? r : 0 } t.release && (e.release = t.release), t.environment && (e.environment = t.environment), !e.ipAddress && t.ipAddress && (e.ipAddress = t.ipAddress), !e.userAgent && t.userAgent && (e.userAgent = t.userAgent), "number" == typeof t.errors && (e.errors = t.errors), t.status && (e.status = t.status) } class ve { constructor() { this._notifyingListeners = !1, this._scopeListeners = [], this._eventProcessors = [], this._breadcrumbs = [], this._attachments = [], this._user = {}, this._tags = {}, this._extra = {}, this._contexts = {}, this._sdkProcessingMetadata = {} } static clone(e) { var t = new ve; return e && (t._breadcrumbs = [...e._breadcrumbs], t._tags = { ...e._tags }, t._extra = { ...e._extra }, t._contexts = { ...e._contexts }, t._user = e._user, t._level = e._level, t._span = e._span, t._session = e._session, t._transactionName = e._transactionName, t._fingerprint = e._fingerprint, t._eventProcessors = [...e._eventProcessors], t._requestSession = e._requestSession, t._attachments = [...e._attachments]), t } addScopeListener(e) { this._scopeListeners.push(e) } addEventProcessor(e) { return this._eventProcessors.push(e), this } setUser(e) { return this._user = e || {}, this._session && me(this._session, { user: e }), this._notifyScopeListeners(), this } getUser() { return this._user } getRequestSession() { return this._requestSession } setRequestSession(e) { return this._requestSession = e, this } setTags(e) { return this._tags = { ...this._tags, ...e }, this._notifyScopeListeners(), this } setTag(e, t) { return this._tags = { ...this._tags, [e]: t }, this._notifyScopeListeners(), this } setExtras(e) { return this._extra = { ...this._extra, ...e }, this._notifyScopeListeners(), this } setExtra(e, t) { return this._extra = { ...this._extra, [e]: t }, this._notifyScopeListeners(), this } setFingerprint(e) { return this._fingerprint = e, this._notifyScopeListeners(), this } setLevel(e) { return this._level = e, this._notifyScopeListeners(), this } setTransactionName(e) { return this._transactionName = e, this._notifyScopeListeners(), this } setContext(e, t) { return null === t ? delete this._contexts[e] : this._contexts = { ...this._contexts, [e]: t }, this._notifyScopeListeners(), this } setSpan(e) { return this._span = e, this._notifyScopeListeners(), this } getSpan() { return this._span } getTransaction() { var e = this.getSpan(); return e && e.transaction } setSession(e) { return e ? this._session = e : delete this._session, this._notifyScopeListeners(), this } getSession() { return this._session } update(e) { if (!e) return this; if ("function" == typeof e) { var t = e(this); return t instanceof ve ? t : this } return e instanceof ve ? (this._tags = { ...this._tags, ...e._tags }, this._extra = { ...this._extra, ...e._extra }, this._contexts = { ...this._contexts, ...e._contexts }, e._user && Object.keys(e._user).length && (this._user = e._user), e._level && (this._level = e._level), e._fingerprint && (this._fingerprint = e._fingerprint), e._requestSession && (this._requestSession = e._requestSession)) : R(e) && (e = e, this._tags = { ...this._tags, ...e.tags }, this._extra = { ...this._extra, ...e.extra }, this._contexts = { ...this._contexts, ...e.contexts }, e.user && (this._user = e.user), e.level && (this._level = e.level), e.fingerprint && (this._fingerprint = e.fingerprint), e.requestSession && (this._requestSession = e.requestSession)), this } clear() { return this._breadcrumbs = [], this._tags = {}, this._extra = {}, this._user = {}, this._contexts = {}, this._level = void 0, this._transactionName = void 0, this._fingerprint = void 0, this._requestSession = void 0, this._span = void 0, this._session = void 0, this._notifyScopeListeners(), this._attachments = [], this } addBreadcrumb(e, t) { var r = "number" == typeof t ? Math.min(t, 100) : 100; if (r <= 0) return this; var n = { timestamp: (0, de.yW)(), ...e }; return this._breadcrumbs = [...this._breadcrumbs, n].slice(-r), this._notifyScopeListeners(), this } clearBreadcrumbs() { return this._breadcrumbs = [], this._notifyScopeListeners(), this } addAttachment(e) { return this._attachments.push(e), this } getAttachments() { return this._attachments } clearAttachments() { return this._attachments = [], this } applyToEvent(e, t = {}) { if (this._extra && Object.keys(this._extra).length && (e.extra = { ...this._extra, ...e.extra }), this._tags && Object.keys(this._tags).length && (e.tags = { ...this._tags, ...e.tags }), this._user && Object.keys(this._user).length && (e.user = { ...this._user, ...e.user }), this._contexts && Object.keys(this._contexts).length && (e.contexts = { ...this._contexts, ...e.contexts }), this._level && (e.level = this._level), this._transactionName && (e.transaction = this._transactionName), this._span) { e.contexts = { trace: this._span.getTraceContext(), ...e.contexts }; var r = this._span.transaction && this._span.transaction.name; r && (e.tags = { transaction: r, ...e.tags }) } return this._applyFingerprint(e), e.breadcrumbs = [...e.breadcrumbs || [], ...this._breadcrumbs], e.breadcrumbs = e.breadcrumbs.length > 0 ? e.breadcrumbs : void 0, e.sdkProcessingMetadata = { ...e.sdkProcessingMetadata, ...this._sdkProcessingMetadata }, this._notifyEventProcessors([...Ee(), ...this._eventProcessors], e, t) } setSDKProcessingMetadata(e) { return this._sdkProcessingMetadata = { ...this._sdkProcessingMetadata, ...e }, this } _notifyEventProcessors(e, t, r, n = 0) { return new ge(((i, a) => { var o = e[n]; if (null === t || "function" != typeof o) i(t); else { var s = o({ ...t }, r); ("undefined" == typeof __SENTRY_DEBUG__ || __SENTRY_DEBUG__) && o.id && null === s && X.log(`Event processor "${o.id}" dropped event`), w(s) ? s.then((t => this._notifyEventProcessors(e, t, r, n + 1).then(i))).then(null, a) : this._notifyEventProcessors(e, s, r, n + 1).then(i).then(null, a) } })) } _notifyScopeListeners() { this._notifyingListeners || (this._notifyingListeners = !0, this._scopeListeners.forEach((e => { e(this) })), this._notifyingListeners = !1) } _applyFingerprint(e) { e.fingerprint = e.fingerprint ? Array.isArray(e.fingerprint) ? e.fingerprint : [e.fingerprint] : [], this._fingerprint && (e.fingerprint = e.fingerprint.concat(this._fingerprint)), e.fingerprint && !e.fingerprint.length && delete e.fingerprint } } function Ee() { return (0, _.Y)("globalEventProcessors", (() => [])) } function ye(e) { Ee().push(e) } var _e = 100; class Ae { __init() { this._stack = [{}] } constructor(e, t = new ve, r = 4) { this._version = r, Ae.prototype.__init.call(this), this.getStackTop().scope = t, e && this.bindClient(e) } isOlderThan(e) { return this._version < e } bindClient(e) { this.getStackTop().client = e, e && e.setupIntegrations && e.setupIntegrations() } pushScope() { var e = ve.clone(this.getScope()); return this.getStack().push({ client: this.getClient(), scope: e }), e } popScope() { return !(this.getStack().length <= 1 || !this.getStack().pop()) } withScope(e) { var t = this.pushScope(); try { e(t) } finally { this.popScope() } } getClient() { return this.getStackTop().client } getScope() { return this.getStackTop().scope } getStack() { return this._stack } getStackTop() { return this._stack[this._stack.length - 1] } captureException(e, t) { var r = this._lastEventId = t && t.event_id ? t.event_id : ee(), n = new Error("Sentry syntheticException"); return this._withClient(((i, a) => { i.captureException(e, { originalException: e, syntheticException: n, ...t, event_id: r }, a) })), r } captureMessage(e, t, r) { var n = this._lastEventId = r && r.event_id ? r.event_id : ee(), i = new Error(e); return this._withClient(((a, o) => { a.captureMessage(e, t, { originalException: e, syntheticException: i, ...r, event_id: n }, o) })), n } captureEvent(e, t) { var r = t && t.event_id ? t.event_id : ee(); return "transaction" !== e.type && (this._lastEventId = r), this._withClient(((n, i) => { n.captureEvent(e, { ...t, event_id: r }, i) })), r } lastEventId() { return this._lastEventId } addBreadcrumb(e, t) { const { scope: r, client: n } = this.getStackTop(); if (!r || !n) return; const { beforeBreadcrumb: i = null, maxBreadcrumbs: a = _e } = n.getOptions && n.getOptions() || {}; if (!(a <= 0)) { var o = { timestamp: (0, de.yW)(), ...e }, s = i ? Z((() => i(o, t))) : o; null !== s && r.addBreadcrumb(s, a) } } setUser(e) { var t = this.getScope(); t && t.setUser(e) } setTags(e) { var t = this.getScope(); t && t.setTags(e) } setExtras(e) { var t = this.getScope(); t && t.setExtras(e) } setTag(e, t) { var r = this.getScope(); r && r.setTag(e, t) } setExtra(e, t) { var r = this.getScope(); r && r.setExtra(e, t) } setContext(e, t) { var r = this.getScope(); r && r.setContext(e, t) } configureScope(e) { const { scope: t, client: r } = this.getStackTop(); t && r && e(t) } run(e) { var t = Se(this); try { e(this) } finally { Se(t) } } getIntegration(e) { var t = this.getClient(); if (!t) return null; try { return t.getIntegration(e) } catch (t) { return ("undefined" == typeof __SENTRY_DEBUG__ || __SENTRY_DEBUG__) && X.warn(`Cannot retrieve integration ${e.id} from the current Hub`), null } } startTransaction(e, t) { return this._callExtensionMethod("startTransaction", e, t) } traceHeaders() { return this._callExtensionMethod("traceHeaders") } captureSession(e = !1) { if (e) return this.endSession(); this._sendSessionUpdate() } endSession() { var e = this.getStackTop(), t = e && e.scope, r = t && t.getSession(); r && function (e, t) { let r = {}; "ok" === e.status && (r = { status: "exited" }), me(e, r) }(r), this._sendSessionUpdate(), t && t.setSession() } startSession(e) { const { scope: t, client: r } = this.getStackTop(), { release: n, environment: i } = r && r.getOptions() || {}; var a = (0, _.R)(); const { userAgent: o } = a.navigator || {}; var s = function (e) { var t = (0, de.ph)(), r = { sid: ee(), init: !0, timestamp: t, started: t, duration: 0, status: "ok", errors: 0, ignoreDuration: !1, toJSON: () => function (e) { return Y({ sid: `${e.sid}`, init: e.init, started: new Date(1e3 * e.started).toISOString(), timestamp: new Date(1e3 * e.timestamp).toISOString(), status: e.status, errors: e.errors, did: "number" == typeof e.did || "string" == typeof e.did ? `${e.did}` : void 0, duration: e.duration, attrs: { release: e.release, environment: e.environment, ip_address: e.ipAddress, user_agent: e.userAgent } }) }(r) }; return e && me(r, e), r }({ release: n, environment: i, ...t && { user: t.getUser() }, ...o && { userAgent: o }, ...e }); if (t) { var c = t.getSession && t.getSession(); c && "ok" === c.status && me(c, { status: "exited" }), this.endSession(), t.setSession(s) } return s } shouldSendDefaultPii() { var e = this.getClient(), t = e && e.getOptions(); return Boolean(t && t.sendDefaultPii) } _sendSessionUpdate() { const { scope: e, client: t } = this.getStackTop(); if (e) { var r = e.getSession(); r && t && t.captureSession && t.captureSession(r) } } _withClient(e) { const { scope: t, client: r } = this.getStackTop(); r && e(r, t) } _callExtensionMethod(e, ...t) { var r = Ie().__SENTRY__; if (r && r.extensions && "function" == typeof r.extensions[e]) return r.extensions[e].apply(this, t); ("undefined" == typeof __SENTRY_DEBUG__ || __SENTRY_DEBUG__) && X.warn(`Extension method ${e} couldn't be found, doing nothing.`) } } function Ie() { var e = (0, _.R)(); return e.__SENTRY__ = e.__SENTRY__ || { extensions: {}, hub: void 0 }, e } function Se(e) { var t = Ie(), r = Te(t); return Pe(t, e), r } function Ce() { var e = Ie(); return Oe(e) && !Te(e).isOlderThan(4) || Pe(e, new Ae), (0, pe.KV)() ? function (e) { try { var t = Ie().__SENTRY__, r = t && t.extensions && t.extensions.domain && t.extensions.domain.active; if (!r) return Te(e); if (!Oe(r) || Te(r).isOlderThan(4)) { var n = Te(e).getStackTop(); Pe(r, new Ae(n.client, ve.clone(n.scope))) } return Te(r) } catch (t) { return Te(e) } }(e) : Te(e) } function Oe(e) { return !!(e && e.__SENTRY__ && e.__SENTRY__.hub) } function Te(e) { return (0, _.Y)("hub", (() => new Ae), e) } function Pe(e, t) { return !!e && ((e.__SENTRY__ = e.__SENTRY__ || {}).hub = t, !0) } var Re = "<anonymous>"; function Ne(e) { try { return e && "function" == typeof e && e.name || Re } catch (e) { return Re } } function we() { if (!("fetch" in (0, _.R)())) return !1; try { return new Headers, new Request(""), new Response, !0 } catch (e) { return !1 } } function be(e) { return e && /^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString()) } var De = (0, _.R)(), Le = {}, xe = {}; function Ue(e, t) { Le[e] = Le[e] || [], Le[e].push(t), function (e) { if (!xe[e]) switch (xe[e] = !0, e) { case "console": "console" in De && Q.forEach((function (e) { e in De.console && k(De.console, e, (function (t) { return function (...r) { Me("console", { args: r, level: e }), t && t.apply(De.console, r) } })) })); break; case "dom": !function () { if ("document" in De) { var e = Me.bind(null, "dom"), t = qe(e, !0); De.document.addEventListener("click", t, !1), De.document.addEventListener("keypress", t, !1), ["EventTarget", "Node"].forEach((t => { var r = De[t] && De[t].prototype; r && r.hasOwnProperty && r.hasOwnProperty("addEventListener") && (k(r, "addEventListener", (function (t) { return function (r, n, i) { if ("click" === r || "keypress" == r) try { var a = this.__sentry_instrumentation_handlers__ = this.__sentry_instrumentation_handlers__ || {}, o = a[r] = a[r] || { refCount: 0 }; if (!o.handler) { var s = qe(e); o.handler = s, t.call(this, r, s, i) } o.refCount += 1 } catch (e) { } return t.call(this, r, n, i) } })), k(r, "removeEventListener", (function (e) { return function (t, r, n) { if ("click" === t || "keypress" == t) try { var i = this.__sentry_instrumentation_handlers__ || {}, a = i[t]; a && (a.refCount -= 1, a.refCount <= 0 && (e.call(this, t, a.handler, n), a.handler = void 0, delete i[t]), 0 === Object.keys(i).length && delete this.__sentry_instrumentation_handlers__) } catch (e) { } return e.call(this, t, r, n) } }))) })) } }(); break; case "xhr": !function () { if ("XMLHttpRequest" in De) { var e = XMLHttpRequest.prototype; k(e, "open", (function (e) { return function (...t) { var r = this, n = t[1], i = r.__sentry_xhr__ = { method: T(t[0]) ? t[0].toUpperCase() : t[0], url: t[1] }; T(n) && "POST" === i.method && n.match(/sentry_key/) && (r.__sentry_own_request__ = !0); var a = function () { if (4 === r.readyState) { try { i.status_code = r.status } catch (e) { } Me("xhr", { args: t, endTimestamp: Date.now(), startTimestamp: Date.now(), xhr: r }) } }; return "onreadystatechange" in r && "function" == typeof r.onreadystatechange ? k(r, "onreadystatechange", (function (e) { return function (...t) { return a(), e.apply(r, t) } })) : r.addEventListener("readystatechange", a), e.apply(r, t) } })), k(e, "send", (function (e) { return function (...t) { return this.__sentry_xhr__ && void 0 !== t[0] && (this.__sentry_xhr__.body = t[0]), Me("xhr", { args: t, startTimestamp: Date.now(), xhr: this }), e.apply(this, t) } })) } }(); break; case "fetch": (function () { if (!we()) return !1; var e = (0, _.R)(); if (be(e.fetch)) return !0; let t = !1; var r = e.document; if (r && "function" == typeof r.createElement) try { var n = r.createElement("iframe"); n.hidden = !0, r.head.appendChild(n), n.contentWindow && n.contentWindow.fetch && (t = be(n.contentWindow.fetch)), r.head.removeChild(n) } catch (e) { ("undefined" == typeof __SENTRY_DEBUG__ || __SENTRY_DEBUG__) && X.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ", e) } return t })() && k(De, "fetch", (function (e) { return function (...t) { var r = { args: t, fetchData: { method: ke(t), url: He(t) }, startTimestamp: Date.now() }; return Me("fetch", { ...r }), e.apply(De, t).then((e => (Me("fetch", { ...r, endTimestamp: Date.now(), response: e }), e)), (e => { throw Me("fetch", { ...r, endTimestamp: Date.now(), error: e }), e })) } })); break; case "history": !function () { if (function () { var e = (0, _.R)(), t = e.chrome, r = t && t.app && t.app.runtime, n = "history" in e && !!e.history.pushState && !!e.history.replaceState; return !r && n }()) { var e = De.onpopstate; De.onpopstate = function (...t) { var r = De.location.href, n = Be; if (Be = r, Me("history", { from: n, to: r }), e) try { return e.apply(this, t) } catch (e) { } }, k(De.history, "pushState", t), k(De.history, "replaceState", t) } function t(e) { return function (...t) { var r = t.length > 2 ? t[2] : void 0; if (r) { var n = Be, i = String(r); Be = i, Me("history", { from: n, to: i }) } return e.apply(this, t) } } }(); break; case "error": je = De.onerror, De.onerror = function (e, t, r, n, i) { return Me("error", { column: n, error: i, line: r, msg: e, url: t }), !!je && je.apply(this, arguments) }; break; case "unhandledrejection": Ve = De.onunhandledrejection, De.onunhandledrejection = function (e) { return Me("unhandledrejection", e), !Ve || Ve.apply(this, arguments) }; break; default: ("undefined" == typeof __SENTRY_DEBUG__ || __SENTRY_DEBUG__) && X.warn("unknown instrumentation type:", e) } }(e) } function Me(e, t) { if (e && Le[e]) for (var r of Le[e] || []) try { r(t) } catch (t) { ("undefined" == typeof __SENTRY_DEBUG__ || __SENTRY_DEBUG__) && X.error(`Error while triggering instrumentation handler.\nType: ${e}\nName: ${Ne(r)}\nError:`, t) } } function ke(e = []) { return "Request" in De && b(e[0], Request) && e[0].method ? String(e[0].method).toUpperCase() : e[1] && e[1].method ? String(e[1].method).toUpperCase() : "GET" } function He(e = []) { return "string" == typeof e[0] ? e[0] : "Request" in De && b(e[0], Request) ? e[0].url : String(e[0]) } let Be, Ge, Fe; function qe(e, t = !1) { return r => { if (r && Fe !== r && !function (e) { if ("keypress" !== e.type) return !1; try { var t = e.target; if (!t || !t.tagName) return !0; if ("INPUT" === t.tagName || "TEXTAREA" === t.tagName || t.isContentEditable) return !1 } catch (e) { } return !0 }(r)) { var n = "keypress" === r.type ? "input" : r.type; (void 0 === Ge || function (e, t) { if (!e) return !0; if (e.type !== t.type) return !0; try { if (e.target !== t.target) return !0 } catch (e) { } return !1 }(Fe, r)) && (e({ event: r, name: n, global: t }), Fe = r), clearTimeout(Ge), Ge = De.setTimeout((() => { Ge = void 0 }), 1e3) } } } let je = null, Ve = null; function Ye(e, t = 1 / 0, r = 1 / 0) { try { return Ke("", e, t, r) } catch (e) { return { ERROR: `**non-serializable** (${e})` } } } function ze(e, t = 3, r = 102400) { var n, i = Ye(e, t); return n = i, function (e) { return ~-encodeURI(e).split(/%..|./).length }(JSON.stringify(n)) > r ? ze(e, t - 1, r) : i } function Ke(e, t, n = 1 / 0, i = 1 / 0, a = function () { var e = "function" == typeof WeakSet, t = e ? new WeakSet : []; return [function (r) { if (e) return !!t.has(r) || (t.add(r), !1); for (let e = 0; e < t.length; e++)if (t[e] === r) return !0; return t.push(r), !1 }, function (r) { if (e) t.delete(r); else for (let e = 0; e < t.length; e++)if (t[e] === r) { t.splice(e, 1); break } }] }()) { const [o, s] = a; if (null === t || ["number", "boolean", "string"].includes(typeof t) && ("number" != typeof (c = t) || c == c)) return t; var c, u = function (e, t) { try { return "domain" === e && t && "object" == typeof t && t._events ? "[Domain]" : "domainEmitter" === e ? "[DomainEmitter]" : void 0 !== r.g && t === r.g ? "[Global]" : "undefined" != typeof window && t === window ? "[Window]" : "undefined" != typeof document && t === document ? "[Document]" : function (e) { return R(e) && "nativeEvent" in e && "preventDefault" in e && "stopPropagation" in e }(t) ? "[SyntheticEvent]" : "number" == typeof t && t != t ? "[NaN]" : void 0 === t ? "[undefined]" : "function" == typeof t ? `[Function: ${Ne(t)}]` : "symbol" == typeof t ? `[${String(t)}]` : "bigint" == typeof t ? `[BigInt: ${String(t)}]` : `[object ${Object.getPrototypeOf(t).constructor.name}]` } catch (e) { return `**non-serializable** (${e})` } }(e, t); if (!u.startsWith("[object ")) return u; if (t.__sentry_skip_normalization__) return t; if (0 === n) return u.replace("object ", ""); if (o(t)) return "[Circular ~]"; var l = t; if (l && "function" == typeof l.toJSON) try { return Ke("", l.toJSON(), n - 1, i, a) } catch (e) { } var d = Array.isArray(t) ? [] : {}; let p = 0; var h = F(t); for (var f in h) if (Object.prototype.hasOwnProperty.call(h, f)) { if (p >= i) { d[f] = "[MaxProperties ~]"; break } var g = h[f]; d[f] = Ke(f, g, n - 1, i, a), p += 1 } return s(t), d } function We(e, t) { var r = Qe(e, t), n = { type: t && t.name, value: Je(t) }; return r.length && (n.stacktrace = { frames: r }), void 0 === n.type && "" === n.value && (n.value = "Unrecoverable error caught"), n } function $e(e, t) { return { exception: { values: [We(e, t)] } } } function Qe(e, t) { var r = t.stacktrace || t.stack || "", n = function (e) { if (e) { if ("number" == typeof e.framesToPop) return e.framesToPop; if (Ze.test(e.message)) return 1 } return 0 }(t); try { return e(r, n) } catch (e) { } return [] } var Ze = /Minified React error #\d+;/i; function Je(e) { var t = e && e.message; return t ? t.error && "string" == typeof t.error.message ? t.error.message : t : "No error message" } function Xe(e, t, r, n, i) { let a; if (C(t) && t.error) return $e(e, t.error); if (O(t) || S(t, "DOMException")) { var o = t; if ("stack" in t) a = $e(e, t); else { var s = o.name || (O(o) ? "DOMError" : "DOMException"), c = o.message ? `${s}: ${o.message}` : s; a = et(e, c, r, n), ie(a, c) } return "code" in o && (a.tags = { ...a.tags, "DOMException.code": `${o.code}` }), a } return I(t) ? $e(e, t) : R(t) || N(t) ? (a = function (e, t, r, n) { var i = { exception: { values: [{ type: N(t) ? t.constructor.name : n ? "UnhandledRejection" : "Error", value: `Non-Error ${n ? "promise rejection" : "exception"} captured with keys: ${V(t)}` }] }, extra: { __serialized__: ze(t) } }; if (r) { var a = Qe(e, r); a.length && (i.exception.values[0].stacktrace = { frames: a }) } return i }(e, t, r, i), ae(a, { synthetic: !0 }), a) : (a = et(e, t, r, n), ie(a, `${t}`, void 0), ae(a, { synthetic: !0 }), a) } function et(e, t, r, n) { var i = { message: t }; if (n && r) { var a = Qe(e, r); a.length && (i.exception = { values: [{ value: t, stacktrace: { frames: a } }] }) } return i } function tt(e, t) { return Ce().captureException(e, { captureContext: t }) } function rt(e) { Ce().withScope(e) } let nt = 0; function it() { return nt > 0 } function at() { nt += 1, setTimeout((() => { nt -= 1 })) } function ot(e, t = {}, r) { if ("function" != typeof e) return e; try { var n = e.__sentry_wrapped__; if (n) return n; if (G(e)) return e } catch (t) { return e } var i = function () { var n = Array.prototype.slice.call(arguments); try { r && "function" == typeof r && r.apply(this, arguments); var i = n.map((e => ot(e, t))); return e.apply(this, i) } catch (e) { throw at(), rt((r => { r.addEventProcessor((e => (t.mechanism && (ie(e, void 0, void 0), ae(e, t.mechanism)), e.extra = { ...e.extra, arguments: n }, e))), tt(e) })), e } }; try { for (var a in e) Object.prototype.hasOwnProperty.call(e, a) && (i[a] = e[a]) } catch (e) { } B(i, e), H(e, "__sentry_wrapped__", i); try { Object.getOwnPropertyDescriptor(i, "name").configurable && Object.defineProperty(i, "name", { get: () => e.name }) } catch (e) { } return i } class st { static __initStatic() { this.id = "GlobalHandlers" } __init() { this.name = st.id } __init2() { this._installFunc = { onerror: ct, onunhandledrejection: ut } } constructor(e) { st.prototype.__init.call(this), st.prototype.__init2.call(this), this._options = { onerror: !0, onunhandledrejection: !0, ...e } } setupOnce() { Error.stackTraceLimit = 50; var e, t = this._options; for (var r in t) { var n = this._installFunc[r]; n && t[r] && (e = r, ("undefined" == typeof __SENTRY_DEBUG__ || __SENTRY_DEBUG__) && X.log(`Global Handler attached: ${e}`), n(), this._installFunc[r] = void 0) } } } function ct() { Ue("error", (e => { const [t, r, n] = pt(); if (!t.getIntegration(st)) return; const { msg: i, url: a, line: o, column: s, error: c } = e; if (!(it() || c && c.__sentry_own_request__)) { var u = void 0 === c && T(i) ? function (e, t, r, n) { let i = C(e) ? e.message : e, a = "Error"; var o = i.match(/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i); return o && (a = o[1], i = o[2]), lt({ exception: { values: [{ type: a, value: i }] } }, t, r, n) }(i, a, o, s) : lt(Xe(r, c || i, void 0, n, !1), a, o, s); u.level = "error", dt(t, c, u, "onerror") } })) } function ut() { Ue("unhandledrejection", (e => { const [t, r, n] = pt(); if (!t.getIntegration(st)) return; let i = e; try { "reason" in e ? i = e.reason : "detail" in e && "reason" in e.detail && (i = e.detail.reason) } catch (e) { } if (it() || i && i.__sentry_own_request__) return !0; var a = P(i) ? { exception: { values: [{ type: "UnhandledRejection", value: `Non-Error promise rejection captured with value: ${String(i)}` }] } } : Xe(r, i, void 0, n, !0); a.level = "error", dt(t, i, a, "onunhandledrejection") })) } function lt(e, t, r, n) { var i = e.exception = e.exception || {}, a = i.values = i.values || [], o = a[0] = a[0] || {}, s = o.stacktrace = o.stacktrace || {}, c = s.frames = s.frames || [], u = isNaN(parseInt(n, 10)) ? void 0 : n, l = isNaN(parseInt(r, 10)) ? void 0 : r, d = T(t) && t.length > 0 ? t : function () { var e = (0, _.R)(); try { return e.document.location.href } catch (e) { return "" } }(); return 0 === c.length && c.push({ colno: u, filename: d, function: "?", in_app: !0, lineno: l }), e } function dt(e, t, r, n) { ae(r, { handled: !1, type: n }), e.captureEvent(r, { originalException: t }) } function pt() { var e = Ce(), t = e.getClient(), r = t && t.getOptions() || { stackParser: () => [], attachStacktrace: !1 }; return [e, r.stackParser, r.attachStacktrace] } st.__initStatic(); var ht = ["EventTarget", "Window", "Node", "ApplicationCache", "AudioTrackList", "ChannelMergerNode", "CryptoOperation", "EventSource", "FileReader", "HTMLUnknownElement", "IDBDatabase", "IDBRequest", "IDBTransaction", "KeyOperation", "MediaController", "MessagePort", "ModalWindow", "Notification", "SVGElementInstance", "Screen", "TextTrack", "TextTrackCue", "TextTrackList", "WebSocket", "WebSocketWorker", "Worker", "XMLHttpRequest", "XMLHttpRequestEventTarget", "XMLHttpRequestUpload"]; class ft { static __initStatic() { this.id = "TryCatch" } __init() { this.name = ft.id } constructor(e) { ft.prototype.__init.call(this), this._options = { XMLHttpRequest: !0, eventTarget: !0, requestAnimationFrame: !0, setInterval: !0, setTimeout: !0, ...e } } setupOnce() { var e = (0, _.R)(); this._options.setTimeout && k(e, "setTimeout", gt), this._options.setInterval && k(e, "setInterval", gt), this._options.requestAnimationFrame && k(e, "requestAnimationFrame", mt), this._options.XMLHttpRequest && "XMLHttpRequest" in e && k(XMLHttpRequest.prototype, "send", vt); var t = this._options.eventTarget; t && (Array.isArray(t) ? t : ht).forEach(Et) } } function gt(e) { return function (...t) { var r = t[0]; return t[0] = ot(r, { mechanism: { data: { function: Ne(e) }, handled: !0, type: "instrument" } }), e.apply(this, t) } } function mt(e) { return function (t) { return e.apply(this, [ot(t, { mechanism: { data: { function: "requestAnimationFrame", handler: Ne(e) }, handled: !0, type: "instrument" } })]) } } function vt(e) { return function (...t) { var r = this; return ["onload", "onerror", "onprogress", "onreadystatechange"].forEach((e => { e in r && "function" == typeof r[e] && k(r, e, (function (t) { var r = { mechanism: { data: { function: e, handler: Ne(t) }, handled: !0, type: "instrument" } }, n = G(t); return n && (r.mechanism.data.handler = Ne(n)), ot(t, r) })) })), e.apply(this, t) } } function Et(e) { var t = (0, _.R)(), r = t[e] && t[e].prototype; r && r.hasOwnProperty && r.hasOwnProperty("addEventListener") && (k(r, "addEventListener", (function (t) { return function (r, n, i) { try { "function" == typeof n.handleEvent && (n.handleEvent = ot(n.handleEvent, { mechanism: { data: { function: "handleEvent", handler: Ne(n), target: e }, handled: !0, type: "instrument" } })) } catch (e) { } return t.apply(this, [r, ot(n, { mechanism: { data: { function: "addEventListener", handler: Ne(n), target: e }, handled: !0, type: "instrument" } }), i]) } })), k(r, "removeEventListener", (function (e) { return function (t, r, n) { var i = r; try { var a = i && i.__sentry_wrapped__; a && e.call(this, t, a, n) } catch (e) { } return e.call(this, t, i, n) } }))) } ft.__initStatic(); var yt = ["fatal", "error", "warning", "log", "info", "debug"]; var _t = "Breadcrumbs"; class At { static __initStatic() { this.id = _t } __init() { this.name = At.id } constructor(e) { At.prototype.__init.call(this), this.options = { console: !0, dom: !0, fetch: !0, history: !0, sentry: !0, xhr: !0, ...e } } setupOnce() { var e; this.options.console && Ue("console", It), this.options.dom && Ue("dom", (e = this.options.dom, function (t) { let r, n = "object" == typeof e ? e.serializeAttribute : void 0; "string" == typeof n && (n = [n]); try { r = t.event.target ? D(t.event.target, n) : D(t.event, n) } catch (e) { r = "<unknown>" } 0 !== r.length && Ce().addBreadcrumb({ category: `ui.${t.name}`, message: r }, { event: t.event, name: t.name, global: t.global }) })), this.options.xhr && Ue("xhr", St), this.options.fetch && Ue("fetch", Ct), this.options.history && Ue("history", Ot) } } function It(e) { var t, r = { category: "console", data: { arguments: e.args, logger: "console" }, level: (t = e.level, "warn" === t ? "warning" : yt.includes(t) ? t : "log"), message: U(e.args, " ") }; if ("assert" === e.level) { if (!1 !== e.args[0]) return; r.message = `Assertion failed: ${U(e.args.slice(1), " ") || "console.assert"}`, r.data.arguments = e.args.slice(1) } Ce().addBreadcrumb(r, { input: e.args, level: e.level }) } function St(e) { if (e.endTimestamp) { if (e.xhr.__sentry_own_request__) return; const { method: t, url: r, status_code: n, body: i } = e.xhr.__sentry_xhr__ || {}; Ce().addBreadcrumb({ category: "xhr", data: { method: t, url: r, status_code: n }, type: "http" }, { xhr: e.xhr, input: i }) } } function Ct(e) { e.endTimestamp && (e.fetchData.url.match(/sentry_key/) && "POST" === e.fetchData.method || (e.error ? Ce().addBreadcrumb({ category: "fetch", data: e.fetchData, level: "error", type: "http" }, { data: e.error, input: e.args }) : Ce().addBreadcrumb({ category: "fetch", data: { ...e.fetchData, status_code: e.response.status }, type: "http" }, { input: e.args, response: e.response }))) } function Ot(e) { var t = (0, _.R)(); let r = e.from, n = e.to; var i = te(t.location.href); let a = te(r); var o = te(n); a.path || (a = i), i.protocol === o.protocol && i.host === o.host && (n = o.relative), i.protocol === a.protocol && i.host === a.host && (r = a.relative), Ce().addBreadcrumb({ category: "navigation", data: { from: r, to: n } }) } At.__initStatic(); class Tt { static __initStatic() { this.id = "LinkedErrors" } __init() { this.name = Tt.id } constructor(e = {}) { Tt.prototype.__init.call(this), this._key = e.key || "cause", this._limit = e.limit || 5 } setupOnce() { var e = Ce().getClient(); e && ye(((t, r) => { var n = Ce().getIntegration(Tt); return n ? function (e, t, r, n, i) { if (!(n.exception && n.exception.values && i && b(i.originalException, Error))) return n; var a = Pt(e, r, i.originalException, t); return n.exception.values = [...a, ...n.exception.values], n }(e.getOptions().stackParser, n._key, n._limit, t, r) : t })) } } function Pt(e, t, r, n, i = []) { if (!b(r[n], Error) || i.length + 1 >= t) return i; var a = We(e, r[n]); return Pt(e, t, r[n], n, [a, ...i]) } Tt.__initStatic(); var Rt = (0, _.R)(); class Nt { constructor() { Nt.prototype.__init.call(this) } static __initStatic() { this.id = "HttpContext" } __init() { this.name = Nt.id } setupOnce() { ye((e => { if (Ce().getIntegration(Nt)) { if (!Rt.navigator && !Rt.location && !Rt.document) return e; var t = e.request && e.request.url || Rt.location && Rt.location.href; const { referrer: n } = Rt.document || {}, { userAgent: i } = Rt.navigator || {}; var r = { ...t && { url: t }, headers: { ...e.request && e.request.headers, ...n && { Referer: n }, ...i && { "User-Agent": i } } }; return { ...e, request: r } } return e })) } } Nt.__initStatic(); class wt { constructor() { wt.prototype.__init.call(this) } static __initStatic() { this.id = "Dedupe" } __init() { this.name = wt.id } setupOnce(e, t) { var r = e => { var r = t().getIntegration(wt); if (r) { try { if (function (e, t) { return !!t && (!!function (e, t) { var r = e.message, n = t.message; return !(!r && !n) && (!(r && !n || !r && n) && (r === n && (!!Dt(e, t) && !!bt(e, t)))) }(e, t) || !!function (e, t) { var r = Lt(t), n = Lt(e); return !(!r || !n) && (r.type === n.type && r.value === n.value && (!!Dt(e, t) && !!bt(e, t))) }(e, t)) }(e, r._previousEvent)) return ("undefined" == typeof __SENTRY_DEBUG__ || __SENTRY_DEBUG__) && X.warn("Event dropped due to being a duplicate of previously captured event."), null } catch (t) { return r._previousEvent = e } return r._previousEvent = e } return e }; r.id = this.name, e(r) } } function bt(e, t) { let r = xt(e), n = xt(t); if (!r && !n) return !0; if (r && !n || !r && n) return !1; if (r = r, n = n, n.length !== r.length) return !1; for (let e = 0; e < n.length; e++) { var i = n[e], a = r[e]; if (i.filename !== a.filename || i.lineno !== a.lineno || i.colno !== a.colno || i.function !== a.function) return !1 } return !0 } function Dt(e, t) { let r = e.fingerprint, n = t.fingerprint; if (!r && !n) return !0; if (r && !n || !r && n) return !1; r = r, n = n; try { return !(r.join("") !== n.join("")) } catch (e) { return !1 } } function Lt(e) { return e.exception && e.exception.values && e.exception.values[0] } function xt(e) { var t = e.exception; if (t) try { return t.values[0].stacktrace.frames } catch (e) { return } } wt.__initStatic(); let Ut = {}; var Mt = (0, _.R)(); Mt.Sentry && Mt.Sentry.Integrations && (Ut = Mt.Sentry.Integrations); var kt = { ...Ut, ...e, ...t }, Ht = "?"; function Bt(e, t, r, n) { var i = { filename: e, function: t, in_app: !0 }; return void 0 !== r && (i.lineno = r), void 0 !== n && (i.colno = n), i } var Gt = /^\s*at (?:(.*?) ?\((?:address at )?)?((?:file|https?|blob|chrome-extension|address|native|eval|webpack|<anonymous>|[-a-z]+:|.*bundle|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i, Ft = /\((\S*)(?::(\d+))(?::(\d+))\)/, qt = /^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:file|https?|blob|chrome|webpack|resource|moz-extension|capacitor).*?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i, jt = /(\S+) line (\d+)(?: > eval line \d+)* > eval/i, Vt = /^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i, Yt = function (...e) { var t = e.sort(((e, t) => e[0] - t[0])).map((e => e[1])); return (e, r = 0) => { var n = []; for (var i of e.split("\n").slice(r)) for (var a of t) { var o = a(i); if (o) { n.push(o); break } } return function (e) { if (!e.length) return []; let t = e; var r = t[0].function || "", n = t[t.length - 1].function || ""; return -1 === r.indexOf("captureMessage") && -1 === r.indexOf("captureException") || (t = t.slice(1)), -1 !== n.indexOf("sentryWrapped") && (t = t.slice(0, -1)), t.slice(0, 50).map((e => ({ ...e, filename: e.filename || t[0].filename, function: e.function || "?" }))).reverse() }(n) } }([30, e => { var t = Gt.exec(e); if (t) { if (t[2] && 0 === t[2].indexOf("eval")) { var r = Ft.exec(t[2]); r && (t[2] = r[1], t[3] = r[2], t[4] = r[3]) } const [e, n] = zt(t[1] || Ht, t[2]); return Bt(n, e, t[3] ? +t[3] : void 0, t[4] ? +t[4] : void 0) } }], [50, e => { var t = qt.exec(e); if (t) { if (t[3] && t[3].indexOf(" > eval") > -1) { var r = jt.exec(t[3]); r && (t[1] = t[1] || "eval", t[3] = r[1], t[4] = r[2], t[5] = "") } let e = t[3], n = t[1] || Ht; return [n, e] = zt(n, e), Bt(e, n, t[4] ? +t[4] : void 0, t[5] ? +t[5] : void 0) } }], [40, e => { var t = Vt.exec(e); return t ? Bt(t[2], t[1] || Ht, +t[3], t[4] ? +t[4] : void 0) : void 0 }]), zt = (e, t) => { var r = -1 !== e.indexOf("safari-extension"), n = -1 !== e.indexOf("safari-web-extension"); return r || n ? [-1 !== e.indexOf("@") ? e.split("@")[0] : Ht, r ? `safari-extension:${t}` : `safari-web-extension:${t}`] : [e, t] }; class Kt extends Error { constructor(e) { super(e), this.message = e, this.name = new.target.prototype.constructor.name, Object.setPrototypeOf(this, new.target.prototype) } } function Wt(e, t = []) { return [e, t] } function $t(e, t) { const [r, n] = e; return [r, [...n, t]] } function Qt(e, t) { e[1].forEach((e => { var r = e[0].type; t(e, r) })) } function Zt(e, t) { return (t || new TextEncoder).encode(e) } function Jt(e, t) { const [r, n] = e; let i = JSON.stringify(r); function a(e) { "string" == typeof i ? i = "string" == typeof e ? i + e : [Zt(i, t), e] : i.push("string" == typeof e ? Zt(e, t) : e) } for (var o of n) { const [e, t] = o; a(`\n${JSON.stringify(e)}\n`), a("string" == typeof t || t instanceof Uint8Array ? t : JSON.stringify(t)) } return "string" == typeof i ? i : function (e) { var t = e.reduce(((e, t) => e + t.length), 0), r = new Uint8Array(t); let n = 0; for (var i of e) r.set(i, n), n += i.length; return r }(i) } function Xt(e, t) { var r = "string" == typeof e.data ? Zt(e.data, t) : e.data; return [Y({ type: "attachment", length: r.length, filename: e.filename, content_type: e.contentType, attachment_type: e.attachmentType }), r] } var er = { session: "session", sessions: "session", attachment: "attachment", transaction: "transaction", event: "error", client_report: "internal", user_report: "default" }; function tr(e) { return er[e] } function rr(e, t, r = function (e) { var t = []; function r(e) { return t.splice(t.indexOf(e), 1)[0] } return { $: t, add: function (n) { if (!(void 0 === e || t.length < e)) return fe(new Kt("Not adding Promise due to buffer limit reached.")); var i = n(); return -1 === t.indexOf(i) && t.push(i), i.then((() => r(i))).then(null, (() => r(i).then(null, (() => { })))), i }, drain: function (e) { return new ge(((r, n) => { let i = t.length; if (!i) return r(!0); var a = setTimeout((() => { e && e > 0 && r(!1) }), e); t.forEach((e => { he(e).then((() => { --i || (clearTimeout(a), r(!0)) }), n) })) })) } } }(e.bufferSize || 30)) { let n = {}; return { send: function (i) { var a = []; if (Qt(i, ((t, r) => { var i = tr(r); !function (e, t, r = Date.now()) { return function (e, t) { return e[t] || e.all || 0 }(e, t) > r }(n, i) ? a.push(t) : e.recordDroppedEvent("ratelimit_backoff", i) })), 0 === a.length) return he(); var o = Wt(i[0], a), s = t => { Qt(o, ((r, n) => { e.recordDroppedEvent(t, tr(n)) })) }; return r.add((() => t({ body: Jt(o, e.textEncoder) }).then((e => { void 0 !== e.statusCode && (e.statusCode < 200 || e.statusCode >= 300) && ("undefined" == typeof __SENTRY_DEBUG__ || __SENTRY_DEBUG__) && X.warn(`Sentry responded with status code ${e.statusCode} to sent event.`), n = function (e, { statusCode: t, headers: r }, n = Date.now()) { var i = { ...e }, a = r && r["x-sentry-rate-limits"], o = r && r["retry-after"]; if (a) for (var s of a.trim().split(",")) { const [e, t] = s.split(":", 2); var c = parseInt(e, 10), u = 1e3 * (isNaN(c) ? 60 : c); if (t) for (var l of t.split(";")) i[l] = n + u; else i.all = n + u } else o ? i.all = n + function (e, t = Date.now()) { var r = parseInt(`${e}`, 10); if (!isNaN(r)) return 1e3 * r; var n = Date.parse(`${e}`); return isNaN(n) ? 6e4 : n - t }(o, n) : 429 === t && (i.all = n + 6e4); return i }(n, e) }), (e => { ("undefined" == typeof __SENTRY_DEBUG__ || __SENTRY_DEBUG__) && X.error("Failed while sending event:", e), s("network_error") })))).then((e => e), (e => { if (e instanceof Kt) return ("undefined" == typeof __SENTRY_DEBUG__ || __SENTRY_DEBUG__) && X.error("Skipped sending event due to full buffer"), s("queue_overflow"), he(); throw e })) }, flush: e => r.drain(e) } } var nr = (0, _.R)(); let ir; function ar() { if (ir) return ir; if (be(nr.fetch)) return ir = nr.fetch.bind(nr); var e = nr.document; let t = nr.fetch; if (e && "function" == typeof e.createElement) try { var r = e.createElement("iframe"); r.hidden = !0, e.head.appendChild(r); var n = r.contentWindow; n && n.fetch && (t = n.fetch), e.head.removeChild(r) } catch (e) { ("undefined" == typeof __SENTRY_DEBUG__ || __SENTRY_DEBUG__) && X.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ", e) } return ir = t.bind(nr) } function or(e, t = ar()) { return rr(e, (function (r) { var n = { body: r.body, method: "POST", referrerPolicy: "origin", headers: e.headers, ...e.fetchOptions }; return t(e.url, n).then((e => ({ statusCode: e.status, headers: { "x-sentry-rate-limits": e.headers.get("X-Sentry-Rate-Limits"), "retry-after": e.headers.get("Retry-After") } }))) })) } var sr = /^(?:(\w+):)\/\/(?:(\w+)(?::(\w+))?@)([\w.-]+)(?::(\d+))?\/(.+)/; function cr(e, t = !1) { const { host: r, path: n, pass: i, port: a, projectId: o, protocol: s, publicKey: c } = e; return `${s}://${c}${t && i ? `:${i}` : ""}@${r}${a ? `:${a}` : ""}/${n ? `${n}/` : n}${o}` } function ur(e) { return { protocol: e.protocol, publicKey: e.publicKey || "", pass: e.pass || "", host: e.host, port: e.port || "", path: e.path || "", projectId: e.projectId } } function lr(e, t = {}) { var r = "string" == typeof t ? t : t.tunnel, n = "string" != typeof t && t._metadata ? t._metadata.sdk : void 0; return r || `${function (e) { return `${function (e) { var t = e.protocol ? `${e.protocol}:` : "", r = e.port ? `:${e.port}` : ""; return `${t}//${e.host}${r}${e.path ? `/${e.path}` : ""}/api/` }(e)}${e.projectId}/envelope/` }(e)}?${function (e, t) { return r = { sentry_key: e.publicKey, sentry_version: "7", ...t && { sentry_client: `${t.name}/${t.version}` } }, Object.keys(r).map((e => `${encodeURIComponent(e)}=${encodeURIComponent(r[e])}`)).join("&"); var r }(e, n)}` } function dr(e) { if (!e || !e.sdk) return; const { name: t, version: r } = e.sdk; return { name: t, version: r } } var pr = [], hr = "Not capturing exception because it's already been captured."; class fr { __init() { this._integrations = {} } __init2() { this._integrationsInitialized = !1 } __init3() { this._numProcessing = 0 } __init4() { this._outcomes = {} } constructor(e) { if (fr.prototype.__init.call(this), fr.prototype.__init2.call(this), fr.prototype.__init3.call(this), fr.prototype.__init4.call(this), this._options = e, e.dsn) { this._dsn = (r = e.dsn, function (e) { if ("undefined" != typeof __SENTRY_DEBUG__ && !__SENTRY_DEBUG__) return; const { port: t, projectId: r, protocol: n } = e; if (["protocol", "publicKey", "host", "projectId"].forEach((t => { if (!e[t]) throw new Kt(`Invalid Sentry Dsn: ${t} missing`) })), !r.match(/^\d+$/)) throw new Kt(`Invalid Sentry Dsn: Invalid projectId ${r}`); if (!function (e) { return "http" === e || "https" === e }(n)) throw new Kt(`Invalid Sentry Dsn: Invalid protocol ${n}`); if (t && isNaN(parseInt(t, 10))) throw new Kt(`Invalid Sentry Dsn: Invalid port ${t}`) }(n = "string" == typeof r ? function (e) { var t = sr.exec(e); if (!t) throw new Kt(`Invalid Sentry Dsn: ${e}`); const [r, n, i = "", a, o = "", s] = t.slice(1); let c = "", u = s; var l = u.split("/"); if (l.length > 1 && (c = l.slice(0, -1).join("/"), u = l.pop()), u) { var d = u.match(/^\d+/); d && (u = d[0]) } return ur({ host: a, pass: i, path: c, projectId: u, port: o, protocol: r, publicKey: n }) }(r) : ur(r)), n); var t = lr(this._dsn, e); this._transport = e.transport({ recordDroppedEvent: this.recordDroppedEvent.bind(this), ...e.transportOptions, url: t }) } else ("undefined" == typeof __SENTRY_DEBUG__ || __SENTRY_DEBUG__) && X.warn("No DSN provided, client will not do anything."); var r, n } captureException(e, t, r) { if (oe(e)) return void (("undefined" == typeof __SENTRY_DEBUG__ || __SENTRY_DEBUG__) && X.log(hr)); let n = t && t.event_id; return this._process(this.eventFromException(e, t).then((e => this._captureEvent(e, t, r))).then((e => { n = e }))), n } captureMessage(e, t, r, n) { let i = r && r.event_id; var a = P(e) ? this.eventFromMessage(String(e), t, r) : this.eventFromException(e, r); return this._process(a.then((e => this._captureEvent(e, r, n))).then((e => { i = e }))), i } captureEvent(e, t, r) { if (t && t.originalException && oe(t.originalException)) return void (("undefined" == typeof __SENTRY_DEBUG__ || __SENTRY_DEBUG__) && X.log(hr)); let n = t && t.event_id; return this._process(this._captureEvent(e, t, r).then((e => { n = e }))), n } captureSession(e) { this._isEnabled() ? "string" != typeof e.release ? ("undefined" == typeof __SENTRY_DEBUG__ || __SENTRY_DEBUG__) && X.warn("Discarded session because of missing or non-string release") : (this.sendSession(e), me(e, { init: !1 })) : ("undefined" == typeof __SENTRY_DEBUG__ || __SENTRY_DEBUG__) && X.warn("SDK not enabled, will not capture session.") } getDsn() { return this._dsn } getOptions() { return this._options } getTransport() { return this._transport } flush(e) { var t = this._transport; return t ? this._isClientDoneProcessing(e).then((r => t.flush(e).then((e => r && e)))) : he(!0) } close(e) { return this.flush(e).then((e => (this.getOptions().enabled = !1, e))) } setupIntegrations() { var e, t; this._isEnabled() && !this._integrationsInitialized && (this._integrations = (e = this._options.integrations, t = {}, e.forEach((e => { t[e.name] = e, -1 === pr.indexOf(e.name) && (e.setupOnce(ye, Ce), pr.push(e.name), ("undefined" == typeof __SENTRY_DEBUG__ || __SENTRY_DEBUG__) && X.log(`Integration installed: ${e.name}`)) })), t), this._integrationsInitialized = !0) } getIntegrationById(e) { return this._integrations[e] } getIntegration(e) { try { return this._integrations[e.id] || null } catch (t) { return ("undefined" == typeof __SENTRY_DEBUG__ || __SENTRY_DEBUG__) && X.warn(`Cannot retrieve integration ${e.id} from the current Client`), null } } sendEvent(e, t = {}) { if (this._dsn) { let n = function (e, t, r, n) { var i = dr(r), a = e.type || "event"; const { transactionSampling: o } = e.sdkProcessingMetadata || {}, { method: s, rate: c } = o || {}; !function (e, t) { t && (e.sdk = e.sdk || {}, e.sdk.name = e.sdk.name || t.name, e.sdk.version = e.sdk.version || t.version, e.sdk.integrations = [...e.sdk.integrations || [], ...t.integrations || []], e.sdk.packages = [...e.sdk.packages || [], ...t.packages || []]) }(e, r && r.sdk); var u = function (e, t, r, n) { var i = e.sdkProcessingMetadata && e.sdkProcessingMetadata.baggage, a = i && function (e) { return e[0] }(i); return { event_id: e.event_id, sent_at: (new Date).toISOString(), ...t && { sdk: t }, ...!!r && { dsn: cr(n) }, ..."transaction" === e.type && a && { trace: Y({ ...a }) } } }(e, i, n, t); return delete e.sdkProcessingMetadata, Wt(u, [[{ type: a, sample_rates: [{ id: s, rate: c }] }, e]]) }(e, this._dsn, this._options._metadata, this._options.tunnel); for (var r of t.attachments || []) n = $t(n, Xt(r, this._options.transportOptions && this._options.transportOptions.textEncoder)); this._sendEnvelope(n) } } sendSession(e) { if (this._dsn) { var t = function (e, t, r, n) { var i = dr(r); return Wt({ sent_at: (new Date).toISOString(), ...i && { sdk: i }, ...!!n && { dsn: cr(t) } }, ["aggregates" in e ? [{ type: "sessions" }, e] : [{ type: "session" }, e]]) }(e, this._dsn, this._options._metadata, this._options.tunnel); this._sendEnvelope(t) } } recordDroppedEvent(e, t) { if (this._options.sendClientReports) { var r = `${e}:${t}`; ("undefined" == typeof __SENTRY_DEBUG__ || __SENTRY_DEBUG__) && X.log(`Adding outcome: "${r}"`), this._outcomes[r] = this._outcomes[r] + 1 || 1 } } _updateSessionFromEvent(e, t) { let r = !1, n = !1; var i = t.exception && t.exception.values; if (i) for (var a of (n = !0, i)) { var o = a.mechanism; if (o && !1 === o.handled) { r = !0; break } } var s = "ok" === e.status; (s && 0 === e.errors || s && r) && (me(e, { ...r && { status: "crashed" }, errors: e.errors || Number(n || r) }), this.captureSession(e)) } _isClientDoneProcessing(e) { return new ge((t => { let r = 0; var n = setInterval((() => { 0 == this._numProcessing ? (clearInterval(n), t(!0)) : (r += 1, e && r >= e && (clearInterval(n), t(!1))) }), 1) })) } _isEnabled() { return !1 !== this.getOptions().enabled && void 0 !== this._dsn } _prepareEvent(e, t, r) { const { normalizeDepth: n = 3, normalizeMaxBreadth: i = 1e3 } = this.getOptions(); var a = { ...e, event_id: e.event_id || t.event_id || ee(), timestamp: e.timestamp || (0, de.yW)() }; this._applyClientOptions(a), this._applyIntegrationsMetadata(a); let o = r; t.captureContext && (o = ve.clone(o).update(t.captureContext)); let s = he(a); if (o) { var c = [...t.attachments || [], ...o.getAttachments()]; c.length && (t.attachments = c), s = o.applyToEvent(a, t) } return s.then((e => "number" == typeof n && n > 0 ? this._normalizeEvent(e, n, i) : e)) } _normalizeEvent(e, t, r) { if (!e) return null; var n = { ...e, ...e.breadcrumbs && { breadcrumbs: e.breadcrumbs.map((e => ({ ...e, ...e.data && { data: Ye(e.data, t, r) } }))) }, ...e.user && { user: Ye(e.user, t, r) }, ...e.contexts && { contexts: Ye(e.contexts, t, r) }, ...e.extra && { extra: Ye(e.extra, t, r) } }; return e.contexts && e.contexts.trace && n.contexts && (n.contexts.trace = e.contexts.trace, e.contexts.trace.data && (n.contexts.trace.data = Ye(e.contexts.trace.data, t, r))), e.spans && (n.spans = e.spans.map((e => (e.data && (e.data = Ye(e.data, t, r)), e)))), n } _applyClientOptions(e) { var t = this.getOptions(); const { environment: r, release: n, dist: i, maxValueLength: a = 250 } = t; "environment" in e || (e.environment = "environment" in t ? r : "production"), void 0 === e.release && void 0 !== n && (e.release = n), void 0 === e.dist && void 0 !== i && (e.dist = i), e.message && (e.message = x(e.message, a)); var o = e.exception && e.exception.values && e.exception.values[0]; o && o.value && (o.value = x(o.value, a)); var s = e.request; s && s.url && (s.url = x(s.url, a)) } _applyIntegrationsMetadata(e) { var t = Object.keys(this._integrations); t.length > 0 && (e.sdk = e.sdk || {}, e.sdk.integrations = [...e.sdk.integrations || [], ...t]) } _captureEvent(e, t = {}, r) { return this._processEvent(e, t, r).then((e => e.event_id), (e => { ("undefined" == typeof __SENTRY_DEBUG__ || __SENTRY_DEBUG__) && X.warn(e) })) } _processEvent(e, t, r) { const { beforeSend: n, sampleRate: i } = this.getOptions(); if (!this._isEnabled()) return fe(new Kt("SDK not enabled, will not capture event.")); var a = "transaction" === e.type; return !a && "number" == typeof i && Math.random() > i ? (this.recordDroppedEvent("sample_rate", "error"), fe(new Kt(`Discarding event because it's not included in the random sample (sampling rate = ${i})`))) : this._prepareEvent(e, t, r).then((r => { if (null === r) throw this.recordDroppedEvent("event_processor", e.type || "error"), new Kt("An event processor returned null, will not send event."); return t.data && !0 === t.data.__sentry__ || a || !n ? r : function (e) { var t = "`beforeSend` method has to return `null` or a valid event."; if (w(e)) return e.then((e => { if (!R(e) && null !== e) throw new Kt(t); return e }), (e => { throw new Kt(`beforeSend rejected with ${e}`) })); if (!R(e) && null !== e) throw new Kt(t); return e }(n(r, t)) })).then((n => { if (null === n) throw this.recordDroppedEvent("before_send", e.type || "error"), new Kt("`beforeSend` returned `null`, will not send event."); var i = r && r.getSession(); return !a && i && this._updateSessionFromEvent(i, n), this.sendEvent(n, t), n })).then(null, (e => { if (e instanceof Kt) throw e; throw this.captureException(e, { data: { __sentry__: !0 }, originalException: e }), new Kt(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: ${e}`) })) } _process(e) { this._numProcessing += 1, e.then((e => (this._numProcessing -= 1, e)), (e => (this._numProcessing -= 1, e))) } _sendEnvelope(e) { this._transport && this._dsn ? this._transport.send(e).then(null, (e => { ("undefined" == typeof __SENTRY_DEBUG__ || __SENTRY_DEBUG__) && X.error("Error while sending event:", e) })) : ("undefined" == typeof __SENTRY_DEBUG__ || __SENTRY_DEBUG__) && X.error("Transport disabled") } _clearOutcomes() { var e = this._outcomes; return this._outcomes = {}, Object.keys(e).map((t => { const [r, n] = t.split(":"); return { reason: r, category: n, quantity: e[t] } })) } } var gr = "7.7.0", mr = (0, _.R)(); class vr extends fr { constructor(e) { e._metadata = e._metadata || {}, e._metadata.sdk = e._metadata.sdk || { name: "sentry.javascript.browser", packages: [{ name: "npm:@sentry/browser", version: gr }], version: gr }, super(e), e.sendClientReports && mr.document && mr.document.addEventListener("visibilitychange", (() => { "hidden" === mr.document.visibilityState && this._flushOutcomes() })) } eventFromException(e, t) { return function (e, t, r, n) { var i = Xe(e, t, r && r.syntheticException || void 0, n); return ae(i), i.level = "error", r && r.event_id && (i.event_id = r.event_id), he(i) }(this._options.stackParser, e, t, this._options.attachStacktrace) } eventFromMessage(e, t = "info", r) { return function (e, t, r = "info", n, i) { var a = et(e, t, n && n.syntheticException || void 0, i); return a.level = r, n && n.event_id && (a.event_id = n.event_id), he(a) }(this._options.stackParser, e, t, r, this._options.attachStacktrace) } sendEvent(e, t) { var r = this.getIntegrationById(_t); r && r.options && r.options.sentry && Ce().addBreadcrumb({ category: "sentry." + ("transaction" === e.type ? "transaction" : "event"), event_id: e.event_id, level: e.level, message: ne(e) }, { event: e }), super.sendEvent(e, t) } _prepareEvent(e, t, r) { return e.platform = e.platform || "javascript", super._prepareEvent(e, t, r) } _flushOutcomes() { var e = this._clearOutcomes(); if (0 !== e.length) if (this._dsn) { ("undefined" == typeof __SENTRY_DEBUG__ || __SENTRY_DEBUG__) && X.log("Sending outcomes:", e); var t = lr(this._dsn, this._options), r = function (e, t, r) { return Wt(t ? { dsn: t } : {}, [[{ type: "client_report" }, { timestamp: (0, de.yW)(), discarded_events: e }]]) }(e, this._options.tunnel && cr(this._dsn)); try { !function (e, t) { "[object Navigator]" === Object.prototype.toString.call(nr && nr.navigator) && "function" == typeof nr.navigator.sendBeacon ? nr.navigator.sendBeacon.bind(nr.navigator)(e, t) : we() && ar()(e, { body: t, method: "POST", credentials: "omit", keepalive: !0 }).then(null, (e => { ("undefined" == typeof __SENTRY_DEBUG__ || __SENTRY_DEBUG__) && X.error(e) })) }(t, Jt(r)) } catch (e) { ("undefined" == typeof __SENTRY_DEBUG__ || __SENTRY_DEBUG__) && X.error(e) } } else ("undefined" == typeof __SENTRY_DEBUG__ || __SENTRY_DEBUG__) && X.log("No dsn provided, will not send outcomes"); else ("undefined" == typeof __SENTRY_DEBUG__ || __SENTRY_DEBUG__) && X.log("No outcomes to send") } } var Er, yr, _r, Ar, Ir = Object.defineProperty, Sr = Object.defineProperties, Cr = Object.getOwnPropertyDescriptors, Or = Object.getOwnPropertySymbols, Tr = Object.prototype.hasOwnProperty, Pr = Object.prototype.propertyIsEnumerable, Rr = (e, t, r) => t in e ? Ir(e, t, { enumerable: !0, configurable: !0, writable: !0, value: r }) : e[t] = r, Nr = (e, t) => { for (var r in t || (t = {})) Tr.call(t, r) && Rr(e, r, t[r]); if (Or) for (var r of Or(t)) Pr.call(t, r) && Rr(e, r, t[r]); return e }, wr = (e, t) => Sr(e, Cr(t)), br = (e, t, r) => new Promise(((n, i) => { var a = e => { try { s(r.next(e)) } catch (e) { i(e) } }, o = e => { try { s(r.throw(e)) } catch (e) { i(e) } }, s = e => e.done ? n(e.value) : Promise.resolve(e.value).then(a, o); s((r = r.apply(e, t)).next()) })), Dr = class extends Error { constructor(e) { super(e), this.name = "IframeMessengerImplementationError", Object.setPrototypeOf(this, Dr.prototype) } }, Lr = class extends Error { constructor(e) { super(e), this.name = "IframeMessengerInternalMessageError", Object.setPrototypeOf(this, Lr.prototype) } }, xr = class extends Error { constructor(e, t, r) { if (r) { let n = document.getElementById(r); super(`Messenger has not received an acknowledgement of message ${e} with id ${t} from iframe id=${r} which ${void 0 !== (null == n ? void 0 : n.src) ? "exists" : "does not exist"}`) } else super(`Messenger has not received an acknowledgement of message ${e} with id ${t}, no iframeID was set`); this.type = e, this.id = t, this.iframeID = r, this.name = "IframeMessengerTimeoutError", Object.setPrototypeOf(this, xr.prototype) } }, Ur = "channel:connected", Mr = "channel:connecting", kr = "channel:close", Hr = "channel:error"; (yr = Er || (Er = {})).ACK = "ack", yr.OK = "ok", yr.ERROR = "error", (Ar = _r || (_r = {}))[Ar.BAD_REQUEST = 400] = "BAD_REQUEST", Ar[Ar.OK = 200] = "OK", Ar[Ar.CREATED = 201] = "CREATED", Ar[Ar.NO_CONTENT = 204] = "NO_CONTENT", Ar[Ar.NOT_FOUND = 404] = "NOT_FOUND", Ar[Ar.INTERNAL_SERVER_ERROR = 500] = "INTERNAL_SERVER_ERROR", Ar[Ar.SERVICE_UNAVAILABLE = 503] = "SERVICE_UNAVAILABLE", Ar[Ar.TOO_MANY_REQUESTS = 429] = "TOO_MANY_REQUESTS", Ar[Ar.UNAUTHORIZED = 401] = "UNAUTHORIZED"; var Br, Gr, Fr = { get BACKOFF_FACTOR() { return 1.66 }, get REQUEST_DURATION_MAX_MS() { return 6e4 }, get REQUEST_TIMEOUT_MS() { return [1e4, 2e4, 3e4] }, get RETRY_DELAY_MS() { return 200 }, STATUS_CODE: _r }, qr = class extends Error { constructor(e, t) { super(`The listener provided for event type ${e} timed out after ${t} milliseconds. If you've returned a promise, ensure it is resolving`), this.name = "EventListenerTimeoutError", Object.setPrototypeOf(this, qr.prototype) } }, jr = class extends Error { constructor(e, t) { super(`The listener provided for event type ${e} threw an error: ${t}`), this.name = "InvalidEventListenerError", Object.setPrototypeOf(this, jr.prototype) } }, Vr = class extends Error { constructor(e, t, r) { super(`Request timeout exceeded (attempts=${e}; duration=${t}ms; url=${r})`), this.name = "HttpRequestTimeoutError", Object.setPrototypeOf(this, Vr.prototype) } }, Yr = class extends Error { constructor(e, t) { super(`Invalid JSON received (status=${t}; url=${e})`), this.name = "HttpRequestInvalidJsonError", Object.setPrototypeOf(this, Yr.prototype) } }, zr = class extends Error { constructor(e, t, r) { super(`Network error during request (attempts=${e}; duration=${t}ms; url=${r})`), this.name = "HttpRequestNetworkError", Object.setPrototypeOf(this, zr.prototype) } }, Kr = { timeout: function (e, t) { return br(this, arguments, (function* (e, t, r = new Error("Promise timeout exceeded")) { let n = -1, i = new Promise(((e, i) => { n = window.setTimeout((() => { i(r) }), t) })), a = yield Promise.race([i, e()]); return window.clearTimeout(n), a })) } }; (Gr = Br || (Br = {})).GET = "GET", Gr.PATCH = "PATCH", Gr.POST = "POST", Gr.PUT = "PUT"; var Wr = "include", $r = "cors"; function Qr(e, t) { let r = function (e, t) { return Math.floor(e * Math.pow(Fr.BACKOFF_FACTOR, t)) }(Fr.RETRY_DELAY_MS, e - 1), n = Date.now() - t, i = Fr.REQUEST_DURATION_MAX_MS - n, a = Fr.REQUEST_TIMEOUT_MS[e - 1]; return i <= r ? i - a : r } function Zr(e, t) { return { body: e, status: t.status, statusText: t.statusText } } function Jr(e) { let t = new Headers([["Accept", "application/json"], ["Content-Type", "application/json; charset=utf-8"]]); for (let r in e) e[r] && t.set(r, e[r]); return t } function Xr(e, t) { return br(this, null, (function* () { let r = {}; if (!(e.status < Fr.STATUS_CODE.INTERNAL_SERVER_ERROR)) return Zr(r, e); try { return e.status !== Fr.STATUS_CODE.NO_CONTENT && (r = yield e.json()), Zr(r, e) } catch (r) { throw new Yr(t, e.status) } })) } function en(e, t, r) { return br(this, arguments, (function* (e, t, r, n = 1, i = Date.now()) { var a; let o = null == (a = r.retryOnTimeout) || a, s = Date.now() - i, c = Fr.REQUEST_DURATION_MAX_MS - s, u = Math.min(r.timeout || Fr.REQUEST_TIMEOUT_MS[n - 1], c), l = null; void 0 !== window.AbortController && null !== window.AbortController && (l = new window.AbortController); let d = wr(Nr({}, t), { signal: l ? l.signal : null }); try { let t = yield Kr.timeout(window.fetch.bind(null, e, d), u, new Vr(n, s, e)); return yield Xr(t, e) } catch (a) { let c = 0; if (a instanceof Vr) l && l.abort(); else { if (a instanceof Yr) throw a; if (c = Qr(n, i), !o || c <= 0) throw new zr(n, s, e) } if (!o || n === Fr.REQUEST_TIMEOUT_MS.length) throw a; return new Promise((a => { setTimeout((() => { a(en(e, t, r, n + 1, i)) }), c) })) } })) } function tn(e, t, r) { var n, i, a; let o = Jr(null != (n = t.headers) ? n : {}); return en(e, { body: JSON.stringify(t.body), headers: o, method: r, credentials: null != (i = t.credentials) ? i : Wr, mode: null != (a = t.mode) ? a : $r }, t) } var rn, nn, an, on, sn, cn, un, ln, dn, pn, hn, fn, gn, mn, vn, En, yn, _n, An, In, Sn, Cn, On, Tn, Pn, Rn = function (e, t) { return tn(e, t, Br.POST) }; r(1874), r(6977), r(7852), r(4603), r(4723), r(6755), r(5306), function (e) { e.API_ERROR = "API_ERROR", e.AUTHENTICATION_ERROR = "AUTHENTICATION_ERROR", e.INVALID_REQUEST_ERROR = "INVALID_REQUEST_ERROR", e.RATE_LIMIT_ERROR = "RATE_LIMIT_ERROR", e.PAYMENT_METHOD_ERROR = "PAYMENT_METHOD_ERROR", e.REFUND_ERROR = "REFUND_ERROR" }(rn || (rn = {})); class Nn extends Error { constructor() { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : "Unknown Error", t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : [], r = e; t.length > 0 && (r = function (e, t) { return "".concat(e, "\n  ").concat(t.map((e => { switch (!0) { case "message" in e: return e.message; case "detail" in e: return e.detail; default: return "[Unspecified Error]" } })).join("\n  ")) }(e, t)), super(r), this.errors = t, this.name = "SqError", Object.setPrototypeOf(this, Nn.prototype) } fromSerializedError(e) { this.name = e.name, this.message = e.message, e.errors && (this.errors = e.errors) } } class wn extends Nn { constructor() { super("Web Payments SDK is not enabled for this application"), this.name = "WebSdkDisabledError", Object.setPrototypeOf(this, wn.prototype) } } class bn extends Nn { constructor() { super("The Payment 'applicationId' option is not in the correct format."), this.name = "InvalidApplicationIdError", Object.setPrototypeOf(this, bn.prototype) } } class Dn extends Nn { constructor(e, t) { super("Web Payments SDK was initialized with an application ID created in ".concat(e, " however you are currently using ").concat(t, ".")), this.name = "ApplicationIdEnvironmentMismatchError ", Object.setPrototypeOf(this, Dn.prototype) } } class Ln extends Nn { constructor() { super("You cannot call `tokenize` when using an `onTokenize` callback"), this.name = "AfterpayOnTokenizeListenerError", Object.setPrototypeOf(this, Ln.prototype) } } class xn extends Nn { constructor(e, t) { super("This instance of ".concat(e, " is missing the ").concat(t, " listener.")), this.name = "PaymentMethodMissingListener", Object.setPrototypeOf(this, xn.prototype) } } class Un extends Nn { constructor() { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : []; super("The payment request used for Afterpay/Clearpay caused a failure", e), this.errors = e, this.name = "AfterpayRequestError", Object.setPrototypeOf(this, Un.prototype) } } class Mn extends Nn { constructor() { super("The amount is outside of the merchant's Afterpay payment limits."), this.name = "AfterpayAmountOutsideLimitsError", Object.setPrototypeOf(this, Mn.prototype) } } class kn extends Nn { constructor() { super("The currency provided is not supported for use with Afterpay/Clearpay"), this.name = "AfterpayUnsupportedCurrencyError", Object.setPrototypeOf(this, kn.prototype) } } class Hn extends Nn { constructor() { super("Afterpay/Clearpay is not enabled for this merchant."), this.name = "AfterpayMerchantError", Object.setPrototypeOf(this, Hn.prototype) } } class Bn extends Nn { constructor(e) { super(e), this.name = "AfterpayInvalidPaymentRequestError", Object.setPrototypeOf(this, Bn.prototype) } } class Gn extends Nn { constructor(e) { var t = e instanceof HTMLElement ? e.nodeName : e; super("The element ".concat(t, " was not found")), this.name = "ElementNotFoundError", Object.setPrototypeOf(this, Gn.prototype) } } class Fn extends Nn { constructor() { var e = (arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : []).map((e => { var [t, r] = e; return 'expected property: "'.concat(t, '" of type "').concat(r, '"') })).join("\n"); super("Please ensure you call payments.paymentRequest (https://developer.squareup.com/reference/sdks/web/payments#Payments.paymentRequest) with the appropriate options.\n".concat(e)), this.name = "InvalidPaymentRequestError", Object.setPrototypeOf(this, Fn.prototype) } } class qn extends Nn { constructor() { var e = (arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : []).map((e => { var [t, r] = e; return 'expected property: "'.concat(t, '" of type "').concat(r, '"') })).join("\n"); super("\n".concat(e)), this.name = "InvalidPaymentRequestUpdateError", Object.setPrototypeOf(this, qn.prototype) } } class jn extends Nn { constructor(e, t) { super("The callback provided to the event listener ".concat(e, " threw an error with message: ").concat(t)), this.name = "InvalidEventListenerCallbackError", Object.setPrototypeOf(this, jn.prototype) } } class Vn extends Nn { constructor(e) { super("option: '".concat(e, "'")), this.name = "InvalidOptionError", Object.setPrototypeOf(this, Vn.prototype) } } class Yn extends Nn { constructor() { super("Tokenization has failed. `accountHolderName` is a required option when calling ach.tokenize()"), this.name = "PlaidMissingNameError", Object.setPrototypeOf(this, Yn.prototype) } } class zn extends Nn { constructor() { super("Something went wrong and Plaid was not properly initialized"), this.name = "PlaidUninitializedError", Object.setPrototypeOf(this, zn.prototype) } } class Kn extends Nn { constructor(e) { super("An issue occurred while verifying the buyer", [e]), this.name = "VerifyBuyerError", Object.setPrototypeOf(this, Kn.prototype) } } r(6833), (Tn = nn || (nn = {})).FOCUS_CLASS_ADDED = "focusClassAdded", Tn.FOCUS_CLASS_REMOVED = "focusClassRemoved", Tn.ERROR_CLASS_ADDED = "errorClassAdded", Tn.ERROR_CLASS_REMOVED = "errorClassRemoved", Tn.CARD_BRAND_CHANGED = "cardBrandChanged", Tn.POSTAL_CODE_CHANGED = "postalCodeChanged", Tn.ESCAPE = "escape", Tn.SUBMIT = "submit", (On = an || (an = {})).CARD_NUMBER = "cardNumber", On.CVV = "cvv", On.EXPIRATION_DATE = "expirationDate", On.POSTAL_CODE = "postalCode", (Cn = on || (on = {})).CARD_INPUT = "input", Cn.CARD_INPUT_FOCUS = "input.is-focus", Cn.CARD_INPUT_PLACEHOLDER = "input::placeholder", Cn.CARD_INPUT_FOCUS_PLACEHOLDER = "input.is-focus::placeholder", Cn.CARD_INPUT_ERROR = "input.is-error", Cn.CARD_INPUT_ERROR_PLACEHOLDER = "input.is-error::placeholder", Cn.CARD_COMPONENT = ".input-container", Cn.CARD_COMPONENT_FOCUS = ".input-container.is-focus", Cn.CARD_COMPONENT_ERROR = ".input-container.is-error", Cn.CARD_INPUT_HELPER_TEXT = ".message-text", Cn.CARD_INPUT_HELPER_ICON = ".message-icon", Cn.CARD_INPUT_ERROR_TEXT = ".message-text.is-error", Cn.CARD_INPUT_ERROR_ICON = ".message-icon.is-error", (sn || (sn = {})).GIFT_CARD_NUMBER = "giftCardNumber", (Sn = cn || (cn = {})).FOCUS_CLASS_ADDED = "focusClassAdded", Sn.FOCUS_CLASS_REMOVED = "focusClassRemoved", Sn.ERROR_CLASS_ADDED = "errorClassAdded", Sn.ERROR_CLASS_REMOVED = "errorClassRemoved", Sn.CARD_BRAND_CHANGED = "cardBrandChanged", Sn.ESCAPE = "escape", Sn.SUBMIT = "submit", function (e) { e.UNKNOWN = "Unknown" }(un || (un = {})), function (e) { e.GIFT = "Gift" }(ln || (ln = {})); class Wn extends Nn { constructor(e) { super("".concat(e, " is not a valid field name. Valid field names are ").concat([...Object.values(an), ...Object.values(sn)].join(", "))), this.name = "InvalidFieldNameError", Object.setPrototypeOf(this, Wn.prototype) } } class $n extends Nn { constructor(e) { super("Configuration property '".concat(e, "' is invalid")), this.name = "InvalidConfigurationPropertyError", Object.setPrototypeOf(this, $n.prototype) } } class Qn extends Nn { constructor(e, t, r) { super("Configuration property '".concat(e, "' has an invalid value '").concat(t, "'.").concat(r ? " ".concat(r, ".") : "")), this.name = "InvalidConfigurationValueError", Object.setPrototypeOf(this, Qn.prototype) } } class Zn extends Nn { constructor(e, t) { super("amount '".concat(e, "' in ").concat(t, " is not expressed in a valid format")), this.name = "InvalidCurrencyFormatError", Object.setPrototypeOf(this, Zn.prototype) } } class Jn extends Nn { constructor() { super("Web Payments SDK does not support this browser"), this.name = "BrowserNotSupportedError", Object.setPrototypeOf(this, Jn.prototype) } } class Xn extends Nn { constructor() { super("Web Payments SDK can only be embedded on sites that use HTTPS"), this.name = "WebSdkEmbedError", Object.setPrototypeOf(this, Xn.prototype) } } class ei extends Nn { constructor(e) { super("This instance of ".concat(e, " has already been attached to the page.")), this.name = "PaymentMethodAlreadyAttachedError", Object.setPrototypeOf(this, ei.prototype) } } class ti extends Nn { constructor(e) { super("".concat(e, " has not been attached to the page. It must be attached before you can call this method.")), this.name = "PaymentMethodNotAttachedError", Object.setPrototypeOf(this, ti.prototype) } } class ri extends Nn { constructor(e) { super("This instance of ".concat(e, " has already been destroyed.")), this.name = "PaymentMethodAlreadyDestroyedError", Object.setPrototypeOf(this, ri.prototype) } } class ni extends Nn { constructor(e, t) { var r = e instanceof HTMLElement ? e.nodeName : e; super("The value ".concat(r, " is not a valid element type or selector. Only valid elements or selectors referring to ").concat([...t].join(", "), " elements are allowed.")), this.name = "InvalidElementTypeError", Object.setPrototypeOf(this, ni.prototype) } } class ii extends Nn { constructor(e, t) { super("An element with one of the following conflicting IDs was found on the page: ".concat(t, ". You must change those elements' ID before you can use ").concat(e)), this.name = "InvalidElementPresentError", Object.setPrototypeOf(this, ii.prototype) } } class ai extends Nn { constructor(e, t) { var r = t || (null == e ? void 0 : e.field); super("Method unsupported: ".concat(null == e ? void 0 : e.message).concat(r ? " (field=".concat(r, ")") : "")), this.name = "PaymentMethodUnsupportedError", Object.setPrototypeOf(this, ai.prototype) } } class oi extends Nn { constructor(e) { super("The ".concat(e, " feature is not enabled for this application.")), this.name = "FeatureDisabledError", Object.setPrototypeOf(this, oi.prototype) } } class si extends Nn { constructor(e, t, r) { super("error loading script ".concat(e, "): ").concat(t, " ").concat(r ? r.message : "")), this.name = "ScriptLoaderError", Object.setPrototypeOf(this, si.prototype) } } class ci extends Nn { constructor(e) { super("Invalid style property '".concat(e, "'.")), this.name = "InvalidInputStylePropertyError", Object.setPrototypeOf(this, ci.prototype) } } class ui extends Nn { constructor(e, t) { super("Invalid style value '".concat(t, "' for property '").concat(e, "'.")), this.name = "InvalidInputStyleValueError", Object.setPrototypeOf(this, ui.prototype) } } class li extends Nn { constructor(e) { super("Invalid style selector '".concat(e, "'.")), this.name = "InvalidInputStyleSelectorError", Object.setPrototypeOf(this, li.prototype) } } class di extends Nn { constructor(e) { super("One or more style selectors and/or CSS properties are invalid", e), this.errors = e, this.name = "InvalidStylesError", Object.setPrototypeOf(this, di.prototype) } } class pi extends Nn { constructor() { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : []; super("Tokenization has failed", e), this.errors = e, this.name = "TokenizationError", Object.setPrototypeOf(this, pi.prototype) } } class hi extends Nn { constructor(e) { var t = "An unexpected error occurred"; e && (t += " while ".concat(e)), super("".concat(t, ".")), this.name = "UnexpectedError", Object.setPrototypeOf(this, hi.prototype) } } (Pn = dn || (dn = {})).APPLE_PAY = "Apple Pay", Pn.AFTERPAY_CLEARPAY = "AfterpayClearpay", Pn.CARD = "Card", Pn.CASH_APP = "Cash App", Pn.GOOGLE_PAY = "Google Pay", Pn.GIFT_CARD = "Gift Card", Pn.ACH = "ACH", Pn.CASH_APP_PAY = "Cash App Pay", function (e) { e.SHIPPING_CONTACT_CHANGED = "shippingcontactchanged", e.SHIPPING_OPTION_CHANGED = "shippingoptionchanged" }(pn || (pn = {})); class fi { constructor(e, t) { this.type = e, this.detail = t, this.type = e, this.detail = t } } !function (e) { e.UNKNOWN = "Unknown", e.OK = "OK", e.ERROR = "Error", e.INVALID = "Invalid", e.ABORT = "Abort", e.CANCEL = "Cancel" }(hn || (hn = {})), function (e) { e.BLACK = "black", e.GREEN = "mint", e.MINT = "mint" }(fn || (fn = {})), function (e) { e.CheckoutWithAfterpay = "checkout_with_afterpay", e.BuyNowWithAfterpay = "buy_now_with_afterpay", e.PlaceOrderWithAfterpay = "place_order_with_afterpay" }(gn || (gn = {})), function (e) { e.REVIEW_MY_ORDER = "review_my_order", e.BUY_NOW = "buy_now" }(mn || (mn = {})), function (e) { e.BLACK_ON_MINT = "black-on-mint", e.BLACK_ON_WHITE = "black-on-white", e.MINT_ON_BLACK = "mint-on-black", e.WHITE_ON_BLACK = "white-on-black" }(vn || (vn = {})), function (e) { e.XS = "xs", e.SM = "sm", e.MD = "md", e.LG = "lg" }(En || (En = {})), function (e) { e.CIRCLED_INFO_ICON = "circled-info-icon", e.CIRCLED_QUESTION_ICON = "circled-question-icon", e.LEARN_MORE_TEXT = "learn-more-text", e.MORE_INFO_TEXT = "more-info-text", e.NONE = "none" }(yn || (yn = {})), function (e) { e.MINT = "mint", e.WHITE = "white" }(_n || (_n = {})), function (e) { e.AFTERPAY_SHIPPING_ADDRESS_CHANGED = "afterpay_shippingaddresschanged", e.AFTERPAY_SHIPPING_OPTION_CHANGED = "afterpay_shippingoptionchanged" }(An || (An = {})), function (e) { e.ON_TOKENIZATION = "ontokenization", e.CLOSE_OAUTH = "CLOSE_OAUTH", e.ERROR = "ERROR", e.EXIT = "EXIT", e.FAIL_OAUTH = "FAIL_OAUTH", e.HANDOFF = "HANDOFF", e.MATCHED_SELECT_INSTITUTION = "MATCHED_SELECT_INSTITUTION", e.MATCHED_SELECT_VERIFY_METHOD = "MATCHED_SELECT_VERIFY_METHOD", e.OPEN = "OPEN", e.OPEN_MY_PLAID = "OPEN_MY_PLAID", e.OPEN_OAUTH = "OPEN_OAUTH", e.SEARCH_INSTITUTION = "SEARCH_INSTITUTION", e.SELECT_BRAND = "SELECT_BRAND", e.SELECT_INSTITUTION = "SELECT_INSTITUTION", e.SUBMIT_CREDENTIALS = "SUBMIT_CREDENTIALS", e.SUBMIT_MFA = "SUBMIT_MFA", e.TRANSITION_VIEW = "TRANSITION_VIEW" }(In || (In = {})); var gi, mi, vi, Ei, yi, _i, Ai, Ii, Si, Ci, Oi, Ti, Pi, Ri, Ni = ["borderColor", "borderRadius", "borderWidth"], wi = ["borderColor", "borderWidth"], bi = ["color"], Di = ["color"]; function Li(e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}, r = Object.entries(t).map((e => { var [t, r] = e; return "".concat(encodeURIComponent(t), "=").concat(encodeURIComponent(r)) })).join("&"); return encodeURI(e) + (r.length > 0 ? "?".concat(r) : "") } function xi(e) { return e.hostname.endsWith("localhost") || "https:" === e.protocol } !function (e) { e.UNKNOWN = "OTHER_BRAND", e.AMERICAN_EXPRESS = "AMERICAN_EXPRESS", e.DINERS_CLUB = "DISCOVER_DINERS", e.DISCOVER = "DISCOVER", e.JCB = "JCB", e.MASTERCARD = "MASTERCARD", e.UNION_PAY = "CHINA_UNIONPAY", e.VISA = "VISA" }(gi || (gi = {})), function (e) { e.UNKNOWN_CARD_TYPE = "UNKNOWN_CARD_TYPE", e.CREDIT = "CREDIT", e.DEBIT = "DEBIT" }(mi || (mi = {})), function (e) { e.UNKNOWN_PAYMENT_TYPE = "UNKNOWN_PREPAID_TYPE", e.NOT_PREPAID = "NOT_PREPAID", e.PREPAID = "PREPAID" }(vi || (vi = {})), function (e) { e.DEFAULT = "default", e.BLACK = "black", e.WHITE = "white" }(Ei || (Ei = {})), function (e) { e.STATIC = "static", e.FILL = "fill" }(yi || (yi = {})), function (e) { e.LONG = "long", e.SHORT = "short" }(_i || (_i = {})), function (e) { e.PAYMENT_METHOD_DESTROYED = "PAYMENT_METHOD_DESTROYED", e.SHIPPING_ADDRESS_UNSERVICEABLE = "SHIPPING_ADDRESS_UNSERVICEABLE", e.SHIPPING_ADDRESS_INVALID = "SHIPPING_ADDRESS_INVALID" }(Ai || (Ai = {})), function (e) { e.LIGHT = "light", e.DARK = "dark" }(Ii || (Ii = {})), function (e) { e.SQUARED = "Squared", e.SEMIROUNDED = "Semirounded", e.ROUNDED = "Rounded" }(Si || (Si = {})), function (e) { e.ROUND = "round", e.SEMIROUND = "semiround" }(Ci || (Ci = {})), function (e) { e.MEDIUM = "medium", e.SMALL = "small" }(Oi || (Oi = {})), function (e) { e.DARK = "dark", e.LIGHT = "light" }(Ti || (Ti = {})), function (e) { e.FULL = "full", e.STATIC = "static" }(Pi || (Pi = {})), function (e) { e.GBP = "GBP", e.USD = "USD" }(Ri || (Ri = {})); var Ui = new RegExp(/^[\w.-]+$/i), Mi = new RegExp(/sq0at/i); function ki(e) { return y.env === e } function Hi() { return ki(h.production) } function Bi(e) { if (!function (e) { return !(e.length < 22 || e.length > 37) && Ui.test(e) && !Mi.test(e) }(e)) throw new bn; var t = e.match(/^[\w-]{22}$/), r = e.startsWith("sq0idp-"), n = e.startsWith("sandbox-sq0idb"), i = e.startsWith("sq0ids-"); if (!(t || r || n || i)) throw new bn; if (r && !Hi()) throw new Dn(h.production, y.env); if (n && !ki(h.sandbox)) throw new Dn(h.sandbox, y.env) } var Gi = qi(60), Fi = ji(60); function qi(e) { return 1e3 * e } function ji(e) { return e * Gi } var Vi = { hoursToMs: function (e) { return e * Fi }, minutesToMs: ji, msToSeconds: function (e) { return e / 1e3 }, secondsToMs: qi }, Yi = /^_/g, zi = /(?!^)([A-Z])/g, Ki = /[\s_]+(?=[A-Za-z])/g, Wi = new Set(["BIF", "DJF", "GNF", "JPY", "KMF", "KRW", "PYG", "RWF", "UGX", "UYI", "VND", "VUV", "XAF", "XOF", "XPF"]), $i = new Set(["JOD", "KWD", "LYD", "OMR", "TND"]); function Qi(e) { var t = e.toUpperCase(); return Wi.has(t) ? 0 : $i.has(t) ? 3 : 2 } var Zi, Ji, Xi, ea = { convertLocaleToUnderscore: function (e) { return e.replace(/-/, "_") }, cssProperty: function (e) { return e.replace(Yi, "-").replace(zi, " $1").replace(Ki, "-").toLowerCase() }, delay: function (e) { return new Promise((t => setTimeout(t, e))) }, decimalPlaces: Qi, formatCSSKeyValuePair: function (e, t) { return "".concat(e, ": ").concat(t, ";") }, enumValues: function (e) { return Object.keys(e).map((t => e[t])).filter((function (e) { return "string" == typeof e })) }, isInstanceOf: function (e, t) { return t.some((function (t) { return e instanceof t })) }, isStaging: function () { return ki(h.staging) }, isProduction: Hi, isValidUrl: function (e) { try { return new URL(e), !0 } catch (e) { return !1 } }, requestId: function () { return Date.now() + Number.parseFloat(Math.random().toFixed(8)) }, url: Li, versionedUrl: function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}; return Li(e, t) }, paymentRequestAmountToMoneyAmount: function (e, t) { var r = Qi(t), n = "^(-?[0-9]+)"; r > 0 && (n = "".concat(n, "(?:\\.([0-9]{1,").concat(r, "})[0-9]*)?")), n = "".concat(n, "$"); var i = e.match(n); if (!i) throw new Zn(e, t); var a = i[1]; if (r > 0) { var o = i[2] || ""; a = a + o + "0".repeat(r - o.length) } return Number(a) }, moneyAmountToPaymentRequestAmount: function (e, t) { var r = Qi(t); return (e / Math.pow(10, r)).toFixed(r) }, moneyAmountToInternationalizedCurrency: function (e, t, r) { var n = Qi(t), i = e / Math.pow(10, n); return new Intl.NumberFormat(r, { currency: t, style: "currency" }).format(i) } }, ta = ea; class ra extends Nn { constructor(e, t, r) { if (r) { var n = document.getElementById(r); super("Messenger has not received an acknowledgement of message ".concat(e, " with id ").concat(t, " from iframe id=").concat(r, " which ").concat(void 0 !== (null == n ? void 0 : n.src) ? "exists" : "does not exist")) } else super("Messenger has not received an acknowledgement of message ".concat(e, " with id ").concat(t, ", no iframeID was set")); this.name = "InternalMessengerTimeoutError", Object.setPrototypeOf(this, ra.prototype) } } !function (e) { e.CanUseOverrideStrings = "can_use_override_strings", e.CanUseInterac = "can_use_interac", e.CanUsePaymentsUI = "can_use_payments_ui", e.PaymentsUICanUseCard = "payments_ui_can_use_card", e.PaymentsUICanUseCashApp = "payments_ui_can_use_cash_app", e.PaymentsUICanUseApplePay = "payments_ui_can_use_apple_pay", e.PaymentsUICanUseGooglePay = "payments_ui_can_use_google_pay", e.PaymentsUICanUseAchPlaid = "payments_ui_can_use_ach_plaid", e.PaymentsUICanUseBnplA = "payments_ui_can_use_bnpl_a", e.PaymentsUICanUseGiftCard = "payments_ui_can_use_gift_card", e.CanUseBNPLA = "can_use_bnpl_a", e.CanUsePlaidOAuth = "can_use_plaid_oauth", e.RecordErrorMetrics = "record_error_metrics" }(Zi || (Zi = {})), function (e) { e.Control = "C", e.TreatmentA = "T1" }(Ji || (Ji = {})), function (e) { e.LEGACY_IMPLEMENTATION = "LEGACY_IMPLEMENTATION", e.PREFER_OAUTH_FLOW = "PREFER_OAUTH_FLOW", e.ENFORCE_OAUTH_FLOW = "ENFORCE_OAUTH_FLOW" }(Xi || (Xi = {})); var na, ia, aa = y.SENTRY_DSN; class oa { constructor(e) { var t; t = e.useGlobalHandlers ? new kt.GlobalHandlers : new kt.GlobalHandlers({ onerror: !1, onunhandledrejection: !1 }); var r = [new ce, new W, new kt.TryCatch, new kt.Breadcrumbs, t, new kt.LinkedErrors, new kt.HttpContext], n = { beforeSend: (t, r) => { var n; if (!e.enableErrorLogging) return console.error(t.exception), null !== (n = t.exception) && void 0 !== n && n.values && t.exception.values.forEach((e => { console.error(e) })), null; if (!r) return t; var i = r.originalException; if (void 0 !== this.featureFlagHandler && this.featureFlagHandler.isActive(Zi.RecordErrorMetrics)) { var a = null == i ? void 0 : i.toString(); i instanceof Error && (a = i.stack); var o = "applicationID: ".concat(e.applicationId, ", url: ").concat(e.applicationUrl, ", source: ").concat(e.sourceName, ", error: ").concat(a); Rn(y.METRICS_ERROR_URL, { body: { sdk_version: y.VERSION, error_message: o || "" } }).catch((() => { })) } return t }, dsn: aa, environment: e.environment, integrations: r, release: "web-payments-sdk@".concat(y.VERSION), stackParser: Yt, transport: e.transport || or }, i = new vr(n); this.hub = new Ae(i), this.hub.configureScope((t => { t.setTag("applicationId", e.applicationId), t.setTag("applicationUrl", e.applicationUrl), t.setTag("source", e.sourceName), t.setTag("version", e.version), e.sessionId && t.setTag("sessionId", e.sessionId) })), e.useGlobalHandlers && Se(this.hub) } setFeatureFlagHandler(e) { this.featureFlagHandler = e } setAvt(e) { this.hub.setUser({ id: e }), this.hub.configureScope((t => { t.setTag("avt", e) })) } setSessionId(e) { this.hub.configureScope((t => { t.setTag("sessionId", e) })) } setInstanceId(e) { this.hub.configureScope((t => { t.setTag("instanceId", e) })) } captureException(e, t, r, n) { ta.isInstanceOf(e, [zr, Vr, ra]) || this.hub.withScope((i => { r && i.setTag("sessionId", r), t && i.setTag("instanceId", t), n && Object.entries(n).forEach((e => { var [t, r] = e; i.setTag(t, r) })), this.hub.captureException(e) })) } wrap(e) { if (Object.prototype.hasOwnProperty.call(e, "__inner__")) return e; var t = this.captureException.bind(this); function r(r) { try { for (var n = arguments.length, i = new Array(n > 1 ? n - 1 : 0), a = 1; a < n; a++)i[a - 1] = arguments[a]; return e.apply(r, i) } catch (e) { throw t(e), e } } return r.__inner__ = e, r } } !function (e) { e.INVALID_APPLICATION_ID = "INVALID_APPLICATION_ID", e.INVALID_CARD_NUMBER = "INVALID_CARD_NUMBER", e.INVALID_CVV = "INVALID_CVV", e.INVALID_EXPIRATION_DATE = "INVALID_EXPIRATION_DATE", e.INVALID_POSTAL_CODE = "INVALID_POSTAL_CODE", e.INVALID_SANDBOX_CARD_NUMBER = "INVALID_SANDBOX_CARD_NUMBER", e.INVALID_STAGING_CARD_NUMBER = "INVALID_STAGING_CARD_NUMBER", e.MISSING_APPLICATION_ID = "MISSING_APPLICATION_ID", e.MISSING_CARD_DATA = "MISSING_CARD_DATA", e.UNKNOWN = "UNKNOWN", e.UNSUPPORTED_CARD_BRAND = "UNSUPPORTED_CARD_BRAND" }(na || (na = {})), function (e) { e.UNKNOWN = "UNKNOWN" }(ia || (ia = {})); var sa, ca = { [ia.UNKNOWN]: { message: "An unknown error has occurred", type: "UNKNOWN" } }; !function (e) { e.EXPIRED_PLAID_SESSION = "EXPIRED_PLAID_SESSION", e.INVALID_SELECTED_PLAID_BANK_ACCOUNT_ID = "INVALID_SELECTED_PLAID_BANK_ACCOUNT_ID", e.UNKNOWN = "UNKNOWN" }(sa || (sa = {})); var ua, la, da = { EXPIRED_PLAID_SESSION: { message: "The plaid session was expired. Please try again.", type: "EXPIRED_PLAID_SESSION" }, INVALID_SELECTED_PLAID_BANK_ACCOUNT_ID: { message: "Invalid plaid bank account id selected", type: "INVALID_SELECTED_PLAID_BANK_ACCOUNT_ID" }, UNKNOWN: { message: "An unknown error has occurred", type: "UNKNOWN" } }, pa = { INVALID_APPLICATION_ID: { message: "Invalid applicationId", type: "INVALID_APPLICATION_ID" }, INVALID_CARD_NUMBER: { field: "cardNumber", message: "Credit card number is not valid", type: "VALIDATION_ERROR" }, INVALID_CVV: { field: "cvv", message: "CVV is not valid", type: "VALIDATION_ERROR" }, INVALID_EXPIRATION_DATE: { field: "expirationDate", message: "Expiration date is not valid", type: "VALIDATION_ERROR" }, INVALID_POSTAL_CODE: { field: "postalCode", message: "Postal code is not valid", type: "VALIDATION_ERROR" }, INVALID_SANDBOX_CARD_NUMBER: { field: "cardNumber", message: "Credit card number is not valid for sandbox use. Please use one of the test numbers documented at https://developer.squareup.com/docs/testing/test-values.", type: "VALIDATION_ERROR" }, INVALID_STAGING_CARD_NUMBER: { field: "cardNumber", message: "Card number is not allowed in Staging. See: https://go/panfake-ui", type: "VALIDATION_ERROR" }, MISSING_APPLICATION_ID: { message: "Missing applicationId", type: "MISSING_APPLICATION_ID" }, MISSING_CARD_DATA: { message: "Missing card data", type: "MISSING_CARD_DATA" }, UNKNOWN: { message: "An unknown error has occurred", type: "UNKNOWN" }, UNSUPPORTED_CARD_BRAND: { field: "cardNumber", message: "Card not supported", type: "UNSUPPORTED_CARD_BRAND" } }; !function (e) { e.INVALID_VALUE = "INVALID_VALUE", e.MISSING_LOCATION_ID_OR_NAME = "MISSING_LOCATION_ID_OR_NAME", e.NOT_FOUND = "NOT_FOUND", e.UNKNOWN = "UNKNOWN" }(ua || (ua = {})); class ha extends Nn { constructor() { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : []; super("Internal Validation Error", e), this.errors = e, this.name = "InternalValidationError", Object.setPrototypeOf(this, ha.prototype) } } function fa() { return new pi([pa.UNKNOWN]) } !function (e) { e.INTERNAL_SERVER_ERROR = "INTERNAL_SERVER_ERROR", e.NOT_FOUND = "NOT_FOUND", e.SERVICE_UNAVAILABLE = "SERVICE_UNAVAILABLE", e.TOO_MANY_REQUESTS = "TOO_MANY_REQUESTS", e.UNAUTHORIZED = "UNAUTHORIZED", e.UNKNOWN = "UNKNOWN" }(la || (la = {})); var ga = { message: "An internal error has occurred. Unable to complete the request.", type: "INTERNAL_SERVER_ERROR" }, ma = { message: "The requested resource was not found.", type: "NOT_FOUND" }, va = { message: "The endpoint is currently unavailable.", type: "SERVICE_UNAVAILABLE" }, Ea = { message: "Too many requests in progress.", type: "TOO_MANY_REQUESTS" }, ya = { message: "Request not authorized.", type: "UNAUTHORIZED" }, _a = { message: "An unknown error has occurred", type: "UNKNOWN" }; class Aa extends Nn { constructor(e) { super(e), this.name = "InternalError", Object.setPrototypeOf(this, Aa.prototype) } } class Ia extends Nn { constructor(e, t, r) { var n = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : [], i = function (e) { var { STATUS_CODE: t } = Fr; switch (e) { case t.UNAUTHORIZED: return ya; case t.NOT_FOUND: return ma; case t.TOO_MANY_REQUESTS: return Ea; case t.INTERNAL_SERVER_ERROR: return ga; case t.SERVICE_UNAVAILABLE: return va; default: return _a } }(t); super("".concat(i.message, " (message=").concat(r, "; url=").concat(e, ")"), n), this.name = "InternalHttpError", Object.setPrototypeOf(this, Ia.prototype) } } class Sa extends Nn { constructor(e, t) { super("".concat(e, " (payment_method=").concat(t, ")")), this.name = "InternalPaymentMethodError", Object.setPrototypeOf(this, Sa.prototype) } } class Ca extends Nn { constructor(e, t, r) { super("Request timeout exceeded (attempts=".concat(e, "; duration=").concat(t, "ms; url=").concat(r, ")")), this.name = "InternalTimeoutError", Object.setPrototypeOf(this, Ca.prototype) } } class Oa extends Nn { constructor(e, t) { super("Invalid JSON received (status=".concat(t, "; url=").concat(e, ")")), this.name = "InternalInvalidJsonError", Object.setPrototypeOf(this, Oa.prototype) } } class Ta extends Nn { constructor(e, t, r) { super("Network error during request (attempts=".concat(e, "; duration=").concat(t, "ms; url=").concat(r, ")")), this.name = "InternalNetworkError", Object.setPrototypeOf(this, Ta.prototype) } } function Pa(e, t) { var r = Object.keys(e); if (Object.getOwnPropertySymbols) { var n = Object.getOwnPropertySymbols(e); t && (n = n.filter((function (t) { return Object.getOwnPropertyDescriptor(e, t).enumerable }))), r.push.apply(r, n) } return r } function Ra(e) { for (var t = 1; t < arguments.length; t++) { var r = null != arguments[t] ? arguments[t] : {}; t % 2 ? Pa(Object(r), !0).forEach((function (t) { Na(e, t, r[t]) })) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(r)) : Pa(Object(r)).forEach((function (t) { Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(r, t)) })) } return e } function Na(e, t, r) { return t in e ? Object.defineProperty(e, t, { value: r, enumerable: !0, configurable: !0, writable: !0 }) : e[t] = r, e } var wa = { InternalError: Aa, InternalHttpError: Ia, InternalInvalidJsonError: Oa, InternalMessengerTimeoutError: ra, InternalNetworkError: Ta, InternalPaymentMethodError: Sa, InternalTimeoutError: Ca, InternalValidationError: ha }; function ba(e) { return Object.values(wa).some((t => e instanceof t)) } var Da, La, xa, Ua, Ma, ka, Ha, Ba, Ga, Fa, qa, ja, Va = { AfterpayAmountOutsideLimitsError: Mn, AfterpayMerchantError: Hn, AfterpayRequestError: Un, AfterpayUnsupportedCurrencyError: kn, BrowserNotSupportedError: Jn, ElementNotFoundError: Gn, InvalidCurrencyFormatError: Zn, InvalidElementTypeError: ni, InvalidEventListenerCallbackError: jn, InvalidOptionError: Vn, InvalidPaymentRequestError: Fn, InvalidPaymentRequestUpdateError: qn, PaymentMethodUnsupportedError: ai, PlaidMissingNameError: Yn, PlaidUninitializedError: zn, ScriptLoaderError: si, TokenizationError: pi, UnexpectedError: hi, VerifyBuyerError: Kn, WebSdkEmbedError: Xn }, Ya = Ra(Ra(Ra({}, Va), wa), {}, { AfterpayInvalidPaymentRequestError: Bn, AfterpayOnTokenizeListenerError: Ln, InvalidApplicationIdError: bn, InvalidInputStylePropertyError: ci, InvalidInputStyleValueError: ui, InvalidStylesError: di, PaymentMethodAlreadyAttachedError: ei, PaymentMethodAlreadyDestroyedError: ri, PaymentMethodMissingListener: xn, PaymentMethodNotAttachedError: ti, SqError: Nn, WebSdkDisabledError: wn }); (ja = Da || (Da = {})).AttachStart = "ATTACH:START", ja.AttachOK = "ATTACH:OK", ja.AttachError = "ATTACH:ERROR", ja.BuildStart = "BUILD:START", ja.BuildOK = "BUILD:OK", ja.BuildError = "BUILD:ERROR", ja.CashAppAPICustomerStart = "CASH_APP_API_CUSTOMER:START", ja.CashAppAPICustomerOK = "CASH_APP_API_CUSTOMER:OK", ja.CashAppAPICustomerError = "CASH_APP_API_CUSTOMER:ERROR", ja.CashAppAuthStart = "CASH_APP_AUTH:START", ja.CashAppAuthOK = "CASH_APP_AUTH:OK", ja.CashAppAuthError = "CASH_APP_AUTH:ERROR", ja.FirstInteraction = "FIRST_INTERACTION:OK", ja.PaymentsUILoadFirstScreenStart = "LOAD_FIRST_SCREEN:START", ja.PaymentsUILoadFirstScreenOK = "LOAD_FIRST_SCREEN:OK", ja.PaymentsUITransitionToStart = "TRANSITION_TO:START", ja.PaymentsUITransitionToOK = "TRANSITION_TO:OK", ja.PaymentsUITransitionBackStart = "TRANSITION_BACK:START", ja.PaymentsUITransitionBackOK = "TRANSITION_BACK:OK", ja.GetProductInformationStart = "GET_PRODUCT_INFORMATION:START", ja.GetProductInformationOK = "GET_PRODUCT_INFORMATION:OK", ja.GetProductInformationError = "GET_PRODUCT_INFORMATION:ERROR", ja.InitializeStart = "INITIALIZATION:START", ja.InitializeOK = "INITIALIZATION:OK", ja.InitializeError = "INITIALIZATION:ERROR", ja.LoadOK = "LOAD:OK", ja.MainIframeOK = "MAIN_IFRAME:OK", ja.NonceStart = "NONCE:START", ja.NonceOK = "NONCE:OK", ja.NonceError = "NONCE:ERROR", ja.VerificationStart = "VERIFICATION:START", ja.VerificationOK = "VERIFICATION:OK", ja.VerificationError = "VERIFICATION:ERROR", ja.AchMissingRequiredOAuthParameters = "ACH_MISSING_REQUIRED_OAUTH_PARAMETERS", (qa = La || (La = {})).ExternalSessionStart = "EXTERNAL_SESSION:START", qa.ExternalSessionOK = "EXTERNAL_SESSION:OK", qa.ExternalSessionError = "EXTERNAL_SESSION:ERROR", qa.ExternalSessionCancel = "EXTERNAL_SESSION:CANCEL", qa.ShippingAddressChangeOK = "SHIPPING_ADDRESS_CHANGE:OK", qa.ShippingOptionChangeOK = "SHIPPING_OPTION_CHANGE:OK", qa.AfterpayCreateCheckoutStart = "AFTERPAY_CREATE_CHECKOUT:START", qa.AfterpayCreateCheckoutOK = "AFTERPAY_CREATE_CHECKOUT:OK", qa.AfterpayCreateCheckoutError = "AFTERPAY_CREATE_CHECKOUT:ERROR", function (e) { e.Clear = "CLEAR", e.ConfigUpdated = "CONFIG_UPDATED", e.Configured = "CONFIGURED", e.PaymentsUIConfigured = "PAYMENTS_UI_CONFIGURED", e.Destroyed = "DESTROYED", e.Detached = "DETACHED", e.EventListenerAdded = "EVENT_LISTENER_ADDED", e.Focused = "FOCUSED", e.OverrideStrings = "OVERRIDE_STRINGS", e.RecalculatedSize = "RECALCULATED_SIZE", e.SetLocale = "SET_LOCALE", e.SetError = "SET_ERROR" }(xa || (xa = {})), function (e) { e.IframeMessengerTimeoutError = "IFRAME_MESSENGER_TIMEOUT_ERROR" }(Ua || (Ua = {})), function (e) { e.ExperimentInteraction = "EXPERIMENT_INTERACTION" }(Ma || (Ma = {})), function (e) { e.CASH_APP_API_CUSTOMER = "CASH_APP_API_CUSTOMER", e.CASH_APP_AUTH = "CASH_APP_AUTH", e.GET_PRODUCT_INFORMATION = "GET_PRODUCT_INFORMATION", e.LOAD = "LOAD", e.MAIN_IFRAME = "MAIN_IFRAME", e.NONCE = "NONCE" }(ka || (ka = {})), function (e) { e.ATTACH = "ATTACH", e.BUILD = "BUILD", e.INITIALIZATION = "INITIALIZATION" }(Ha || (Ha = {})), function (e) { e.START = "START", e.OK = "OK", e.ERROR = "ERROR" }(Ba || (Ba = {})), (Fa = Ga || (Ga = {})).Ach = "ACH", Fa.Afterpay = "Afterpay", Fa.App = "WebSDK", Fa.ApplePay = "Apple Pay", Fa.Card = "Card", Fa.CashApp = "Cash App", Fa.CashAppPayV1 = "Cash App Pay V1", Fa.GooglePay = "Google Pay", Fa.Masterpass = "Masterpass", Fa.GiftCard = "Gift Card", Fa.Fields = "Fields", Fa.PaymentRequest = "Payment Request", Fa.PaymentsUI = "Payments UI"; var za, Ka = { CARD_NONCE_ENDPOINT: new RegExp(y.CARD_NONCE_ENDPOINT), CASH_APP_API_CUSTOMER: new RegExp(y.CASH_APP_API_CUSTOMER), CASH_APP_AUTH_ENDPOINT: new RegExp(y.CASH_APP_AUTH_ENDPOINT), GET_PRODUCT_INFORMATION_ENDPOINT: new RegExp(y.GET_PRODUCT_INFORMATION_ENDPOINT), LIBRARY_RESOURCE: new RegExp("".concat(y.ASSET_BASE_URL, "/([\\w\\d.-]*/)?square").concat(y.APPENDED_FILE_NAME, "\\.js")), MAIN_IFRAME_RESOURCE: new RegExp("".concat(y.ASSET_URL, "/main-iframe").concat(y.APPENDED_FILE_NAME)) }; !function (e) { e.navigation = "navigation", e.fetch = "fetch", e.iframe = "iframe", e.script = "script" }(za || (za = {})); var Wa = new Set(Object.values(xa)), $a = new Set([Da.InitializeOK, Ma.ExperimentInteraction, Ua.IframeMessengerTimeoutError]); r(3123), r(4765); var Qa, Za, Ja, Xa, eo, to = { hash: "", host: "", hostname: "", href: "", origin: "", pathname: "", port: "", protocol: "", search: "", toString: () => "" }; function ro() { if (g.windowLocation === g.windowParentLocation) return g.windowLocation; var e = g.documentReferrer; return e && 0 !== e.length ? (Qa || (Qa = document.createElement("a")), Qa.href = "".concat(e), { hash: Qa.hash, host: Qa.host, hostname: Qa.hostname, href: Qa.href, origin: Qa.origin, pathname: Qa.pathname, port: Qa.port, protocol: Qa.protocol, search: Qa.search, toString() { return this.href } }) : to } r(6699), r(2023); class no { constructor(e) { this.options = e } format(e) { var t = e; return void 0 !== this.options.regexp && void 0 !== this.options.replacement && (this.options.replacement, t = e.replace(this.options.regexp, this.options.replacement)), t.slice(0, this.options.maxLength) } } function io(e, t) { var r = {}; return Object.keys(e).forEach((n => { "object" == typeof e[n] && !Array.isArray(e[n]) && t[n] ? r[n] = io(e[n], t[n]) : r[n] = t[n] || e[n] })), r } (eo = Za || (Za = {})).CA = "CA", eo.GB = "GB", eo.US = "US", function (e) { e.en = "en", e.ja = "ja", e.fr = "fr", e.es = "es" }(Ja || (Ja = {})), function (e) { e.enUS = "en-US", e.enIE = "en-IE", e.enCA = "en-CA", e.enGB = "en-GB", e.enAU = "en-AU", e.jaJP = "ja-JP", e.frFR = "fr-FR", e.frCA = "fr-CA", e.esES = "es-ES" }(Xa || (Xa = {})); var ao = { "en-AU": { paymentMethods: { cards: { errors: { cardNumberError: "Enter a valid card number.", cvvError: "Enter a valid security code.", expirationDateError: "Enter a valid expiration date.", multipleErrors: "Fix the highlighted errors.", postalCodeErrors: { CA: "Enter a valid postal code.", GB: "Enter a valid postcode.", US: "Enter a valid ZIP code." } }, helperText: { cardNumber: "Enter your card number", cvv: "Enter the security code", expirationDate: "Enter the expiration date", postalCodes: { CA: "Enter the postal code", GB: "Enter the postcode", US: "Enter the ZIP code" } }, placeholderText: { cardNumber: "Card number", cvv: "CVV", expirationDate: "MM/YY", postalCodes: { CA: "Postal Code", GB: "Postcode", US: "ZIP" } } }, giftCards: { errors: { giftCardNumberError: "Enter a valid gift card number." }, helperText: { giftCardNumber: "Enter your gift card number" }, placeholderText: { giftCardNumber: "Gift card" } }, afterpay: { checkoutWidget: { today: "Today", weeks: "weeks", title: "Your 4 interest-free payments" } }, wallets: { callbackErrors: { contactError: "There was an error processing your selected shipping contact. Please try again.", optionsError: "There was an error processing your selected shipping option. Please try again." } } } }, "en-CA": { paymentMethods: { cards: { errors: { cardNumberError: "Enter a valid card number.", cvvError: "Enter a valid security code.", expirationDateError: "Enter a valid expiration date.", multipleErrors: "Fix the highlighted errors.", postalCodeErrors: { CA: "Enter a valid postal code.", GB: "Enter a valid postcode.", US: "Enter a valid zip code." } }, helperText: { cardNumber: "Enter your card number", cvv: "Enter the security code", expirationDate: "Enter the expiration date", postalCodes: { CA: "Enter the postal code", GB: "Enter the postcode", US: "Enter the ZIP code" } }, placeholderText: { cardNumber: "Card number", cvv: "CVV", expirationDate: "MM/YY", postalCodes: { CA: "Postal Code", GB: "Postcode", US: "ZIP" } } }, giftCards: { errors: { giftCardNumberError: "Enter a valid gift card number." }, helperText: { giftCardNumber: "Enter your gift card number" }, placeholderText: { giftCardNumber: "Gift card" } }, afterpay: { checkoutWidget: { today: "Today", weeks: "weeks", title: "Your 4 interest-free payments" } }, wallets: { callbackErrors: { contactError: "There was an error processing your selected shipping contact. Please try again.", optionsError: "There was an error processing your selected shipping option. Please try again." } } } }, "en-GB": { paymentMethods: { cards: { errors: { cardNumberError: "Enter a valid card number.", cvvError: "Enter a valid security code.", expirationDateError: "Enter a valid expiration date.", multipleErrors: "Fix the highlighted errors.", postalCodeErrors: { CA: "Enter a valid postal code.", GB: "Enter a valid postcode.", US: "Enter a valid ZIP code." } }, helperText: { cardNumber: "Enter your card number", cvv: "Enter the security code", expirationDate: "Enter the expiration date", postalCodes: { CA: "Enter the postal code", GB: "Enter the postcode", US: "Enter the zip code" } }, placeholderText: { cardNumber: "Card number", cvv: "CVV", expirationDate: "MM/YY", postalCodes: { CA: "Postal Code", GB: "Postcode", US: "ZIP" } } }, giftCards: { errors: { giftCardNumberError: "Enter a valid gift card number." }, helperText: { giftCardNumber: "Enter your gift card number" }, placeholderText: { giftCardNumber: "Gift card" } }, afterpay: { checkoutWidget: { today: "Today", weeks: "weeks", title: "Your 4 interest-free payments" } }, wallets: { callbackErrors: { contactError: "There was an error processing your selected delivery contact. Please try again.", optionsError: "There was an error processing your selected delivery option. Please try again." } } } }, "en-IE": { paymentMethods: { cards: { errors: { cardNumberError: "Enter a valid card number.", cvvError: "Enter a valid security code.", expirationDateError: "Enter a valid expiry date.", multipleErrors: "Fix the highlighted errors.", postalCodeErrors: { CA: "Enter a valid postal code.", GB: "Enter a valid postcode.", US: "Enter a valid zip code." } }, helperText: { cardNumber: "Enter your card number", cvv: "Enter the security code", expirationDate: "Enter the expiry date", postalCodes: { CA: "Enter the postal code", GB: "Enter the postcode", US: "Enter the ZIP code" } }, placeholderText: { cardNumber: "Card number", cvv: "CVV", expirationDate: "MM/YY", postalCodes: { CA: "Postal Code", GB: "Postcode", US: "ZIP" } } }, giftCards: { errors: { giftCardNumberError: "Enter a valid gift card number." }, helperText: { giftCardNumber: "Enter your gift card number" }, placeholderText: { giftCardNumber: "Gift card" } }, afterpay: { checkoutWidget: { today: "Today", weeks: "weeks", title: "Your 4 interest-free payments" } }, wallets: { callbackErrors: { contactError: "There was an error processing your selected delivery contact. Please try again.", optionsError: "There was an error processing your selected delivery option. Please try again." } } } }, "en-US": { paymentMethods: { cards: { errors: { cardNumberError: "Enter a valid card number.", cvvError: "Enter a valid security code.", expirationDateError: "Enter a valid expiration date.", multipleErrors: "Fix the highlighted errors.", postalCodeErrors: { CA: "Enter a valid postal code.", GB: "Enter a valid postcode.", US: "Enter a valid zip code." } }, helperText: { cardNumber: "Enter your card number", cvv: "Enter the security code", expirationDate: "Enter the expiration date", postalCodes: { CA: "Enter the postal code", GB: "Enter the postcode", US: "Enter the zip code" } }, placeholderText: { cardNumber: "Card number", cvv: "CVV", expirationDate: "MM/YY", postalCodes: { CA: "Postal Code", GB: "Postcode", US: "ZIP" } } }, giftCards: { errors: { giftCardNumberError: "Enter a valid gift card number." }, helperText: { giftCardNumber: "Enter your gift card number" }, placeholderText: { giftCardNumber: "Gift card" } }, afterpay: { checkoutWidget: { today: "Today", weeks: "weeks", title: "Your 4 interest-free payments" } }, wallets: { callbackErrors: { contactError: "There was an error processing your selected shipping contact. Please try again.", optionsError: "There was an error processing your selected shipping option. Please try again." } } } }, "es-ES": { paymentMethods: { afterpay: { checkoutWidget: { title: "Tus 4 pagos sin intereses", today: "Hoy", weeks: "semanas" } }, cards: { errors: { cardNumberError: "Introduce un nÃºmero de tarjeta vÃ¡lido.", cvvError: "Introduce un cÃ³digo de seguridad vÃ¡lido.", expirationDateError: "Introduce una fecha de caducidad vÃ¡lida.", multipleErrors: "Corrige los errores resaltados.", postalCodeErrors: { CA: "Introduce un cÃ³digo postal vÃ¡lido.", GB: "Introduce un cÃ³digo postal vÃ¡lido.", US: "Introduce un cÃ³digo postal vÃ¡lido." } }, helperText: { cardNumber: "Introduce tu nÃºmero de tarjeta", cvv: "Introduce el cÃ³digo de seguridad", expirationDate: "Introduce la fecha de caducidad", postalCodes: { CA: "Introduce el cÃ³digo postal", GB: "Introduce el cÃ³digo postal", US: "Introduce el cÃ³digo postal" } }, placeholderText: { cardNumber: "NÃºmero de tarjeta", cvv: "CÃ³digo CVV", expirationDate: "MM/AA", postalCodes: { CA: "CÃ³digo postal", GB: "CÃ³digo postal", US: "C.P." } } }, giftCards: { errors: { giftCardNumberError: "Introduce un nÃºmero de tarjeta regalo vÃ¡lido." }, helperText: { giftCardNumber: "Introduce el nÃºmero de tu tarjeta regalo" }, placeholderText: { giftCardNumber: "Tarjeta regalo" } }, wallets: { callbackErrors: { contactError: "Se ha producido un error al procesar el contacto de envÃ­o que has seleccionado. IntÃ©ntalo de nuevo.", optionsError: "Se ha producido un error al procesar la opciÃ³n de envÃ­o que has seleccionado. IntÃ©ntalo de nuevo." } } } }, "fr-CA": { paymentMethods: { cards: { errors: { cardNumberError: "Saisissez un numÃ©ro de carte valide.", cvvError: "Veuillez saisir un code de sÃ©curitÃ© valide.", expirationDateError: "Veuillez saisir une date dâ€™expiration valide.", multipleErrors: "Corrigez les erreurs mises en Ã©vidence.", postalCodeErrors: { CA: "Saisissez un code postal valide.", GB: "Saisissez un code postal valide.", US: "Saisissez un code postal valide." } }, helperText: { cardNumber: "Saisir votre numÃ©ro de carte", cvv: "Saisir le code de sÃ©curitÃ©", expirationDate: "Saisir la date dâ€™expiration", postalCodes: { CA: "Saisir le code postal", GB: "Saisir le code postal", US: "Saisir le code postal" } }, placeholderText: { cardNumber: "NumÃ©ro de la carte", cvv: "CVV", expirationDate: "MM/AA", postalCodes: { CA: "Code postal", GB: "Code postal", US: "Code postal" } } }, giftCards: { errors: { giftCardNumberError: "Saisissez un numÃ©ro de carte-cadeau valide." }, helperText: { giftCardNumber: "Saisir le numÃ©ro de votre carte cadeau" }, placeholderText: { giftCardNumber: "Carte-cadeau" } }, afterpay: { checkoutWidget: { title: "Vos quatre paiements sans intÃ©rÃªts", today: "Aujourdâ€™hui", weeks: "semaines" } }, wallets: { callbackErrors: { contactError: "Une erreur sâ€˜est produite lors du traitement du contact de livraison sÃ©lectionnÃ©. Veuillez rÃ©essayer.", optionsError: "Une erreur sâ€˜est produite lors du traitement de lâ€˜option dâ€˜expÃ©dition sÃ©lectionnÃ©e. Veuillez rÃ©essayer." } } } }, "fr-FR": { paymentMethods: { afterpay: { checkoutWidget: { title: "Vos quatre paiements sans intÃ©rÃªts", today: "Aujourdâ€™hui", weeks: "semaines" } }, cards: { errors: { cardNumberError: "Saisissez un numÃ©ro de carte valide", cvvError: "Veuillez saisir un code de sÃ©curitÃ© valide.", expirationDateError: "Saisir une date dâ€™expiration valide", multipleErrors: "Corrigez les erreurs mises en Ã©vidence.", postalCodeErrors: { CA: "Saisissez un code postal valide", GB: "Saisissez un code postal valide", US: "Saisissez un code ZIP valide" } }, helperText: { cardNumber: "Saisir votre numÃ©ro de carte", cvv: "Saisir le code de sÃ©curitÃ©", expirationDate: "Saisir la date dâ€™expiration", postalCodes: { CA: "Saisir un code postal", GB: "Saisir un code postal", US: "Saisir un code ZIP" } }, placeholderText: { cardNumber: "NumÃ©ro de carte", expirationDate: "MM/AA", cvv: "CVV", postalCodes: { CA: "Code postal", GB: "Code postal", US: "Code ZIP" } } }, giftCards: { errors: { giftCardNumberError: "Saisir un numÃ©ro de carte cadeau valide" }, helperText: { giftCardNumber: "Saisir le numÃ©ro de votre carte cadeau" }, placeholderText: { giftCardNumber: "Carte cadeau" } }, wallets: { callbackErrors: { contactError: "Une erreur sâ€˜est produite lors du traitement du contact de livraison sÃ©lectionnÃ©. Veuillez rÃ©essayer.", optionsError: "Une erreur sâ€˜est produite lors du traitement de lâ€˜option dâ€˜expÃ©dition sÃ©lectionnÃ©e. Veuillez rÃ©essayer." } } } }, "ja-JP": { paymentMethods: { afterpay: { checkoutWidget: { title: "ç„¡åˆ©æ¯ã®4å›žæ‰•ã„", today: "ä»Šæ—¥", weeks: "é€±é–“" } }, cards: { errors: { cardNumberError: "æ­£ã—ã„ã‚«ãƒ¼ãƒ‰ç•ªå·ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚", cvvError: "æœ‰åŠ¹ãªã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚³ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚", expirationDateError: "æ­£ã—ã„æœ‰åŠ¹æœŸé™ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚", multipleErrors: "å¼·èª¿è¡¨ç¤ºã•ã‚ŒãŸã‚¨ãƒ©ãƒ¼ã‚’ä¿®æ­£ã—ã¦ãã ã•ã„ã€‚", postalCodeErrors: { CA: "æ­£ã—ã„éƒµä¾¿ç•ªå·ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚", GB: "æœ‰åŠ¹ãªéƒµä¾¿ç•ªå·ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚", US: "æ­£ã—ã„ZIPã‚³ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚" } }, helperText: { cardNumber: "ã‚«ãƒ¼ãƒ‰ç•ªå·ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„", cvv: "ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚³ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„", expirationDate: "æœ‰åŠ¹æœŸé™ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„", postalCodes: { CA: "éƒµä¾¿ç•ªå·ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„", GB: "éƒµä¾¿ç•ªå·ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„", US: "ZIPã‚³ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„" } }, placeholderText: { cardNumber: "ã‚«ãƒ¼ãƒ‰ç•ªå·", cvv: "CVV", expirationDate: "MM/YY", postalCodes: { CA: "éƒµä¾¿ç•ªå·", GB: "éƒµä¾¿ç•ªå·", US: "ZIP" } } }, giftCards: { errors: { giftCardNumberError: "æœ‰åŠ¹ãªã‚®ãƒ•ãƒˆã‚«ãƒ¼ãƒ‰ç•ªå·ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚" }, helperText: { giftCardNumber: "ã‚®ãƒ•ãƒˆã‚«ãƒ¼ãƒ‰ç•ªå·ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„" }, placeholderText: { giftCardNumber: "ã‚®ãƒ•ãƒˆã‚«ãƒ¼ãƒ‰" } }, wallets: { callbackErrors: { contactError: "é¸æŠžã•ã‚ŒãŸé…é€ä½æ‰€ã‚’å‡¦ç†ã™ã‚‹éš›ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚ã‚‚ã†ä¸€åº¦ã‚„ã‚Šç›´ã—ã¦ãã ã•ã„ã€‚", optionsError: "é¸æŠžã•ã‚ŒãŸé…é€æ–¹æ³•ã‚’å‡¦ç†ã™ã‚‹éš›ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚ã‚‚ã†ä¸€åº¦ã‚„ã‚Šç›´ã—ã¦ãã ã•ã„ã€‚" } } } } }, oo = { en: Xa.enUS, es: Xa.esES, fr: Xa.frFR, ja: Xa.jaJP }, so = oo[Ja.en]; class co { constructor(e) { this.currentLocale = so, this.currentTranslations = ao[this.currentLocale], this.setLocale(e) } setTranslationOverrides(e) { this.translationOverrides = e } setLocale(e) { var t = this.getLanguageFromLocale(e), r = this.getRegionFromLocale(e), n = this.currentLocale; if (ao[e]) this.currentLocale = e; else { if (!Ja[t]) return { message: "Locale ".concat(e, " is not supported. Language ").concat(t, " and region ").concat(r, " are both unsupported."), newLocale: this.currentLocale, previousLocale: n }; this.currentLocale = oo[t] } this.currentTranslations = ao[this.currentLocale]; var i = this.getRegionFromLocale(this.currentLocale); return r && i && r.toLowerCase() !== i.toLowerCase() ? { message: "Locale ".concat(e, " is not supported. Language ").concat(t, " is supported, but region ").concat(r, " is not. Falling back to ").concat(this.currentLocale, "."), newLocale: this.currentLocale, previousLocale: n } : { newLocale: this.currentLocale, previousLocale: n } } getCurrentLocale() { return this.currentLocale } getLocaleString() { return this.translationOverrides ? io(this.currentTranslations, this.translationOverrides) : this.currentTranslations } getLanguageFromLocale(e) { return e.split("-")[0] } getRegionFromLocale(e) { return e.split("-")[1] } } var uo = "INVALID_VALUE", lo = "SANITIZED", po = new Set(["countryCode", "currencyCode", "requestBillingContact", "requestShippingContact", "lineItems", "total", "shippingOptions", "shippingContact"]), ho = new Set(["includeInputLabels", "postalCode", "style"]), fo = new Set(["includeInputLabels", "style"]), go = new Set(["lineItems", "total", "shippingOptions", "shippingContact"]), mo = new Set(["buttonColor", "buttonSizeMode", "buttonType"]), vo = new Set(["paymentRequestOptions", "enableMethods", "disableMethods", "redirectURI", "transactionId"]), Eo = new Set(["redirectURI", "transactionId"]), yo = new Set(["shape", "size", "values", "theme", "width"]), _o = Uo(In), Ao = Uo(nn), Io = Uo(cn), So = Uo(pn), Co = Uo(an), Oo = Uo(sn), To = Uo(Xa), Po = Uo(Ei), Ro = Uo(yi), No = Uo(_i), wo = Uo(Ri), bo = Uo(Oi), Do = Uo(Ci), Lo = Uo(Ti), xo = Uo(Pi); function Uo(e) { return new Set(Object.values(e)) } function Mo(e) { return JSON.stringify({ value: e }) } function ko(e, t) { var r = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : new Set, n = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : {}, i = {}; return Object.entries(e).forEach((e => { var [a, o] = e; if (t.has(a)) { var s = o; r.has(a) ? s = lo : n[a] && (s = n[a].has(o) ? o : uo), i[a] = s } })), JSON.stringify(i) } function Ho(e) { return ko(e, vo, Eo) } function Bo(e) { return ko(e, yo, void 0, { shape: Do, size: bo, values: Lo, theme: Lo, width: xo }) } var Go = function (e, t, r) { switch (e) { case xa.Configured: case xa.ConfigUpdated: return function (e, t) { switch (e) { case Ga.Card: case Ga.GiftCard: return function (e, t) { return ko(t, e === Ga.Card ? ho : fo) }(e, t); case Ga.GooglePay: return function (e) { return ko(e, mo, void 0, { buttonColor: Po, buttonSizeMode: Ro, buttonType: No }) }(t); case Ga.PaymentRequest: return function (e) { return ko(e, po, go, { currencyCode: wo }) }(t); case Ga.PaymentsUI: return Ho(t); case Ga.CashAppPayV1: return Bo(t) }return uo }(t, r); case xa.PaymentsUIConfigured: return Ho(r); case xa.Focused: return Mo(function (e, t) { if ("string" != typeof t) return uo; switch (e) { case Ga.Card: if (Co.has(t)) return t; break; case Ga.GiftCard: if (Oo.has(t)) return t }return uo }(t, r)); case xa.SetLocale: return Mo(function (e) { return "string" != typeof e ? uo : To.has(e) ? e : uo }(r)); case xa.EventListenerAdded: return Mo(function (e, t) { if ("string" != typeof t) return uo; switch (e) { case Ga.Ach: if (_o.has(t)) return t; break; case Ga.Card: if (Ao.has(t)) return t; break; case Ga.GiftCard: if (Io.has(t)) return t; break; case Ga.PaymentRequest: if (So.has(t)) return t }return uo }(t, r)); case xa.Destroyed: case xa.RecalculatedSize: default: return "" } }; function Fo(e, t) { return null !== e.document.body && void 0 !== e.document.body && null !== e.document.createNodeIterator(e.document.body, NodeFilter.SHOW_ELEMENT, { acceptNode: t }).nextNode() } function qo(e, t) { return Boolean(e.querySelector(t)) } function jo(e, t) { return void 0 !== e[t] } r(8559); var Vo = function (e) { var t, r = jo(e, "angular"), n = qo(e.document, "[ng-version]") || jo(e, "getAllAngularRootElements") || jo(e, "getAngularVersion"), i = jo(e, "bootstrap"), a = jo(e, "Ember"), o = jo(e, "jQuery"), s = qo(e.document, 'form[action*="paypal.com"]'), c = function (e) { return Fo(e, (function (e) { return e.__k || e._component || e.__c ? NodeFilter.FILTER_ACCEPT : NodeFilter.FILTER_REJECT })) }(e), u = function (e) { var t = qo(e.document, "*[data-reactroot]"); if (t) return t; return Fo(e, (function (e) { return e._reactRootContainer ? NodeFilter.FILTER_ACCEPT : NodeFilter.FILTER_REJECT })) }(e), l = function (e) { var t = jo(e, "__NUXT__") || jo(e, "$nuxt"), r = jo(e, "__VUE__"); if (r || t) return r || t; return Fo(e, (function (e) { return e.__vue__ ? NodeFilter.FILTER_ACCEPT : NodeFilter.FILTER_REJECT })) }(e), d = { angular: n, angularJS: r, bootstrap: i, ember: a, jquery: o, nextJS: jo(e, "__NEXT_DATA__") && void 0 !== (null === (t = e.__NEXT_DATA__) || void 0 === t ? void 0 : t.buildId), paypalBuyNow: s, preact: c, react: u, vue: l }; return Object.fromEntries(Object.entries(d).filter((e => { var [t, r] = e; return !0 === r }))) }; function Yo(e, t) { var r = g.windowPerformance; if (!r || "function" != typeof r.getEntriesByType) return null; var n = function (e, t, r) { var n = e.filter((e => e.initiatorType === t && r.test(e.name))); return n[n.length - 1] }([...r.getEntriesByType("resource"), ...r.getEntriesByType("navigation")], e, t); return n ? Math.round(function (e) { return e.duration > 0 ? e.duration : Math.max(Math.trunc(e.responseEnd - e.startTime), 0) }(n)) : null } var zo = function (e) { switch (e) { case ka.CASH_APP_AUTH: return Yo(za.fetch, Ka.CASH_APP_AUTH_ENDPOINT); case ka.CASH_APP_API_CUSTOMER: return Yo(za.fetch, Ka.CASH_APP_API_CUSTOMER); case ka.GET_PRODUCT_INFORMATION: return Yo(za.fetch, Ka.GET_PRODUCT_INFORMATION_ENDPOINT); case ka.MAIN_IFRAME: return Yo(za.navigation, Ka.MAIN_IFRAME_RESOURCE); case ka.LOAD: return Yo(za.script, Ka.LIBRARY_RESOURCE); case ka.NONCE: return Yo(za.fetch, Ka.CARD_NONCE_ENDPOINT); default: return null } }; function Ko(e, t) { var r = Object.keys(e); if (Object.getOwnPropertySymbols) { var n = Object.getOwnPropertySymbols(e); t && (n = n.filter((function (t) { return Object.getOwnPropertyDescriptor(e, t).enumerable }))), r.push.apply(r, n) } return r } function Wo(e) { for (var t = 1; t < arguments.length; t++) { var r = null != arguments[t] ? arguments[t] : {}; t % 2 ? Ko(Object(r), !0).forEach((function (t) { $o(e, t, r[t]) })) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(r)) : Ko(Object(r)).forEach((function (t) { Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(r, t)) })) } return e } function $o(e, t, r) { return t in e ? Object.defineProperty(e, t, { value: r, enumerable: !0, configurable: !0, writable: !0 }) : e[t] = r, e } var Qo, Zo = y.METRICS_URL, Jo = y.METRICS_V2_URL; class Xo { constructor(e, t) { this.sdkVersion = y.VERSION, this.jsFramework = "", this.applicationData = t, this.manualTelemetryStarts = {}, this.metricsBuffer = [], this.errorLogger = e, this.disableBeacon = !1 } setAvt(e) { this.avt = e } logEvent(e, t, r, n, i) { try { var a = { origin: ro().origin }, o = { innerHeight: g.windowInnerHeight, innerWidth: g.windowInnerWidth, language: g.windowNavigationLanguage }, s = this.eventDuration(e, n), { event: c, eventSource: u, eventConfigurationValues: l, internalConfigurationValues: d } = e, p = this.sdkVersion, h = this.metricsSession(t, r, i), f = { appLocation: a, avt: this.avt, browserData: o, event: c, eventSource: u, paymentMethodTrackingId: n, sdkVersion: p, session: h }; void 0 !== l && (v = c, Wa.has(v)) && (f.eventConfigurationValues = Go(c, u, l)), void 0 !== d && function (e) { return $a.has(e) }(c) && (f.internalConfigurationValues = JSON.stringify(d)), s && (f.duration = s), c === Da.InitializeOK && (f.jsFramework = this.getJSFrameworkValue()); var m = !1; c !== Da.NonceOK && c !== xa.Destroyed || (m = !0), this.postMetricsEvent(f, m) } catch (e) { this.errorLogger.captureException(e) } var v } getJSFrameworkValue() { return 0 === this.jsFramework.length && (this.jsFramework = JSON.stringify(Vo(window))), this.jsFramework } eventDuration(e, t) { var [r, n] = e.event.split(":"); if (r in Ha) { var i; if (r === Ha.INITIALIZATION ? i = r : t && (i = "".concat(r, ":").concat(t)), !i) return null; if (n === Ba.START) { var a = Date.now(); return this.manualTelemetryStarts[i] = a, null } if (n === Ba.OK || n === Ba.ERROR) { var o = this.manualTelemetryStarts[i]; return void 0 === o ? null : (delete this.manualTelemetryStarts[i], Date.now() - o) } } return n !== Ba.START && r in ka ? zo(r) : null } postMetricsEvent(e) { var t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1]; !this.disableBeacon && g.windowNavigationBeacon && g.documentVisibilityState ? (this.metricsBuffer.push(e), t && this.buildAndSendBeacon(), void 0 === this.currentInterval && (document.addEventListener("visibilitychange", (() => { "hidden" === g.documentVisibilityState && (this.buildAndSendBeacon(), clearInterval(this.currentInterval), this.currentInterval = void 0) })), this.currentInterval = window.setInterval((() => { this.buildAndSendBeacon() }), 1e3))) : Rn(Zo, { body: e }).catch((e => { this.errorLogger.captureException(e) })) } buildAndSendBeacon() { if (0 !== this.metricsBuffer.length) { try { var e = new Blob([JSON.stringify({ metrics: this.metricsBuffer })], { type: "text/plain;charset=UTF-8" }); window.navigator.sendBeacon(Jo, e) } catch (e) { e instanceof TypeError && "Illegal invocation" === e.message || this.errorLogger.captureException(e), this.disableBeacon = !0, void 0 !== this.currentInterval && (clearInterval(this.currentInterval), this.currentInterval = void 0), Rn(Jo, { body: { metrics: this.metricsBuffer } }).catch((e => { e instanceof Vr || this.errorLogger.captureException(e) })) } this.metricsBuffer = [] } } metricsSession(e, t, r) { return Wo(Wo({}, this.applicationData), {}, { instanceId: e, sessionId: t, paymentsUIInstanceId: r }) } } !function (e) { e.ACH = "ACH", e.AFTERPAY = "AFTERPAY", e.APPLE_PAY = "APPLE_PAY", e.CASH_APP = "CASH_APP", e.CASH_APP_PAY_V1 = "CASH_APP_PAY_V1", e.GOOGLE_PAY = "GOOGLE_PAY" }(Qo || (Qo = {})), y.HYDRATION_ENDPOINT; var es, ts, rs = "INITIALIZE", ns = "UPDATE_SESSION", is = { [Zi.CanUseInterac]: { false: Ji.Control, true: Ji.TreatmentA }, [Zi.CanUseOverrideStrings]: { false: Ji.Control, true: Ji.TreatmentA }, [Zi.CanUsePlaidOAuth]: { [Xi.LEGACY_IMPLEMENTATION]: Xi.LEGACY_IMPLEMENTATION, [Xi.PREFER_OAUTH_FLOW]: Xi.PREFER_OAUTH_FLOW, [Xi.ENFORCE_OAUTH_FLOW]: Xi.ENFORCE_OAUTH_FLOW }, [Zi.CanUsePaymentsUI]: { false: Ji.Control, true: Ji.TreatmentA }, [Zi.PaymentsUICanUseCard]: { false: Ji.Control, true: Ji.TreatmentA }, [Zi.PaymentsUICanUseAchPlaid]: { false: Ji.Control, true: Ji.TreatmentA }, [Zi.PaymentsUICanUseApplePay]: { false: Ji.Control, true: Ji.TreatmentA }, [Zi.PaymentsUICanUseGooglePay]: { false: Ji.Control, true: Ji.TreatmentA }, [Zi.PaymentsUICanUseCashApp]: { false: Ji.Control, true: Ji.TreatmentA }, [Zi.PaymentsUICanUseBnplA]: { false: Ji.Control, true: Ji.TreatmentA }, [Zi.PaymentsUICanUseGiftCard]: { false: Ji.Control, true: Ji.TreatmentA }, [Zi.CanUseBNPLA]: { false: Ji.Control, true: Ji.TreatmentA }, [Zi.RecordErrorMetrics]: { false: Ji.Control, true: Ji.TreatmentA } }; class as { constructor(e) { this.featureFlagValues = e } isActive(e) { return this.experimentGroup(e) !== Ji.Control } experimentGroup(e) { return this.featureFlagValueExperimentGroup(e) } featureFlagValueExperimentGroup(e) { var t = this.featureFlagValues[e]; return is[e][t] || Ji.Control } } !function (e) { e.AFTERPAY = "window.AfterPay", e.AFTERPAY_MESSAGING = "window.Afterpay", e.ANALYTICS = "window.Square.Analytics", e.GOOGLE = "window.google.payments", e.PLAID = "window.Plaid", e.CASH_APP_PAY = "window.CashApp" }(es || (es = {})), function (e) { e.AFTERPAY = "square-payments-afterpay-script", e.AFTERPAY_MESSAGING = "square-payments-afterpay-messaging-script", e.ANALYTICS = "square-payments-analytics-link-script", e.GOOGLE = "square-payments-google-link-script", e.PLAID = "square-payments-plaid-link-script", e.CASH_APP_PAY = "square-payments-cash-app-pay-script" }(ts || (ts = {})); var os = {}; function ss(e, t, r, n, i) { var a = n(); if (a) return Promise.resolve(a); if (os[t]) return os[t]; var o = document.createElement("script"); return o.id = e, o.src = r, void 0 !== i && (o.type = i), os[t] = new Promise(((e, i) => { o.onload = () => { var a = n(); if (a) e(a); else { var o = "".concat(t, " is undefined"); i(new si(r, o)) } }, o.onerror = (e, t, n, a, o) => { i(new si(r, "Unknown error occured", o)) } })), document.body.appendChild(o), os[t] } var cs, us = function () { return ss(ts.AFTERPAY, es.AFTERPAY, y.AFTERPAY_SCRIPT_URL, (() => { var e; return null === (e = window) || void 0 === e ? void 0 : e.AfterPay })) }, ls = function () { return ss(ts.AFTERPAY_MESSAGING, es.AFTERPAY_MESSAGING, y.AFTERPAY_MESSAGING_SCRIPT_URL, (() => { var e; return null === (e = window) || void 0 === e ? void 0 : e.Afterpay })) }, ds = function () { return ss(ts.ANALYTICS, es.ANALYTICS, y.ANALYTICS_PUBLIC_ENDPOINT, (() => { var e, t; return null === (e = window) || void 0 === e || null === (t = e.Square) || void 0 === t ? void 0 : t.Analytics })) }, ps = function () { return ss(ts.CASH_APP_PAY, es.CASH_APP_PAY, y.CASH_APP_PAY_SCRIPT_URL, (() => { var e; return null === (e = window) || void 0 === e ? void 0 : e.CashApp })) }, hs = function () { return ss(ts.GOOGLE, es.GOOGLE, y.GOOGLE_PAY_SCRIPT_URL, (() => { var e, t; return null === (e = window) || void 0 === e || null === (t = e.google) || void 0 === t ? void 0 : t.payments })) }, fs = function () { return ss(ts.PLAID, es.PLAID, y.PLAID_LINK_SCRIPT_URL, (() => { var e; return null === (e = window) || void 0 === e ? void 0 : e.Plaid })) }; function gs(e, t, r, n, i, a, o) { try { var s = e[a](o), c = s.value } catch (e) { return void r(e) } s.done ? t(c) : Promise.resolve(c).then(n, i) } function ms(e) { return function () { var t = this, r = arguments; return new Promise((function (n, i) { var a = e.apply(t, r); function o(e) { gs(a, n, i, o, s, "next", e) } function s(e) { gs(a, n, i, o, s, "throw", e) } o(void 0) })) } } var vs = Vi.hoursToMs(2); function Es(e) { var { applicationId: t, locationId: r } = e; return cs || (cs = ds().then((e => new e(t, { locationId: r })))) } function ys() { return ys = ms((function* (e) { var t = yield Es(e); return new Promise((e => { t.getToken(e) })) })), ys.apply(this, arguments) } function _s() { return _s = ms((function* (e, t, r) { var n = yield Es(e); return new Promise(((e, i) => { n.verifyBuyer(t, r, ((t, r) => { t ? i(t) : e(r) })) })) })), _s.apply(this, arguments) } var As = { getToken: function (e) { return ys.apply(this, arguments) }, resetLibraryCache: function () { cs = void 0 }, verifyBuyer: function (e, t, r) { return _s.apply(this, arguments) } }; function Is(e, t, r, n, i, a, o) { try { var s = e[a](o), c = s.value } catch (e) { return void r(e) } s.done ? t(c) : Promise.resolve(c).then(n, i) } var Ss, Cs = "LOCALE_CHANGED_EVENT"; class Os extends class { constructor(e, t) { this.errorLogger = e, this.messenger = t } }{ constructor(e, t, r, n, i, a, o, s) { super(e, t), this.session = n, this.localeStrings = a, this.paymentMethodSupportDetail = i, this.metricsHandler = r, this.eventTarget = o, this.featureFlagHandler = new as(s), this.featureFlagValues = s } addLocaleChangedListener(e) { this.eventTarget.addEventListener(Cs, e) } removeLocaleChangedListener(e) { this.eventTarget.removeEventListener(Cs, e) } getSession() { return this.session.serialize() } getFeatureFlagValues() { return this.featureFlagValues } getLocaleString() { return this.localeStrings.getLocaleString() } setTranslationOverrides(e) { this.localeStrings.setTranslationOverrides(e), this.session.setTranslationOverrides(e), this.eventTarget.dispatchEvent(Cs, this.localeStrings.getCurrentLocale()), this.messenger.sendOneWayMessage(ns, { session: this.session.serialize() }) } setLocale(e) { var t = this.localeStrings.setLocale(e); if (t.previousLocale === t.newLocale) return t; var r = this.localeStrings.getCurrentLocale(); return this.session.setLocale(r), this.eventTarget.dispatchEvent(Cs, r), this.messenger.sendOneWayMessage(ns, { session: this.session.serialize() }), t } updateSession(e) { var t, r = this; return (t = function* () { r.session.setSessionId(e); try { var t = yield As.getToken({ applicationId: r.session.applicationId, locationId: r.session.locationId, websiteUrl: r.session.sourceUrl }); r.session.setAnalyticsToken(t) } catch (e) { r.session.locationId && r.errorLogger.captureException(e, r.session.instanceId, r.session.sessionId) } yield r.messenger.sendOneWayMessage(ns, { session: r.session.serialize() }) }, function () { var e = this, r = arguments; return new Promise((function (n, i) { var a = t.apply(e, r); function o(e) { Is(a, n, i, o, s, "next", e) } function s(e) { Is(a, n, i, o, s, "throw", e) } o(void 0) })) })() } setPaymentMethodTrackingId(e) { this.metricsHandler.setPaymentMethodTrackingId(e) } setPaymentsUIInstanceId(e) { this.session.setPaymentsUIInstanceId(e) } getPaymentMethodTrackingId() { return this.metricsHandler.getPaymentMethodTrackingId() } getPaymentsUIInstanceId() { return this.session.paymentsUIInstanceId } } function Ts() { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : ""; return "https://developer.squareup.com/docs/api/paymentform".concat(e) } function Ps() { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : ""; return "https://developer.squareup.com/docs/payment-form/add-digital-wallets/apple-pay".concat(e) } !function (e) { e.APPLE_PAY_BROWSER_NOT_SUPPORTED = "APPLE_PAY_BROWSER_NOT_SUPPORTED", e.APPLE_PAY_DEVICE_NOT_SUPPORTED = "APPLE_PAY_DEVICE_NOT_SUPPORTED", e.APPLE_PAY_NOT_REGISTERED = "APPLE_PAY_NOT_REGISTERED", e.GOOGLE_PAY_BROWSER_NOT_SUPPORTED = "GOOGLE_PAY_BROWSER_NOT_SUPPORTED", e.INVALID_CONFIG = "INVALID_CONFIG", e.UNKNOWN = "UNKNOWN", e.WALLET_NOT_REQUESTED = "WALLET_NOT_REQUESTED" }(Ss || (Ss = {})); var Rs, Ns = { APPLE_PAY_BROWSER_NOT_SUPPORTED: { message: "Apple Pay is only available on Safari.", type: "BROWSER_NOT_SUPPORTED" }, APPLE_PAY_DEVICE_NOT_SUPPORTED: { message: "Device does not support Apple Pay.\nSee:".concat(Ps("#prerequisites-and-assumptions"), "."), type: "DEVICE_NOT_SUPPORTED" }, APPLE_PAY_NOT_REGISTERED: { message: "No active card available in the Apple Wallet or domain not registered.", type: "NOT_REGISTERED" }, GOOGLE_PAY_BROWSER_NOT_SUPPORTED: { message: "Browser does not support Google Pay. \nSee: ".concat(function () { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : ""; return "https://developer.squareup.com/docs/payment-form/add-digital-wallets/google-pay".concat(e) }("#prerequsites-and-assumptions")), type: "BROWSER_NOT_SUPPORTED" }, INVALID_CONFIG: { message: "Configuration is invalid.", type: "INVALID_CONFIG" }, UNKNOWN: { message: "An unknown error has occurred.", type: "UNKNOWN" }, WALLET_NOT_REQUESTED: { message: "Wallet is not specified in the payment request config.\nSee:".concat(Ts("#paymentform-configurationfields")), type: "WALLET_NOT_REQUESTED" } }; !function (e) { e.COUNTRY_NOT_SUPPORTED = "COUNTRY_NOT_SUPPORTED", e.APPLICATION_DISABLED = "APPLICATION_DISABLED", e.MISSING_LOCATION_ID = "MISSING_LOCATION_ID", e.UNVERIFIED_DOMAIN = "UNVERIFIED_DOMAIN", e.NOT_ONBOARDED = "NOT_ONBOARDED", e.US_AND_UK_MERCHANT_ONLY = "US_AND_UK_MERCHANT_ONLY", e.US_MERCHANT_ONLY = "US_MERCHANT_ONLY", e.INTERNAL_ERROR = "INTERNAL_ERROR", e.DOMAIN_NOT_REGISTERED = "DOMAIN_NOT_REGISTERED" }(Rs || (Rs = {})); var ws = { APPLICATION_DISABLED: { message: "Wallet is disabled for your application.", type: "APPLICATION_DISABLED" }, COUNTRY_NOT_SUPPORTED: { message: "Wallet is not available in this merchant country.", type: "COUNTRY_NOT_SUPPORTED" }, MISSING_LOCATION_ID: { field: "locationId", message: "Missing locationId in the payment request configuration.\nSee: ".concat(Ts("#paymentform-configurationfields")), type: "MISSING_LOCATION_ID" }, NOT_ONBOARDED: { message: "Your merchant account has not yet been onboarded for this payment method. Please visit the Seller Dashboard to enable the payment method", type: "NOT_ONBOARDED" }, UNVERIFIED_DOMAIN: { message: "Your website's domain is not verified for use with Apple Pay. Please visit the Square Developer Dashboard at https://developer.squareup.com/ to register your domain for use with Apple Pay", type: "UNVERIFIED_DOMAIN" }, US_AND_UK_MERCHANT_ONLY: { message: "Wallet is available for US and UK merchants only.", type: "US_AND_UK_MERCHANT_ONLY" }, US_MERCHANT_ONLY: { message: "Wallet is available for US merchants only.", type: "US_MERCHANT_ONLY" }, INTERNAL_ERROR: { message: "There was a temporary error determining your website's payment method status", type: "INTERNAL_ERROR" }, DOMAIN_NOT_REGISTERED: { message: "Your website's domain is not registered for use with Apple Pay.\nSee: ".concat(Ps("#production-configuration")), type: "DOMAIN_NOT_REGISTERED" } }; class bs extends Nn { constructor(e, t, r) { var n = "".concat(e, " was called with a missing or invalid parameter. '").concat(t, "' is required"); r && (n += " and must be a(n) ".concat(r)), super("".concat(n, ".")), this.name = "InvalidFunctionArgumentError", Object.setPrototypeOf(this, bs.prototype) } } class Ds extends Nn { constructor(e) { super("One or more of the arguments needed are missing or invalid."), this.argumentErrors = e, this.name = "InvalidArgumentsError", Object.setPrototypeOf(this, Ds.prototype) } } class Ls { constructor() { this.listeners = {} } addEventListener(e, t) { e in this.listeners || (this.listeners[e] = []), this.listeners[e].push(t) } removeEventListener(e, t) { if (e in this.listeners) for (var r = this.listeners[e], n = 0; n < r.length; n++)r[n] === t && (r.splice(n, 1), n--) } dispatchEvent(e, t) { if (e in this.listeners) for (var r = new fi(e, t), n = [...this.listeners[e]], i = 0, a = n.length; i < a; i++)try { n[i](r) } catch (e) { console.error(e) } } hasEventListener(e) { return e in this.listeners && this.listeners[e].length > 0 } } var xs, Us = function () { function e() { return Math.floor(65536 * (1 + Math.random())).toString(16).slice(1) } return "".concat(e() + e(), "-").concat(e(), "-").concat(e(), "-").concat(e(), "-").concat(e()).concat(e()).concat(e()) }; !function (e) { e.REQUEST_GOOGLE_PAY_CARD_NONCE = "REQUEST_GOOGLE_PAY_CARD_NONCE", e.GENERATE_GOOGLE_PAY_AUTH_TOKEN = "GENERATE_GOOGLE_PAY_AUTH_TOKEN" }(xs || (xs = {})); var Ms; !function (e) { e[e.DETACHED = 0] = "DETACHED", e[e.ATTACHED = 1] = "ATTACHED", e[e.DESTROYED = 2] = "DESTROYED" }(Ms || (Ms = {})); class ks { constructor(e) { this.status = Ms.DETACHED, this.eventTarget = new Ls, this.eventBuffer = {}, this.context = e } get session() { return this.context.getSession() } get messenger() { return this.context.messenger } get metricsHandler() { return this.context.metricsHandler } get errorLogger() { return this.context.errorLogger } get featureFlagHandler() { return this.context.featureFlagHandler } addEventListener(e, t) { this.eventTarget.addEventListener(e, t), e in this.eventBuffer && this.eventBuffer[e].length > 0 && (this.eventBuffer[e].forEach((t => this.eventTarget.dispatchEvent(e, t))), this.eventBuffer[e] = []) } hasEventListener(e) { return this.eventTarget.hasEventListener(e) } removeEventListener(e, t) { this.eventTarget.removeEventListener(e, t) } destroy() { return Promise.resolve() } detach() { return Promise.resolve() } dispatchEvent(e, t) { this.hasEventListener(e) ? this.eventTarget.dispatchEvent(e, t) : (e in this.eventBuffer || (this.eventBuffer[e] = []), this.eventBuffer[e].push(t)) } throwIfDestroyed() { if (this.status === Ms.DESTROYED) throw new ri(this.methodType) } throwIfAlreadyAttached() { if (this.throwIfDestroyed(), this.status === Ms.ATTACHED) throw new ei(this.methodType) } throwIfNotAttached() { if (this.throwIfDestroyed(), this.status !== Ms.ATTACHED) throw new ti(this.methodType) } } var Hs, Bs, Gs = { message: "the tokenization request is already in process", type: "TOKENIZATION_IN_PROCESS" }; !function (e) { e.CREATE_PLAID_LINK_SESSION = "CREATE_PLAID_LINK_SESSION", e.CREATE_OAUTH_PLAID_LINK_SESSION = "CREATE_OAUTH_PLAID_LINK_SESSION", e.REQUEST_ACH_BANK_NONCE = "REQUEST_ACH_BANK_NONCE" }(Hs || (Hs = {})), function (e) { e.SUCCESS = "SUCCESS", e.CANCEL = "CANCEL" }(Bs || (Bs = {})); class Fs { constructor(e) { this.id = Us(), this.context = e } request(e, t) { return this.context.messenger.request(e, { featureFlagValues: this.context.getFeatureFlagValues(), paymentMethodInstanceId: this.id, paymentMethodTrackingId: this.context.getPaymentMethodTrackingId(), session: this.context.getSession(), body: t }) } initializeMessageBus(e) { var t = this, r = function (e, r) { t.context.messenger.onMessage({ listener(e) { r(e) }, messageType: "".concat(e, ":").concat(t.id) }) }; for (var [n, i] of Object.entries(e)) r(n, i) } } function qs(e, t) { var r = e; return e instanceof Nn || (r = new Nn, t.captureException(e)), { errors: [r], status: hn.ERROR } } function js(e, t, r, n, i, a, o) { try { var s = e[a](o), c = s.value } catch (e) { return void r(e) } s.done ? t(c) : Promise.resolve(c).then(n, i) } function Vs(e) { return function () { var t = this, r = arguments; return new Promise((function (n, i) { var a = e.apply(t, r); function o(e) { js(a, n, i, o, s, "next", e) } function s(e) { js(a, n, i, o, s, "throw", e) } o(void 0) })) } } var Ys, zs, Ks, Ws, $s, Qs, Zs, Js = ["US"], Xs = ["auth"], ec = new Set(["en", "es"]), tc = new Set(["ITEM_ERROR"]); class rc extends ks { constructor(e, t, r) { super(t), this.methodType = dn.ACH, this.tokenizeInProgress = !1, this.wasFirstInteractionCalled = !1, this.Plaid = e, this.paymentMessenger = new Fs(this.context); try { !function (e) { if (e && e.length > 0) { var t; try { t = new URL(e) } catch (t) { throw new Qn("redirectURI", e, "Must be a valid URI") } if ([...t.searchParams.values()].length > 0) throw new Qn("redirectURI", e, "URI must not contain query parameters"); return !0 } throw new Qn("redirectURI", "".concat(e), "Must be a valid URI") }(null == r ? void 0 : r.redirectURI) } catch (e) { if (this.mustUseOAuth) throw e; console.warn(e.message) } try { !function (e) { if (e && e.length > 0) { if (e.length > 50) throw new Qn("transactionId", e, "String must be between 1 and 50 characters"); return !0 } throw new Qn("transactionId", "".concat(e), "String must be between 1 and 50 characters") }(null == r ? void 0 : r.transactionId) } catch (e) { if (this.mustUseOAuth) throw e; console.warn(e.message) } } get preferOAuth() { return Boolean(Xi.PREFER_OAUTH_FLOW === this.featureFlagHandler.experimentGroup(Zi.CanUsePlaidOAuth)) } get mustUseOAuth() { return Xi.ENFORCE_OAUTH_FLOW === this.featureFlagHandler.experimentGroup(Zi.CanUsePlaidOAuth) } get plaidHandler() { if (!this.handler) { var e = new Sa("The plaid handler was not properly created.", this.methodType); throw this.errorLogger.captureException(e, this.session.instanceId, this.session.sessionId), new zn } return this.handler } set plaidHandler(e) { this.handler = e } tokenize(e) { var t = this; return Vs((function* () { try { if (t.throwIfDestroyed(), t.tokenizeInProgress) throw new pi([Gs]); if (!e || !e.accountHolderName) throw new Yn; if (!t.hasEventListener(In.ON_TOKENIZATION)) { var r = "Add event listener for '".concat(In.ON_TOKENIZATION, "' before calling tokenize."); if (t.mustUseOAuth) throw new pi([{ message: r, type: "INVALID_CONFIGURATION" }]); console.warn("".concat(r, " This will result in an error when using the Plaid OAuth flow.")) } var n; t.tokenizeInProgress = !0, t.preferOAuth || t.mustUseOAuth ? n = yield t.createOAuthPlaidLinkSession() : (console.warn("Using deprecated Plaid Link session without OAuth, please initialize ACH with 'redirectURI' and 'transactionId', and provide an event listener for \"".concat(In.ON_TOKENIZATION, '".')), n = yield t.createPlaidLinkSession()); var i = yield t.openPlaidLink(n.plaidLinkToken); if (i.status === Bs.SUCCESS && i.publicToken && i.selectedBankAccountId) { var a = yield t.requestAchBankNonce(e.accountHolderName, i.publicToken, i.selectedBankAccountId, n.gringottsSessionToken); return t.dispatchEvent(In.ON_TOKENIZATION, { tokenResult: a }), a } var o = { status: hn.CANCEL }; return t.dispatchEvent(In.ON_TOKENIZATION, { tokenResult: o }), o } catch (e) { throw t.dispatchEvent(In.ON_TOKENIZATION, { error: e }), e } }))() } destroy() { return this.status = Ms.DESTROYED, this.metricsHandler.logEvent(xa.Destroyed), this.handler && (this.handler.exit({ force: !0 }), this.handler.destroy(), this.deleteHandler()), Promise.resolve() } addEventListener(e, t) { this.metricsHandler.logEvent(xa.EventListenerAdded, e), super.addEventListener(e, t) } removeEventListener(e, t) { super.removeEventListener(e, t) } openPlaidLink(e) { var t = this.errorLogger, r = this.session, n = this.metricsHandler; this.handleFirstInteraction(); var i = new Promise(((i, a) => { var o = g.windowNavigationLanguage.split("-")[0]; ec.has(o) || (o = "en"), this.plaidHandler = this.Plaid.create({ clientName: "Square, Inc.", countryCodes: Js, env: y.PLAID_LINK_ENV, language: o, onEvent: (e, n) => { e !== In.ERROR || tc.has(n.error_type) || t.captureException(new Sa("PlaidErrorEvent: ".concat(JSON.stringify(n)), this.methodType), r.instanceId, r.sessionId), super.dispatchEvent(e, n) }, onExit: (e, a) => { e && (n.logEvent(La.ExternalSessionError), tc.has(e.error_type) || t.captureException(new Sa("PlaidErrorOnExit: ".concat(JSON.stringify(e), ", Metadata: ").concat(a), dn.ACH), r.instanceId, r.sessionId)), this.tokenizeInProgress = !1, this.deleteHandler(), i({ status: Bs.CANCEL }) }, onSuccess(e, o) { if (!o || !o.accounts || !o.accounts[0]) { n.logEvent(La.ExternalSessionError); var s = new Error("No account selected but expected account, metadata: ".concat(JSON.stringify(o))); return t.captureException(s, r.instanceId, r.sessionId), void a(s) } n.logEvent(La.ExternalSessionOK), i({ publicToken: e, selectedBankAccountId: o.accounts[0].id, status: Bs.SUCCESS }) }, product: Xs, token: e }) })); return n.logEvent(La.ExternalSessionStart), this.plaidHandler.open(), i } createPlaidLinkSession() { var e = this; return Vs((function* () { var t = { createPlaidLinkSessionRequest: { clientId: e.session.applicationId } }; try { return yield e.paymentMessenger.request(Hs.CREATE_PLAID_LINK_SESSION, t) } catch (t) { throw e.tokenizeInProgress = !1, t } }))() } createOAuthPlaidLinkSession() { var e = this; return Vs((function* () { var t = e.session; if (!t.locationId) throw new hi("locationId not defined when creating OAuth Plaid Link Session"); var r = y.PLAID_OAUTH_REDIRECT_URI, n = g.windowNavigationLanguage.slice(0, 2), i = { createOAuthPlaidLinkSessionRequest: { clientId: t.applicationId, locationId: t.locationId, redirectUri: r, languageCode: n } }; try { return yield e.paymentMessenger.request(Hs.CREATE_OAUTH_PLAID_LINK_SESSION, i) } catch (t) { throw e.tokenizeInProgress = !1, t } }))() } requestAchBankNonce(e, t, r, n) { var i = this; return Vs((function* () { var a = { accountHolderName: e, gringottsSessionToken: n, plaidPublicToken: t, selectedPlaidBankAccountId: r }, o = i.session, s = { bankNonceRequest: { clientId: o.applicationId, paymentMethodTrackingId: i.context.getPaymentMethodTrackingId(), plaidLinkData: a, sessionId: o.sessionId, websdkVersion: y.VERSION, websiteUrl: o.sourceUrl } }; try { var c = yield i.paymentMessenger.request(Hs.REQUEST_ACH_BANK_NONCE, s); return i.deleteHandler(), i.tokenizeInProgress = !1, yield i.context.updateSession(c.sessionId), i.context.setPaymentMethodTrackingId(c.paymentMethodTrackingId), i.wasFirstInteractionCalled = !1, { details: { bankAccount: c.accountDetails, method: i.methodType }, status: hn.OK, token: c.bankNonce } } catch (e) { throw i.deleteHandler(), i.tokenizeInProgress = !1, e instanceof pi ? e : new pi([da.UNKNOWN]) } }))() } deleteHandler() { delete this.handler } handleFirstInteraction() { this.wasFirstInteractionCalled || (this.wasFirstInteractionCalled = !0, this.metricsHandler.logEvent(Da.FirstInteraction)) } } r(5827), (zs = Ys || (Ys = {})).UNKNOWN = "unknown", zs.AMERICAN_EXPRESS = "americanExpress", zs.DISCOVER = "discover", zs.DISCOVER_DINERS = "discoverDiners", zs.JCB = "JCB", zs.MASTER_CARD = "masterCard", zs.UNION_PAY = "unionPay", zs.VISA = "visa", zs.SQUARE_GIFT_CARD_V2 = "squareGiftCardV2", zs.INTERAC = "interac", zs.SQUARE_CAPITAL_CARD = "squareCapitalCard", zs.EFTPOS = "eftpos", an.CARD_NUMBER, an.CVV, an.EXPIRATION_DATE, an.POSTAL_CODE, (Qs = Ks || (Ks = {})).CARD_BRAND_CHANGED = "cardBrandChanged", Qs.ERROR_CLASS_ADDED = "errorClassAdded", Qs.ERROR_CLASS_REMOVED = "errorClassRemoved", Qs.FOCUS_CLASS_ADDED = "focusClassAdded", Qs.FOCUS_CLASS_REMOVED = "focusClassRemoved", Qs.POSTAL_CODE_CHANGED = "postalCodeChanged", Qs.SET_POSTAL_COUNTRY = "setPostalCountry", Qs.ESCAPE = "escape", Qs.SUBMIT = "submit", ($s = Ws || (Ws = {})).ERROR = "error", $s.FOCUS = "focus", $s.UNKNOWN = "unknown", (Zs || (Zs = {})).THIRD_PARTY_GIFT_CARD = "thirdPartyGiftCard"; class nc { constructor(e) { this.options = e } format(e) { for (var t = [...e], r = "", n = 0; t.length > 0;)r += this.options.delimiterPositions.includes(n) ? this.options.delimiter : t.shift(), n += 1; return r } } r(9494); class ic { getName() { return "LuhnValdator" } isValid(e) { var t = String(e).replace(/\D/g, ""); if (!t) return !1; for (var r = 0, n = !1, i = t.length - 1; i >= 0; i--) { var a = Number.parseInt(t.charAt(i), 10); r += n ? ic.luhnDigits[a] : a, n = !n } return r % 10 == 0 } } ic.luhnDigits = [0, 2, 4, 6, 8, 1, 3, 5, 7, 9]; var ac = new RegExp(/\D/g); new no({ maxLength: 15, regexp: ac, replacement: "" }), new no({ maxLength: 19, regexp: ac, replacement: "" }), new no({ maxLength: 14, regexp: ac, replacement: "" }), new no({ maxLength: 16, regexp: ac, replacement: "" }), new no({ maxLength: 16, regexp: ac, replacement: "" }), new no({ maxLength: 16, regexp: ac, replacement: "" }), new no({ maxLength: 16, regexp: ac, replacement: "" }), new no({ maxLength: 19, regexp: ac, replacement: "" }), new no({ maxLength: 16, regexp: ac, replacement: "" }), new no({ maxLength: 255, regexp: new RegExp(/[^\dA-Za-z]/g), replacement: "" }), new nc({ delimiter: " ", delimiterPositions: [4, 11] }), new nc({ delimiter: " ", delimiterPositions: [4, 9, 14] }), new nc({ delimiter: " ", delimiterPositions: [4, 11] }), new nc({ delimiter: " ", delimiterPositions: [4, 9, 14] }), new nc({ delimiter: " ", delimiterPositions: [4, 9, 14] }), new nc({ delimiter: " ", delimiterPositions: [4, 9, 14] }), new nc({ delimiter: " ", delimiterPositions: [4, 9, 14] }), new nc({ delimiter: " ", delimiterPositions: [4, 9, 14] }), new nc({ delimiter: " ", delimiterPositions: [4, 9, 14] }), y.GET_PRODUCT_INFORMATION_ENDPOINT; var oc = "sq-focus", sc = "sq-error", cc = ".".concat(oc), uc = ".".concat(sc), lc = "::placeholder"; new Aa("IFrame does not exist"); var dc = ["top", "right", "bottom", "left"], pc = (r(3210), /^\d+\/\d+$/), hc = /^#([\dA-Fa-f]{3}|[\dA-Fa-f]{6})$/, fc = /^-\d*\.?\d+em$/, gc = /^-\d*\.?\d+pt$/, mc = /^-\d*\.?\d+px$/, vc = /^\d*\.?\d+em$/, Ec = /^\d*\.?\d+%$/, yc = /^\d*\.?\d+pt$/, _c = /^\d*\.?\d+px$/, Ac = /^\d*\.?\d+(?:dpi|dpcm|dppx|x)$/, Ic = /^rgb\((\s*\d{1,3},){2}\s*\d{1,3}\)$/, Sc = /^rgba\((\s*\d{1,3},){3}\s*(1|0*.\d*)\)$/, Cc = /\s(?![^(]*\))/, Oc = new Set(["screen", "all", "print", "speech"]), Tc = new Set(["and"]), Pc = new Set(["not", "only"]), Rc = new Set(["portrait", "landscape"]), Nc = new Set(["xx-small", "x-small", "small", "medium", "large", "x-large", "xx-large"]), wc = new Set(["aliceblue", "antiquewhite", "aqua", "aquamarine", "azure", "beige", "bisque", "black", "blanchedalmond", "blue", "blueviolet", "brown", "burlywood", "cadetblue", "chartreuse", "chocolate", "coral", "cornflowerblue", "cornsilk", "crimson", "cyan", "darkblue", "darkcyan", "darkgoldenrod", "darkgray", "darkgrey", "darkgreen", "darkkhaki", "darkmagenta", "darkolivegreen", "darkorange", "darkorchid", "darkred", "darksalmon", "darkseagreen", "darkslateblue", "darkslategray", "darkslategrey", "darkturquoise", "darkviolet", "deeppink", "deepskyblue", "dimgray", "dimgrey", "dodgerblue", "firebrick", "floralwhite", "forestgreen", "fuchsia", "gainsboro", "ghostwhite", "gold", "goldenrod", "gray", "grey", "green", "greenyellow", "honeydew", "hotpink", "indianred", "indigo", "ivory", "khaki", "lavender", "lavenderblush", "lawngreen", "lemonchiffon", "lightblue", "lightcoral", "lightcyan", "lightgoldenrodyellow", "lightgray", "lightgrey", "lightgreen", "lightpink", "lightsalmon", "lightseagreen", "lightskyblue", "lightslategray", "lightslategrey", "lightsteelblue", "lightyellow", "lime", "limegreen", "linen", "magenta", "maroon", "mediumaquamarine", "mediumblue", "mediumorchid", "mediumpurple", "mediumseagreen", "mediumslateblue", "mediumspringgreen", "mediumturquoise", "mediumvioletred", "midnightblue", "mintcream", "mistyrose", "moccasin", "navajowhite", "navy", "oldlace", "olive", "olivedrab", "orange", "orangered", "orchid", "palegoldenrod", "palegreen", "paleturquoise", "palevioletred", "papayawhip", "peachpuff", "peru", "pink", "plum", "powderblue", "purple", "rebeccapurple", "red", "rosybrown", "royalblue", "saddlebrown", "salmon", "sandybrown", "seagreen", "seashell", "sienna", "silver", "skyblue", "slateblue", "slategray", "slategrey", "snow", "springgreen", "steelblue", "tan", "teal", "thistle", "tomato", "transparent", "turquoise", "violet", "wheat", "white", "whitesmoke", "yellow", "yellowgreen"]), bc = new Set([100, 200, 300, 400, 500, 600, 700, 800, 900]), Dc = new Set(["100", "200", "300", "400", "500", "600", "700", "800", "900", "normal", "bold", "bolder", "lighter"]), Lc = new Set(["normal"]), xc = new Set(["smaller", "larger"]), Uc = new Set(["andale mono", "arial", "arial black", "arial narrow", "arial rounded mt bold", "avant garde", "baskerville", "big caslon", "bodoni mt", "book antiqua", "brush script mt", "calibri", "calisto mt", "cambria", "candara", "century gothic", "charcoal", "comic sans ms", "consolas", "copperplate", "copperplate gothic light", "courier", "courier new", "cursive", "didot", "fantasy", "franklin gothic medium", "futura", "garamond", "geneva", "georgia", "gill sans", "goudy old style", "helvetica", "helvetica neue", "hoefler text", "impact", "lucida bright", "lucida console", "lucida grande", "lucida sans unicode", "lucida sans typewriter", "monaco", "monospace", "optima", "palatino", "palatino linotype", "papyrus", "perpetua", "rockwell", "rockwell extra bold", "sans-serif", "segoe ui", "serif", "square market", "square sans text", "tahoma", "times", "times new roman", "trebuchet ms", "verdana"]), Mc = new Set(["none", "antialiased", "subpixel-antialiased"]), kc = new Set(["grayscale", "auto"]), Hc = new Set(["none"]); function Bc(e) { return null != e && e.split(/, ?(?![^(]*\))/).every((e => function (e) { if (null == e) return !1; if ("none" === e) return !0; var t = e.split(/ (?![^(]*\))/), r = 0; if ("inset" === t[0] && (t.shift(), r++), "inset" === t[t.length - 1]) { if (r > 0) return !1; t.pop() } for (var n = 0; n < 2; n++) { var i = t.shift(); if (void 0 === i || !Yc(i)) return !1 } switch (t.length) { case 0: return !0; case 1: return Wc(t[0]) || Kc(t[0]); case 2: return Kc(t[0]) && (Wc(t[1]) || zc(t[1])); case 3: return Kc(t[0]) && zc(t[1]) && Wc(t[2]); default: return !1 } }(e))) } function Gc(e) { return ["border-box", "content-box"].includes(e) } function Fc(e) { return e.split(" ").every((e => function (e) { return 0 === Number(e) || ou(e) || uu(e) }(e))) } function qc(e) { var t = e.split(" "); return !(0 === t.length || t.length > 4) && t.every(jc) } function jc(e) { return 0 === Number(e) || ou(e) || uu(e) } function Vc(e) { return 0 === Number(e) || ou(e) || uu(e) || su(e) || lu(e) } function Yc(e) { return 0 === Number(e) || au(e) || cu(e) } function zc(e) { return 0 === Number(e) || au(e) || cu(e) } function Kc(e) { return 0 === Number(e) || ou(e) || uu(e) } function Wc(e) { return null != e && (function (e) { return wc.has(e.toLowerCase()) }(e) || function (e) { return hc.test(e) }(e) || function (e) { return Ic.test(e) }(e) || function (e) { return Sc.test(e) }(e)) } function $c(e) { return null != e && (function (e) { return Nc.has(e.toLowerCase()) }(e) || function (e) { return xc.has(e.toLowerCase()) }(e) || ou(e) || du(e) || uu(e) || pu(e)) } function Qc(e) { return null !== e && e.split(", ").every((e => { return t = e.toLowerCase().trim().replace(/["']+/g, ""), Uc.has(t); var t })) } function Zc(e) { var t = Number(e); return Number.isNaN(t) ? Dc.has(e.toLowerCase()) : bc.has(t) } function Jc(e) { return "normal" === e || cu(e) || function (e) { return du(e) || function (e) { return gc.test(e) }(e) }(e) || au(e) } function Xc(e) { var t = Number(e); return !Number.isNaN(t) && t >= 0 || Lc.has(e) || uu(e) || ou(e) || du(e) || pu(e) } function eu(e) { return Mc.has(e) } function tu(e) { return kc.has(e) } function ru(e) { return Hc.has(e) } function nu(e) { if (null === e) return !1; var t = e.toString().split(" "); return !(t.length > 4) && t.every((e => function (e) { return ou(e) || uu(e) || pu(e) || 0 === Number(e) }(e))) } function iu(e) { if (!e.startsWith("(") || !e.endsWith(")")) return !1; var t = e.slice(1, -1), [r, n] = t.split(/: */); switch (r) { case "width": case "min-width": case "max-width": case "height": case "min-height": case "max-height": case "device-width": case "min-device-width": case "max-device-width": case "device-height": case "min-device-height": case "max-device-height": return ou(n) || uu(n) || pu(n); case "resolution": case "min-resolution": case "max-resolution": return function (e) { return Ac.test(e) }(n); case "aspect-ratio": case "min-aspect-ratio": case "max-aspect-ratio": case "device-aspect-ratio": case "min-device-aspect-ratio": case "max-device-aspect-ratio": return function (e) { return pc.test(e) }(n); case "color": case "color-index": case "monochrome": return void 0 === n; case "min-color": case "max-color": case "min-color-index": case "max-color-index": case "min-monochrome": case "max-monochrome": return function (e) { return Number(e) >= 0 }(n); case "orientation": return function (e) { return Rc.has(e) }(n); default: return !1 } } function au(e) { return ou(e) || su(e) } function ou(e) { return _c.test(e) } function su(e) { return mc.test(e) } function cu(e) { return uu(e) || lu(e) } function uu(e) { return vc.test(e) } function lu(e) { return fc.test(e) } function du(e) { return yc.test(e) } function pu(e) { return Ec.test(e) } var hu = function (e, t) { var r = (e => { switch (e) { case "border-color": case "background-color": case "color": case "-webkit-text-fill-color": return Wc; case "-webkit-box-shadow": case "box-shadow": return Bc; case "box-sizing": return Gc; case "font-family": return Qc; case "font-size": return $c; case "font-weight": return Zc; case "letter-spacing": return Jc; case "line-height": return Xc; case "padding": return nu; case "-webkit-font-smoothing": return eu; case "-moz-osx-font-smoothing": return tu; case "display": return ru; case "border-radius": return Fc; case "border-width": return qc; case "top": case "bottom": case "left": case "right": return Vc; case "width": return function (e) { return e }; default: return } })(e), n = r && r(t) || function (e) { return ["unset", "inherit", "revert", "initial"].includes(e) }(t); return n ? t : "" }, fu = function (e) { return !!(t = e).startsWith("@media") && t.slice("@media".length + 1, t.length).split(/, */).every((e => { var t = e.split(Cc); if (0 === t.length) return !1; var r = 0; if (!t[0].startsWith("(")) { var n = 0; if (Pc.has(t[0]) && (n = 1), t.length === n + 1) return Oc.has(t[n]); if (!Oc.has(t[n]) || !Tc.has(t[n + 1])) return !1; r = 2 + n } if ((t.length - r) % 2 == 0) return !1; for (var [i, a] of Object.entries(t.slice(r))) if (!(Number(i) % 2 == 0 ? iu(a) : Tc.has(a))) return !1; return !0 })); var t }; function gu(e, t, r) { var n = arguments.length > 3 && void 0 !== arguments[3] && arguments[3]; if (r.length > 0) { var i = r.includes(e); if (!i) throw new ci(e) } var a = ta.cssProperty(e), o = hu(a, t); if (0 === o.length) throw new ui(e, t); return n && (o += " !important"), ta.formatCSSKeyValuePair(a, o) } function mu(e, t, r) { var n = [], i = [], a = new Set(e.excludeProperties || []); for (var [o, s] of Object.entries(t)) if (!a.has(o)) { var c = s || ""; try { n.push(gu(o, c, r)) } catch (e) { i.push(e) } } if (i.length > 0) throw new di(i); return Object.fromEntries(e.toSelectors.map((function (e) { return [e, n] }))) } function vu(e, t, r) { var n = {}, i = []; if (e.forEach((function (e) { var { property: a, setAsImportant: o, toProperty: s, toSelectors: c, transformPropertyValue: u } = e, l = t[a]; if (l) { var d = u ? u(l) : l; try { var p = gu(s || a, d, s ? [...r, s] : r, o); c.forEach((e => { n[e] || (n[e] = []), n[e].push(p) })) } catch (e) { i.push(e) } } })), i.length > 0) throw new di(i); return n } function Eu(e) { var t = []; for (var [r, n] of Object.entries(e)) n && n.length > 0 && t.push("\n      ".concat(r, " { ").concat(n.join(" "), " }\n      ")); return t.join("") } function yu(e, t) { return !t && fu(e) } var _u = function (e, t) { var r = t.split(" "); switch (r.length) { case 1: return r[0]; case 2: switch (e) { case "top": case "bottom": return r[0]; default: return r[1] }case 3: switch (e) { case "top": return r[0]; case "bottom": return r[2]; default: return r[1] }case 4: switch (e) { case "top": return r[0]; case "right": return r[1]; case "bottom": return r[2]; case "left": return r[3]; default: return "" }default: return "" } }, Au = function e(t, r, n) { var i = arguments.length > 3 && void 0 !== arguments[3] && arguments[3], a = [], o = [...Object.keys(r.selectorMappings), ...Object.keys(r.selectorPropertyMappings || {})], s = new Set(o), c = new Set(Object.values(n)); Object.keys(t).forEach((e => { c.has(e) || yu(e, i) || a.push(new li(e)) })); var u = {}; function l(e) { for (var [t, r] of Object.entries(e)) u[t] || (u[t] = []), u[t].push(...r) } for (var d of s) { var p, h = t[d], f = r.allowedAttributes[d] || [], g = r.selectorMappings[d] || [], m = (null == r || null === (p = r.selectorPropertyMappings) || void 0 === p ? void 0 : p[d]) || []; if (h) { try { var v = mu(g, h, f); l(v) } catch (e) { e instanceof di && a.push(...e.errors) } try { var E = vu(m, h, f); l(E) } catch (e) { e instanceof di && a.push(...e.errors) } } } var y = Object.keys(t).filter((e => !s.has(e) && fu(e))); if (y.forEach((i => { try { var o = e(t[i], r, n, !0); u[i] = [o] } catch (e) { a.push(...e.errors) } })), a.length > 0) throw new di(a); return Eu(u) }, Iu = "sq-card-iframe-container", Su = "sq-card-wrapper", Cu = "sq-card-component", Ou = "sq-card-message", Tu = "sq-card-message-error", Pu = "sq-card-message-no-error", Ru = "sq-visible", Nu = ".".concat(Su), wu = ".".concat(Cu), bu = ".".concat(Iu), Du = "".concat(Nu).concat(cc), Lu = "".concat(Nu).concat(uc), xu = "".concat(Nu, " ").concat(wu), Uu = "".concat(Nu, " ").concat(bu), Mu = "".concat(Du, " ").concat(bu), ku = "".concat(Lu, " ").concat(bu), Hu = "input", Bu = "form", Gu = "label", Fu = ".sq-background-text", qu = ".sq-visible-background-text", ju = ".sq-card-message-error::before", Vu = ".sq-card-message-no-error::before", Yu = "".concat(bu).concat("::before"), zu = "".concat(Bu).concat(cc), Ku = "".concat(Bu).concat(uc), Wu = ("".concat(zu, " ").concat(Hu), "".concat(Hu).concat(uc), "".concat(zu, " ").concat(Hu).concat(lc), "".concat(Ku, " ").concat(Hu).concat(uc).concat(lc), "".concat(Bu, " ").concat(Hu).concat(lc), "".concat(Bu, " ").concat(Fu)), $u = ("".concat(Wu, " ").concat(qu), "".concat(zu, " ").concat(Gu), "".concat(Ku, " ").concat(Hu).concat(uc, " ~ ").concat(Gu), "".concat(zu, " ").concat(Fu, " ").concat(qu), "".concat(Ku, " ").concat(Hu).concat(uc, " ~ ").concat(Fu, " ").concat(qu), "".concat(Bu, " ").concat("#card-number-wrapper"), ["borderWidth"]); function Qu(e) { var t = ["".concat(e).concat(uc, " ").concat(Yu), "".concat(e).concat(cc, " ").concat(Yu)]; return dc.map((e => { return { property: "borderWidth", toProperty: e, toSelectors: t, transformPropertyValue: (r = e, function (e) { var t = _u(r, e); return "0" === t[0] ? t : "-".concat(t) }) }; var r })) } function Zu(e, t) { return Au(e, function (e) { var t = "#".concat(e); return { allowedAttributes: { [on.CARD_COMPONENT]: Ni, [on.CARD_COMPONENT_FOCUS]: wi, [on.CARD_COMPONENT_ERROR]: wi, [on.CARD_INPUT_HELPER_TEXT]: bi, [on.CARD_INPUT_HELPER_ICON]: Di, [on.CARD_INPUT_ERROR_TEXT]: bi, [on.CARD_INPUT_ERROR_ICON]: Di }, selectorMappings: { [on.CARD_COMPONENT]: { toSelectors: ["".concat(t).concat(Uu)] }, [on.CARD_COMPONENT_FOCUS]: { excludeProperties: $u, toSelectors: ["".concat(t).concat(Mu)] }, [on.CARD_COMPONENT_ERROR]: { excludeProperties: $u, toSelectors: ["".concat(t).concat(ku)] }, [on.CARD_INPUT_HELPER_TEXT]: { toSelectors: ["".concat(t, " ").concat(".sq-card-message-no-error")] }, [on.CARD_INPUT_HELPER_ICON]: { toSelectors: ["".concat(t, " ").concat(Vu)] }, [on.CARD_INPUT_ERROR_TEXT]: { toSelectors: ["".concat(t, " ").concat(".sq-card-message-error")] }, [on.CARD_INPUT_ERROR_ICON]: { toSelectors: ["".concat(t, " ").concat(ju)] } }, selectorPropertyMappings: { [on.CARD_INPUT]: [{ property: "backgroundColor", toSelectors: ["".concat(t).concat(Uu)] }], [on.CARD_COMPONENT]: [{ property: "borderRadius", toSelectors: ["".concat(t, " ").concat(Yu), "".concat(t).concat(xu)] }, { property: "borderWidth", toProperty: "width", toSelectors: ["".concat(t).concat(Uu)], transformPropertyValue: e => function (e) { var t = ["left", "right"].map((t => { var r = _u(t, e); return "0" === r && (r = "0px"), r })).join(" + "); return "calc(100% - (".concat(t, "))") }(e) }, ...Qu(t)], [on.CARD_COMPONENT_ERROR]: [{ property: "borderColor", toSelectors: ["".concat(t).concat(uc, " ").concat(Yu)] }, { property: "borderWidth", toSelectors: ["".concat(t).concat(uc, " ").concat(Yu)] }], [on.CARD_COMPONENT_FOCUS]: [{ property: "borderColor", toSelectors: ["".concat(t).concat(cc, " ").concat(Yu)] }, { property: "borderWidth", toSelectors: ["".concat(t).concat(cc, " ").concat(Yu)] }], [on.CARD_INPUT_ERROR_ICON]: [{ property: "color", toProperty: "backgroundColor", toSelectors: ["".concat(t, " ").concat(ju)] }], [on.CARD_INPUT_HELPER_ICON]: [{ property: "color", toProperty: "backgroundColor", toSelectors: ["".concat(t, " ").concat(Vu)] }] } } }(t), on) } on.CARD_INPUT, on.CARD_INPUT_FOCUS, on.CARD_INPUT_ERROR, on.CARD_INPUT_PLACEHOLDER, on.CARD_INPUT_FOCUS_PLACEHOLDER, on.CARD_INPUT_ERROR_PLACEHOLDER, on.CARD_INPUT, on.CARD_INPUT_FOCUS, on.CARD_INPUT_ERROR, on.CARD_INPUT_FOCUS_PLACEHOLDER, on.CARD_INPUT_ERROR_PLACEHOLDER, on.CARD_INPUT_PLACEHOLDER, on.CARD_COMPONENT, on.CARD_INPUT, on.CARD_INPUT_PLACEHOLDER, on.CARD_INPUT_FOCUS_PLACEHOLDER, on.CARD_INPUT_ERROR_PLACEHOLDER; var Ju = "background-text"; "sq-".concat(Ju), "sq-hidden-".concat(Ju), "sq-visible-".concat(Ju), an.CARD_NUMBER, "0".repeat(24), an.EXPIRATION_DATE, "0".repeat(4), an.CVV, "0".repeat(4), an.POSTAL_CODE; var Xu, el = [ci, ui, li, di, ei, hi], tl = [ti, li, ci, ui, di]; !function (e) { e.ANALYTICS_TOKEN = "_analyticsToken", e.LOCALE = "_locale", e.SESSION_ID = "_sessionId", e.TRANSLATION_OVERRIDES = "_translationOverrides", e.PAYMENTS_UI_INSTANCE_ID = "_paymentsUIInstanceId" }(Xu || (Xu = {})); class rl { constructor(e) { var { applePayMerchantIdentifier: t, cashAppPayMerchantIdentifier: r, applicationId: n, avt: i, hostname: a, locationId: o, instanceId: s, sessionId: c, sourceUrl: u, locale: l, paymentsUIInstanceId: d } = e; this.applicationId = n, this.locationId = o, this._sessionId = c, this.instanceId = s, this.applePayMerchantIdentifier = t, this.cashAppPayMerchantIdentifier = r, this.hostname = a, this.sourceUrl = u, this._locale = l, this.avt = i, this._paymentsUIInstanceId = d } get analyticsToken() { return this._analyticsToken } get paymentsUIInstanceId() { return this._paymentsUIInstanceId } get sessionId() { return this._sessionId } setSessionId(e) { this.setAttribute(Xu.SESSION_ID, e) } setTranslationOverrides(e) { this.setAttribute(Xu.TRANSLATION_OVERRIDES, e) } setLocale(e) { this.setAttribute(Xu.LOCALE, e) } setPaymentsUIInstanceId(e) { this.setAttribute(Xu.PAYMENTS_UI_INSTANCE_ID, e) } setAnalyticsToken(e) { this.setAttribute(Xu.ANALYTICS_TOKEN, e) } serialize() { return this.serialized || (this.serialized = { applePayMerchantIdentifier: this.applePayMerchantIdentifier || "", cashAppPayMerchantIdentifier: this.cashAppPayMerchantIdentifier || "", applicationId: this.applicationId, avt: this.avt, hostname: this.hostname, instanceId: this.instanceId, locale: this._locale, locationId: this.locationId, sessionId: this._sessionId, sourceUrl: this.sourceUrl }, this._analyticsToken && (this.serialized.analyticsToken = this._analyticsToken), this._translationOverrides && (this.serialized.translationOverrides = this._translationOverrides), this._paymentsUIInstanceId && (this.serialized.paymentsUIInstanceId = this._paymentsUIInstanceId)), this.serialized } setAttribute(e, t) { (this.isValueString(t) || e === Xu.TRANSLATION_OVERRIDES) && (this[e] = t), this.serialized = void 0 } isValueString(e) { return "string" == typeof e } } y.CARD_NONCE_ENDPOINT; var nl, il = [pi, ti], al = function (e, t) { var r = document.createElement("iframe"); return new Promise(((n, i) => { r.onerror = e => { i(e) }, r.onload = () => { n(r) }, Object.entries(e).forEach((e => { var [t, n] = e; r.setAttribute(t, n) })), t ? t.appendChild(r) : document.body.appendChild(r) })) }, ol = function (e) { for (; e.firstChild;)e.removeChild(e.firstChild) }; !function (e) { e.CONFIGURE = "configure", e.DESTROY = "destroy", e.LOAD_CARDS_FORM = "loadCardsForm", e.REQUEST_CARD_NONCE_IF_VALID_FORM = "requestCardNonceIfValidForm", e.SET_FOCUS = "setFocus", e.CLEAR = "clear", e.SET_ERROR = "setError" }(nl || (nl = {})); var sl = new Set(["DIV", "SPAN"]), cl = new Set(["DIV", "SPAN"]), ul = new Set(["DIV", "SPAN", "BUTTON"]); function ll(e, t) { var r; if (function (e) { return "string" == typeof e }(e)) { var n = document.querySelector(e); if (!n) throw new Gn(e); r = n } else { if (!(e instanceof HTMLElement)) throw new ni(e, t); if (r = e, !document.contains(r)) throw new Gn(r) } if (!t.has(r.nodeName)) throw new ni(r, t); return r } function dl(e) { return ll(e, sl) } function pl(e) { return ll(e, ul) } var hl = { addStyleElement: function (e, t, r, n) { if (hl.hasExistingStyleElement(t)) r && r(); else { var i = document.createElement("link"); r && (i.onload = r), n && (i.onerror = t => { n(new Error("Failed to load stylesheet at ".concat(e, ". The onerror callback was invoked."))) }), i.href = e, i.rel = "stylesheet", i.type = "text/css", i.id = t, document.head.appendChild(i) } }, hasExistingStyleElement: function (e) { return Boolean(document.getElementById(e)) } }, fl = hl; function gl(e, t) { var r = Object.keys(e); if (Object.getOwnPropertySymbols) { var n = Object.getOwnPropertySymbols(e); t && (n = n.filter((function (t) { return Object.getOwnPropertyDescriptor(e, t).enumerable }))), r.push.apply(r, n) } return r } function ml(e) { for (var t = 1; t < arguments.length; t++) { var r = null != arguments[t] ? arguments[t] : {}; t % 2 ? gl(Object(r), !0).forEach((function (t) { vl(e, t, r[t]) })) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(r)) : gl(Object(r)).forEach((function (t) { Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(r, t)) })) } return e } function vl(e, t, r) { return t in e ? Object.defineProperty(e, t, { value: r, enumerable: !0, configurable: !0, writable: !0 }) : e[t] = r, e } function El(e, t, r, n, i, a, o) { try { var s = e[a](o), c = s.value } catch (e) { return void r(e) } s.done ? t(c) : Promise.resolve(c).then(n, i) } function yl(e) { return function () { var t = this, r = arguments; return new Promise((function (n, i) { var a = e.apply(t, r); function o(e) { El(a, n, i, o, s, "next", e) } function s(e) { El(a, n, i, o, s, "throw", e) } o(void 0) })) } } var _l = "emptyMessage", Al = [an.CARD_NUMBER, an.EXPIRATION_DATE, an.CVV, an.POSTAL_CODE]; function Il(e) { return "".concat("single-card-wrapper", "-").concat(e) } function Sl(e, t) { var r = function (e) { return "".concat("sq-single-card-custom-styles", "-").concat(e) }(t), n = document.getElementById(r); null === n && ((n = document.createElement("style")).id = r, document.head.appendChild(n)), n.innerHTML = Zu(e, Il(t)) } var Cl = class extends ks { constructor(e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}; super(e), this.methodType = dn.CARD, this.postalCountry = Za.US, this.onResize = this.onResize.bind(this), this.id = Us(), this.iframeName = "".concat("single-card", "-").concat(this.id), this.paymentMessenger = new Fs(this.context), this.tokenizeInProcess = !1, this.inputLabelsIncluded = Boolean(t.includeInputLabels), this.initializeMessageBus(), this.errorList = new Set, this.updateCardDetailText = this.updateCardDetailText.bind(this), this.context.addLocaleChangedListener(this.updateCardDetailText), this.validateOptions(t), this.initialOptions = t, this.stylesLoadedPromise = new Promise(((e, t) => { this.resolveStylePromise = e, this.rejectStylePromise = t })) } configure() { var e = arguments, t = this; return yl((function* () { var r = e.length > 0 && void 0 !== e[0] ? e[0] : {}; t.throwIfNotAttached(), t.validateOptions(r), t.metricsHandler.logEvent(xa.ConfigUpdated, r), void 0 !== r.includeInputLabels && (t.inputLabelsIncluded = Boolean(r.includeInputLabels), t.onResize()), void 0 !== r.style && Sl(r.style, t.id); try { return void (yield t.paymentMessenger.request(nl.CONFIGURE, { includeInputLabels: t.inputLabelsIncluded, postalCode: r.postalCode, style: r.style, type: t.methodType })) } catch (e) { if (ta.isInstanceOf(e, tl)) throw e; throw t.errorLogger.captureException(e, t.session.instanceId, t.session.sessionId), new hi("configuring the Card Element") } }))() } destroy() { var e = this; return yl((function* () { var t = yield e.detachElement(Ms.DESTROYED, xa.Destroyed); return e.context.removeLocaleChangedListener(e.updateCardDetailText), t }))() } attach(e) { var t = this; return yl((function* () { var r; t.throwIfAlreadyAttached(), t.status = Ms.ATTACHED, t.metricsHandler.logEvent(Da.AttachStart), t.metricsHandler.logEvent(xa.Configured, t.initialOptions); try { r = dl(e) } catch (e) { throw t.metricsHandler.logEvent(Da.AttachError), t.status === Ms.ATTACHED && (t.status = Ms.DETACHED), e } try { return t.attachPromise = t.buildElementOnIframe(r), yield t.attachPromise, t.attachPromise = void 0, t.throwIfDestroyed(), t.element = r, window.addEventListener("resize", t.onResize), t.showCardElement(), t.onResize(), void t.metricsHandler.logEvent(Da.AttachOK) } catch (e) { if (t.status === Ms.ATTACHED && (t.status = Ms.DETACHED), t.metricsHandler.logEvent(Da.AttachError), ta.isInstanceOf(e, el)) throw e; throw t.errorLogger.captureException(e, t.session.instanceId, t.session.sessionId), new hi("attaching the Card Element") } }))() } focus(e) { var t = this; return yl((function* () { if (t.throwIfNotAttached(), !Object.values(an).includes(e)) throw new Wn(e); t.metricsHandler.logEvent(xa.Focused, e); try { return yield t.paymentMessenger.request(nl.SET_FOCUS, { field: e }) } catch (e) { t.errorLogger.captureException(e, t.session.instanceId, t.session.sessionId) } return !1 }))() } clear() { var e = this; return yl((function* () { e.throwIfNotAttached(); try { return yield e.paymentMessenger.request(nl.CLEAR) } catch (t) { e.errorLogger.captureException(t, e.session.instanceId, e.session.sessionId) } return e.metricsHandler.logEvent(xa.Clear), !1 }))() } detach() { return this.detachElement(Ms.DETACHED, xa.Detached) } addEventListener(e, t) { this.throwIfDestroyed(), this.metricsHandler.logEvent(xa.EventListenerAdded, e), super.addEventListener(e, t) } removeEventListener(e, t) { this.throwIfDestroyed(), super.removeEventListener(e, t) } tokenize() { var e = this; return yl((function* () { if (e.throwIfNotAttached(), e.tokenizeInProcess) throw new pi([Gs]); e.tokenizeInProcess = !0; try { var t = yield e.paymentMessenger.request(nl.REQUEST_CARD_NONCE_IF_VALID_FORM, { type: e.methodType }); return e.tokenizeInProcess = !1, e.context.setPaymentMethodTrackingId(t.paymentMethodTrackingId), yield e.context.updateSession(t.sessionId), function (e) { var { card: t, billingContact: r, cardNonce: n } = e; return { details: { card: t, method: dn.CARD, billing: r }, status: hn.OK, token: n } }(t) } catch (t) { if (e.tokenizeInProcess = !1, t instanceof ha) return { errors: t.errors, status: hn.INVALID }; throw ta.isInstanceOf(t, il) ? t : (e.errorLogger.captureException(t, e.session.instanceId, e.session.sessionId), fa()) } }))() } recalculateSize() { this.throwIfNotAttached(), this.metricsHandler.logEvent(xa.RecalculatedSize), this.onResize() } setError(e) { var t = this; return yl((function* () { if (t.throwIfNotAttached(), !Object.values(an).includes(e)) throw new Wn(e); t.metricsHandler.logEvent(xa.SetError, e); try { return yield t.paymentMessenger.request(nl.SET_ERROR, { field: e }) } catch (e) { t.errorLogger.captureException(e, t.session.instanceId, t.session.sessionId) } return !1 }))() } buildElementOnIframe(e) { var t = this; return yl((function* () { yield t.buildCardElement(e), yield t.paymentMessenger.request(nl.LOAD_CARDS_FORM, { configuration: ml(ml({}, t.initialOptions), {}, { type: t.methodType }), iframeName: t.iframeName }), yield t.stylesLoadedPromise }))() } validateOptions(e) { var t = { includeInputLabels: e => "boolean" == typeof e, postalCode: e => "string" == typeof e, style: e => "object" == typeof e }; Object.entries(e).forEach((e => { var [r, n] = e; if (void 0 === t[r]) throw new $n(r); if (t[r] && !t[r](n)) throw new Qn(r, n) })) } buildErrorMessage(e) { switch (e) { case an.CARD_NUMBER: return this.context.getLocaleString().paymentMethods.cards.errors.cardNumberError; case an.CVV: return this.context.getLocaleString().paymentMethods.cards.errors.cvvError; case an.EXPIRATION_DATE: return this.context.getLocaleString().paymentMethods.cards.errors.expirationDateError; case an.POSTAL_CODE: return this.context.getLocaleString().paymentMethods.cards.errors.postalCodeErrors[this.postalCountry]; default: return "" } } buildHelperMessage(e) { switch (e) { case an.CARD_NUMBER: return this.context.getLocaleString().paymentMethods.cards.helperText.cardNumber; case an.CVV: return this.context.getLocaleString().paymentMethods.cards.helperText.cvv; case an.EXPIRATION_DATE: return this.context.getLocaleString().paymentMethods.cards.helperText.expirationDate; case an.POSTAL_CODE: return this.context.getLocaleString().paymentMethods.cards.helperText.postalCodes[this.postalCountry]; default: return "" } } updateCardDetailText() { var e, t, r; this.cardDetail && (0 === this.errorList.size ? (e = null !== (r = this.focusedInput) && void 0 !== r ? r : _l, t = this.buildHelperMessage(e), this.cardDetail.classList.remove(Tu), this.cardDetail.classList.add(Pu)) : (e = Al.find((e => this.errorList.has(e))) || _l, t = this.buildErrorMessage(e), this.cardDetail.classList.add(Tu), this.cardDetail.classList.remove(Pu)), this.cardDetail.textContent !== t && (this.cardDetail.textContent = t), t.length > 0 ? this.cardDetail.classList.add(Ru) : this.cardDetail.classList.remove(Ru)) } addErrorMessage(e) { this.errorList.add(e), this.updateCardDetailText() } removeErrorMessage(e) { this.errorList.has(e) && (this.errorList.delete(e), this.updateCardDetailText()) } addFocusMessage(e) { this.focusedInput = e, this.updateCardDetailText() } removeFocusMessage(e) { this.focusedInput === e && (this.focusedInput = null), setTimeout((() => { null === this.focusedInput && this.updateCardDetailText() }), 50) } removeFocusClass() { setTimeout((() => { var e; this.focusedInput || null === (e = this.wrapperElement) || void 0 === e || e.classList.remove(oc) }), 50) } removeErrorClass() { var e; 0 === this.errorList.size && (null === (e = this.wrapperElement) || void 0 === e || e.classList.remove(sc)) } handleInputEvent(e) { var t, r, { data: n } = e, i = n.payload.body; switch (i.eventType) { case nn.ERROR_CLASS_ADDED: this.addErrorMessage(i.field), null === (t = this.wrapperElement) || void 0 === t || t.classList.add(sc); break; case nn.ERROR_CLASS_REMOVED: this.removeErrorMessage(i.field), this.removeErrorClass(); break; case nn.FOCUS_CLASS_ADDED: this.addFocusMessage(i.field), null === (r = this.wrapperElement) || void 0 === r || r.classList.add(oc); break; case nn.FOCUS_CLASS_REMOVED: this.removeFocusMessage(i.field), this.removeFocusClass() }super.dispatchEvent(i.eventType, i) } handleSetPostalCountry(e) { var { data: t } = e; this.postalCountry = t.payload.body.postalCountry } initializeMessageBus() { var e = this.handleInputEvent.bind(this), t = this.handleSetPostalCountry.bind(this), r = { [Ks.SET_POSTAL_COUNTRY]: t, [Ks.FOCUS_CLASS_ADDED]: e, [Ks.FOCUS_CLASS_REMOVED]: e, [Ks.ERROR_CLASS_ADDED]: e, [Ks.ERROR_CLASS_REMOVED]: e, [Ks.CARD_BRAND_CHANGED]: e, [Ks.POSTAL_CODE_CHANGED]: e, [Ks.SUBMIT]: e, [Ks.ESCAPE]: e }; this.paymentMessenger.initializeMessageBus(r) } buildCardIframe(e) { return al({ frameborder: "0", height: "0px", name: this.iframeName, scrolling: "no", src: y.SINGLE_CARD_IFRAME, width: "100%" }, e) } hideCardElement() { this.wrapperElement && this.wrapperElement.setAttribute("style", "display: none;") } showCardElement() { this.wrapperElement && this.wrapperElement.removeAttribute("style") } buildCardElement(e) { var t = this; return yl((function* () { var r; t.wrapperElement = document.createElement("div"), t.wrapperElement.id = Il(t.id), t.wrapperElement.classList.add(Su), t.hideCardElement(), t.cardDetail = document.createElement("span"), t.cardDetail.classList.add(Ou), e.appendChild(t.wrapperElement), t.iframeContainer = document.createElement("div"), t.iframeContainer.classList.add(Iu), t.wrapperElement.appendChild(t.iframeContainer), t.iframe = yield t.buildCardIframe(t.iframeContainer), t.iframe.classList.add(Cu), t.wrapperElement.appendChild(t.cardDetail), fl.addStyleElement(y.SINGLE_CARD_WRAPPER_STYLES, "sq-single-card-styles", t.resolveStylePromise, t.rejectStylePromise), null !== (r = t.initialOptions) && void 0 !== r && r.style && Sl(t.initialOptions.style, t.id) }))() } onResize(e) { if (this.iframe && this.wrapperElement && this.iframeContainer && (this.lastResizeWidth = this.iframe.clientWidth, !this.currentResizeTimeout)) { var t = e => { if (this.wrapperElement && this.iframe && this.iframeContainer) { var t = this.inputLabelsIncluded ? 62 : 48; e <= 482 && (t = 2 * t + 1), this.iframeContainer.style.height = "".concat(Math.round(t), "px"), this.iframe.height = "".concat(Math.round(t), "px") } }; t(this.lastResizeWidth || 0), this.currentResizeTimeout = window.setTimeout((() => { t(this.lastResizeWidth || 0), this.currentResizeTimeout = void 0 }), 100) } } detachElement(e, t) { var r = this; return yl((function* () { r.throwIfDestroyed(); var n = r.status; if (r.status = e, r.attachPromise) try { yield r.attachPromise } catch (e) { } try { var i = yield r.paymentMessenger.request(nl.DESTROY); return r.element && (ol(r.element), window.removeEventListener("resize", r.onResize)), r.metricsHandler.logEvent(t), i } catch (e) { throw r.status = n, e } }))() } }; function Ol(e) { return { detail: "Received an error in redirectURI coming back from Cash App", message: "Received an error in redirect from Cash App: ".concat(e), type: "UNKNOWN" } } r(9601); var Tl, Pl = function (e) { window.localStorage && window.localStorage.removeItem(e) }, Rl = function (e) { if (window.localStorage) { var t, r = window.localStorage.getItem(e); if (!r) return null; try { t = JSON.parse(r) } catch (e) { return null } return { key: e, value: t } } return null }, Nl = function (e) { window.localStorage && window.localStorage.setItem(e.key, JSON.stringify(e.value)) }; !function (e) { e.REQUEST_CASH_APP_AUTH = "REQUEST_CASH_APP_AUTH", e.REQUEST_CASH_APP_CUSTOMER = "REQUEST_CASH_APP_CUSTOMER", e.REQUEST_CASH_APP_CREATE_WALLET_TOKEN = "REQUEST_CASH_APP_CREATE_WALLET_TOKEN" }(Tl || (Tl = {})); var wl = ["state", "code", "access_token"], bl = new Set(["iPhone Simulator", "iPod Simulator", "iPhone", "iPod"]), Dl = { CASH_APP_OAUTH_PARAMS: wl, extractCashAppParamsFromURI: function (e, t) { var r = new URL(e), n = 0, i = []; wl.forEach((e => { r.searchParams.get(e) && (n++, i.push(e), r.searchParams.delete(e)) })); var a = r.searchParams.get("error"); return a && r.searchParams.delete("error"), !a && n > 0 && n !== wl.length && t.captureException(new Aa("redirectURI: removed [".concat(i.toString(), "] but not all of Cash App OAuth params [").concat(wl.toString(), "]"))), r.toString() }, findAndRemoveQueryParams: function (e, t) { var r = {}; if (!window.URLSearchParams) return r; var n = new URLSearchParams(e), i = t.length, a = 0; if (t.forEach((e => { r[e] = n.get(e), r[e] && a++ })), i === a) { var o = new URLSearchParams(e); t.forEach((e => { o.delete(e) })); var s = "?".concat(o.toString()), c = g.windowHash; c && (s += "".concat(c)), g.replaceWindowState(s) } return r }, isIOS: function () { return bl.has(window.navigator.platform) || /iPhone|iPod/.test(navigator.userAgent) && "ontouchend" in document } }; class Ll extends Nn { constructor() { super("Cash Client: QR Code Image URL is not valid"), this.name = "InvalidQrCodeUrlError", Object.setPrototypeOf(this, Ll.prototype) } } function xl(e, t, r, n, i, a, o) { try { var s = e[a](o), c = s.value } catch (e) { return void r(e) } s.done ? t(c) : Promise.resolve(c).then(n, i) } function Ul(e) { return function () { var t = this, r = arguments; return new Promise((function (n, i) { var a = e.apply(t, r); function o(e) { xl(a, n, i, o, s, "next", e) } function s(e) { xl(a, n, i, o, s, "throw", e) } o(void 0) })) } } class Ml { constructor() { this.stylesLoadedPromise = new Promise(((e, t) => { this.resolveStylePromise = e, this.rejectStylePromise = t })), fl.addStyleElement(y.CASH_APP_STYLES, "sq-cash-app-styles", this.resolveStylePromise, this.rejectStylePromise) } createCashAppButton(e) { var t = this; return Ul((function* () { yield t.stylesLoadedPromise; var r, n = document.createElement("button"), i = document.createElement("img"); return i.setAttribute("src", (r = e.theme === Ii.DARK ? "fff" : "000", "data:image/svg+xml,%3Csvg width='143' height='22' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M13.027 2c2.008 0 3.012 0 4.092.342a4.247 4.247 0 012.54 2.539C20 5.96 20 6.965 20 8.973v6.054c0 2.008 0 3.012-.342 4.092a4.247 4.247 0 01-2.539 2.54C16.04 22 15.035 22 13.027 22H6.973c-2.008 0-3.012 0-4.092-.342A4.247 4.247 0 01.34 19.12C0 18.04 0 17.035 0 15.027V8.973c0-2.008 0-3.012.342-4.092A4.248 4.248 0 012.88 2.34C3.96 2 4.965 2 6.973 2h6.054z' fill='%2300D64F'/%3E%3Cg clip-path='url(%23clip0)'%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M10.411 8.757c.967 0 1.894.391 2.5.929a.38.38 0 00.525-.01l.72-.732a.376.376 0 00-.017-.547 5.695 5.695 0 00-1.931-1.086l.226-1.076a.377.377 0 00-.37-.455h-1.392a.377.377 0 00-.369.299l-.204.957C8.25 7.128 6.68 8.05 6.68 9.946c0 1.64 1.298 2.344 2.668 2.83 1.297.487 1.982.667 1.982 1.352 0 .703-.684 1.117-1.694 1.117-.92 0-1.885-.303-2.633-1.04a.376.376 0 00-.528-.002l-.774.764a.38.38 0 00.002.542c.604.586 1.368 1.01 2.24 1.248l-.212.997a.378.378 0 00.366.456l1.395.01a.377.377 0 00.372-.3l.201-.958c2.216-.137 3.572-1.341 3.572-3.104 0-1.622-1.351-2.307-2.992-2.866-.937-.343-1.748-.577-1.748-1.28 0-.684.757-.955 1.514-.955z' fill='%23fff'/%3E%3C/g%3E%3Cpath d='M37.316 8.99l.942-.592c.296-.192.365-.436.156-.715-1.167-1.585-2.858-2.352-4.775-2.352-3.572 0-6.03 2.631-6.03 6.43 0 3.834 2.458 6.466 6.083 6.466 2.091 0 3.677-.89 4.792-2.458.192-.296.122-.54-.174-.714l-.959-.558c-.278-.157-.522-.104-.714.157-.662.924-1.603 1.499-2.928 1.499-2.283 0-3.694-1.795-3.694-4.392 0-2.561 1.394-4.356 3.66-4.356 1.202 0 2.195.47 2.91 1.429.209.261.453.33.731.156zm8.91 9.01h1.045c.331 0 .523-.192.523-.523v-5.855c0-2.144-1.516-3.032-3.677-3.032-1.255 0-2.474.33-3.415.836-.297.157-.349.418-.21.715l.332.68c.156.313.4.365.714.208.767-.383 1.673-.592 2.405-.592.75 0 1.638.209 1.638.976 0 .871-1.133.958-2.457 1.15-1.238.174-3.242.558-3.242 2.806 0 1.812 1.308 2.84 3.19 2.84 1.272 0 2.073-.453 2.63-1.185v.488c0 .314.193.488.524.488zm-.645-4.548v1.045c0 1.377-.993 1.97-2.056 1.97-.854 0-1.447-.384-1.447-1.203 0-.889.697-1.098 1.499-1.255.819-.14 1.586-.244 2.004-.557zm4.651 2.248l-.505.592c-.209.262-.209.523.052.75.924.749 2.179 1.167 3.643 1.167 2.422 0 3.955-1.185 3.955-3.102 0-1.812-1.394-2.44-3.59-2.823-1.028-.174-2.056-.314-2.056-1.046 0-.662.732-.906 1.569-.906.906 0 1.742.297 2.335.715.261.209.523.209.732-.053l.488-.575c.226-.261.226-.522-.053-.731-.784-.593-1.934-1.098-3.415-1.098-1.987 0-3.73.854-3.73 2.875 0 1.934 1.639 2.492 3.329 2.788 1.603.28 2.265.418 2.265 1.116 0 .766-.732 1.08-1.707 1.08-.872 0-1.813-.227-2.562-.802-.279-.209-.54-.209-.75.053zM59.76 18h1.167c.331 0 .523-.192.523-.523v-4.67c0-1.394.906-2.23 2.091-2.23 1.255 0 1.569.888 1.569 1.864v5.036c0 .331.191.523.522.523H66.8c.331 0 .523-.192.523-.523v-5.542c0-1.969-1.133-3.345-3.067-3.345-1.22 0-2.214.54-2.806 1.359V6.08c0-.33-.192-.523-.523-.523H59.76c-.332 0-.523.192-.523.523v11.397c0 .331.191.523.523.523zm23.533 0h1.498c.384 0 .558-.244.419-.61L80.992 5.976c-.104-.297-.296-.419-.592-.419h-1.865c-.296 0-.488.122-.592.419L73.708 17.39c-.14.366.035.61.418.61h1.412c.296 0 .505-.14.592-.418l.907-2.667h4.757l.906 2.667c.087.279.296.418.593.418zM79.44 7.579l1.76 5.402h-3.59l1.83-5.402zm9.05 1.22h-1.167c-.331 0-.523.191-.523.523v11.187c0 .331.192.523.523.523h1.168c.33 0 .522-.192.522-.523v-3.694c.645.941 1.69 1.394 2.841 1.394 2.51 0 4.13-2.091 4.13-4.827 0-2.719-1.62-4.792-4.13-4.792-1.133 0-2.196.435-2.84 1.376v-.644c0-.332-.192-.523-.523-.523zm.523 4.583c0-1.586.802-2.858 2.37-2.858 1.534 0 2.283 1.29 2.283 2.858 0 1.586-.749 2.893-2.282 2.893-1.551 0-2.37-1.29-2.37-2.893zm10.544-4.583H98.39c-.331 0-.523.191-.523.523v11.187c0 .331.192.523.523.523h1.168c.33 0 .522-.192.522-.523v-3.694c.645.941 1.691 1.394 2.841 1.394 2.509 0 4.13-2.091 4.13-4.827 0-2.719-1.621-4.792-4.13-4.792-1.133 0-2.196.435-2.841 1.376v-.644c0-.332-.191-.523-.522-.523zm.522 4.583c0-1.586.802-2.858 2.37-2.858 1.534 0 2.283 1.29 2.283 2.858 0 1.586-.749 2.893-2.283 2.893-1.551 0-2.37-1.29-2.37-2.893zm16.199.122h2.962c2.841 0 4.462-1.569 4.462-3.973 0-2.388-1.638-3.974-4.462-3.974h-4.757c-.331 0-.523.192-.523.523v11.397c0 .331.192.523.523.523h1.272c.331 0 .523-.192.523-.523v-3.973zm2.945-2.109h-2.945V7.666h2.945c1.377 0 2.126.662 2.126 1.847 0 1.203-.749 1.882-2.126 1.882zM130.979 18h1.045c.332 0 .523-.192.523-.523v-5.855c0-2.144-1.516-3.032-3.677-3.032-1.255 0-2.474.33-3.415.836-.297.157-.349.418-.21.715l.332.68c.156.313.4.365.714.208.767-.383 1.673-.592 2.405-.592.749 0 1.638.209 1.638.976 0 .871-1.133.958-2.457 1.15-1.237.174-3.241.558-3.241 2.806 0 1.812 1.307 2.84 3.189 2.84 1.272 0 2.073-.453 2.631-1.185v.488c0 .314.192.488.523.488zm-.645-4.548v1.045c0 1.377-.993 1.97-2.056 1.97-.854 0-1.447-.384-1.447-1.203 0-.889.697-1.098 1.499-1.255.819-.14 1.586-.244 2.004-.557zm4.588 6.238l-.21.785c-.087.33.018.575.332.644.244.053.557.087.941.087 1.533 0 2.387-.644 3.311-3.084l3.311-8.713c.139-.366-.035-.61-.419-.61h-1.272c-.296 0-.488.14-.592.418l-2.057 5.977-2.073-5.977c-.105-.279-.297-.418-.593-.418h-1.394c-.383 0-.54.244-.401.61l3.311 8.452c-.418 1.115-.749 1.498-1.411 1.498-.105 0-.227 0-.331-.035-.209-.052-.366.053-.453.366z' fill='%23".concat(r, "'/%3E%3C/svg%3E"))), n.classList.add("sq-cash-button", function (e) { switch (e) { case Si.ROUNDED: return "sq-cash-button-rounded"; case Si.SEMIROUNDED: return "sq-cash-button-semi-rounded"; default: return "sq-cash-button-squared" } }(e.shape), function (e) { return e === Ii.DARK ? "sq-cash-button-dark" : "sq-cash-button-light" }(e.theme)), n.appendChild(i), n }))() } createQrCodeContainer(e) { var t = this; return Ul((function* () { if (yield t.stylesLoadedPromise, !ta.isValidUrl(e)) throw new Ll; var r = new URL(e); r.searchParams.set("rounded", "0"); var n = document.createElement("div"); n.classList.add("sq-cash-qr-container"); var i = document.createElement("div"); i.classList.add("col-left"); var a = document.createElement("div"); a.classList.add("col-right"); var o = document.createElement("div"); o.classList.add("sq-cash-qr-instruction"), o.innerHTML = "<div><h3>Cash App Pay</h3><span>Scan the QR Code to check out</span></div>"; var s = document.createElement("div"), c = document.createElement("img"); s.classList.add("sq-cash-qr-guide"), c.setAttribute("src", "data:image/svg+xml,%3Csvg width='133' height='109' viewBox='0 0 133 109' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cg clip-path='url(%23clip0)'%3E%3Crect x='6.51207' y='2.51207' width='122.976' height='125.976' rx='14.9276' fill='%2300B843' stroke='black' stroke-width='4.97585'/%3E%3Cg clip-path='url(%23clip1)'%3E%3Cpath d='M59.7669 79.5683C60.3043 79.5683 60.6028 79.2399 60.6028 78.6727V78.1054C64.7527 77.8069 67.1112 75.0602 67.1112 71.7164C67.1112 67.5964 63.5883 66.1037 60.6028 65.3275V59.5953C61.7373 59.8341 62.633 60.3118 63.4391 61.1179C63.8272 61.506 64.2451 61.5956 64.693 61.297L65.8872 60.5506C66.3947 60.2521 66.5141 59.7744 66.126 59.3266C64.693 57.595 62.6927 56.6695 60.6028 56.4306V55.6843C60.6028 55.2066 60.3043 54.9677 59.7669 54.9677C59.2295 54.9677 58.9011 55.2961 58.9011 55.8634V56.3709C55.1692 56.5202 52.4524 58.7892 52.4524 62.4315C52.4524 66.7008 56.244 68.104 58.9011 68.7309V75.0005C57.5277 74.8512 56.1544 74.284 55.1095 72.8509C54.7512 72.3434 54.393 72.224 53.8854 72.5524L52.4822 73.4182C51.9747 73.7466 51.8553 74.1646 52.1837 74.6423C53.6764 76.6724 56.0051 77.9263 58.9011 78.1353V78.8518C58.9011 79.2996 59.2295 79.5683 59.7669 79.5683ZM56.035 62.133C56.035 60.4312 57.3486 59.5953 58.9011 59.4759V64.9095C57.2889 64.4617 56.035 63.775 56.035 62.133ZM63.6182 72.0449C63.6182 73.7167 62.5434 74.8811 60.6028 75.0602V69.1489C62.4837 69.6863 63.6182 70.3431 63.6182 72.0449Z' fill='white'/%3E%3Cpath d='M84.4025 67.1785C84.4025 61.4761 82.4619 56.1022 76.8491 56.1022C71.2065 56.1022 69.2958 61.4761 69.2958 67.1785C69.2958 72.8509 71.2065 78.195 76.8491 78.195C82.4619 78.195 84.4025 72.8509 84.4025 67.1785ZM80.372 67.1486C80.372 71.5672 79.5361 74.9408 76.8491 74.9408C74.1025 74.9408 73.2964 71.5672 73.2964 67.1486C73.2964 62.7301 74.1025 59.3863 76.8491 59.3863C79.5361 59.3863 80.372 62.7301 80.372 67.1486Z' fill='white'/%3E%3C/g%3E%3Cg filter='url(%23filter0_d)'%3E%3Ccircle cx='21.7048' cy='28.7714' r='21.7048' fill='%2300D64F'/%3E%3C/g%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M15.6143 24.2473C15.5832 24.6287 15.5824 25.1239 15.5824 25.8616V26.8927H13.6492V25.8616V25.8224C13.6492 25.134 13.6492 24.5594 13.6875 24.0899C13.7275 23.6003 13.814 23.1407 14.0355 22.706C14.3753 22.0391 14.9175 21.4969 15.5844 21.1571C16.0191 20.9356 16.4787 20.8491 16.9683 20.8091C17.4378 20.7708 18.0123 20.7708 18.7007 20.7708L18.7008 20.7708L18.74 20.7708H19.7711V22.704H18.74C18.0023 22.704 17.5071 22.7048 17.1258 22.7359C16.7557 22.7662 16.5788 22.8201 16.4621 22.8796C16.1589 23.0341 15.9125 23.2805 15.758 23.5836C15.6985 23.7004 15.6446 23.8773 15.6143 24.2473ZM24.239 22.704C24.9768 22.704 25.472 22.7048 25.8533 22.7359C26.2233 22.7662 26.4003 22.8201 26.517 22.8796C26.8201 23.0341 27.0666 23.2805 27.221 23.5836C27.2805 23.7004 27.3345 23.8773 27.3647 24.2473C27.3959 24.6287 27.3966 25.1239 27.3966 25.8616V26.8927H29.3299V25.8616L29.3299 25.8224V25.8223V25.8223V25.8223C29.3299 25.1339 29.3299 24.5593 29.2915 24.0899C29.2515 23.6003 29.165 23.1407 28.9436 22.706C28.6038 22.0391 28.0616 21.4969 27.3947 21.1571C26.96 20.9356 26.5003 20.8491 26.0107 20.8091C25.5413 20.7708 24.9667 20.7708 24.2782 20.7708H24.239H23.208V22.704H24.239ZM27.3966 31.3606C27.3966 32.0984 27.3959 32.5935 27.3647 32.9749C27.3345 33.3449 27.2805 33.5219 27.221 33.6386C27.0666 33.9417 26.8201 34.1882 26.517 34.3426C26.4003 34.4021 26.2233 34.4561 25.8533 34.4863C25.472 34.5175 24.9768 34.5182 24.239 34.5182H23.208V36.4514H24.239L24.2782 36.4514H24.2784H24.2784H24.2784C24.9667 36.4515 25.5413 36.4515 26.0107 36.4131C26.5003 36.3731 26.96 36.2866 27.3947 36.0651C28.0616 35.7253 28.6038 35.1831 28.9436 34.5162C29.165 34.0816 29.2515 33.6219 29.2915 33.1323C29.3299 32.6629 29.3299 32.0883 29.3299 31.3999V31.3999V31.3998V31.3998L29.3299 31.3606V30.3295H27.3966V31.3606ZM18.74 34.5182C18.0023 34.5182 17.5071 34.5175 17.1258 34.4863C16.7557 34.4561 16.5788 34.4021 16.4621 34.3426C16.1589 34.1882 15.9125 33.9417 15.758 33.6386C15.6986 33.5219 15.6446 33.3449 15.6143 32.9749C15.5832 32.5935 15.5824 32.0984 15.5824 31.3606L15.5824 30.3295H13.6492V31.3606V31.3998V31.3999C13.6492 32.0883 13.6492 32.6629 13.6875 33.1323C13.7275 33.6219 13.814 34.0816 14.0355 34.5162C14.3753 35.1831 14.9175 35.7253 15.5844 36.0651C16.0191 36.2866 16.4787 36.3731 16.9683 36.4131C17.4378 36.4515 18.0124 36.4515 18.7008 36.4514H18.7008L18.74 36.4514H19.7711V34.5182L18.74 34.5182Z' fill='white'/%3E%3Cpath d='M35.4841 2.48792C56.4982 2.48792 83.1989 2.48792 104.213 2.48792V4.97658C103.975 4.97854 103.824 4.98566 103.693 5.0117C102.953 5.15894 102.375 5.73757 102.227 6.47776C102.192 6.65801 102.192 6.87476 102.192 7.30828C102.192 7.36349 102.192 7.41522 102.192 7.46377C102.191 7.84292 102.188 8.06738 102.173 8.26281C101.932 11.4847 99.3708 14.0459 96.1488 14.2873C95.9051 14.3056 95.6164 14.3056 95.0388 14.3056H44.6583C44.0807 14.3056 43.7919 14.3056 43.5483 14.2873C40.3263 14.0459 37.7652 11.4847 37.5238 8.26281C37.5091 8.06738 37.5062 7.84292 37.5054 7.46377L37.5055 7.30828C37.5055 6.87476 37.5055 6.65801 37.4697 6.47776C37.3224 5.73757 36.7438 5.15894 36.0036 5.0117C35.8727 4.98566 35.7225 4.97854 35.4841 4.97658V2.48792Z' fill='black'/%3E%3C/g%3E%3Cdefs%3E%3Cfilter id='filter0_d' x='-2.01905' y='6.05713' width='47.4476' height='47.4476' filterUnits='userSpaceOnUse' color-interpolation-filters='sRGB'%3E%3CfeFlood flood-opacity='0' result='BackgroundImageFix'/%3E%3CfeColorMatrix in='SourceAlpha' type='matrix' values='0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0'/%3E%3CfeOffset dy='1.00952'/%3E%3CfeGaussianBlur stdDeviation='1.00952'/%3E%3CfeColorMatrix type='matrix' values='0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.06 0'/%3E%3CfeBlend mode='normal' in2='BackgroundImageFix' result='effect1_dropShadow'/%3E%3CfeBlend mode='normal' in='SourceGraphic' in2='effect1_dropShadow' result='shape'/%3E%3C/filter%3E%3CclipPath id='clip0'%3E%3Crect width='133' height='109' fill='white'/%3E%3C/clipPath%3E%3CclipPath id='clip1'%3E%3Crect x='11.5378' y='4.97597' width='116.622' height='252.524' rx='12.4396' fill='white'/%3E%3C/clipPath%3E%3C/defs%3E%3C/svg%3E"), s.appendChild(c), i.appendChild(o), i.appendChild(s); var u = document.createElement("img"); return u.classList.add("sq-cash-qr-code"), u.setAttribute("src", r.toString()), a.appendChild(u), n.appendChild(i), n.appendChild(a), n }))() } } function kl(e, t, r) { return { details: { cashApp: { cashtag: e, transactionId: t }, method: dn.CASH_APP }, status: hn.OK, token: r } } function Hl(e, t) { var r = Object.keys(e); if (Object.getOwnPropertySymbols) { var n = Object.getOwnPropertySymbols(e); t && (n = n.filter((function (t) { return Object.getOwnPropertyDescriptor(e, t).enumerable }))), r.push.apply(r, n) } return r } function Bl(e) { for (var t = 1; t < arguments.length; t++) { var r = null != arguments[t] ? arguments[t] : {}; t % 2 ? Hl(Object(r), !0).forEach((function (t) { Gl(e, t, r[t]) })) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(r)) : Hl(Object(r)).forEach((function (t) { Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(r, t)) })) } return e } function Gl(e, t, r) { return t in e ? Object.defineProperty(e, t, { value: r, enumerable: !0, configurable: !0, writable: !0 }) : e[t] = r, e } function Fl(e, t, r, n, i, a, o) { try { var s = e[a](o), c = s.value } catch (e) { return void r(e) } s.done ? t(c) : Promise.resolve(c).then(n, i) } function ql(e) { return function () { var t = this, r = arguments; return new Promise((function (n, i) { var a = e.apply(t, r); function o(e) { Fl(a, n, i, o, s, "next", e) } function s(e) { Fl(a, n, i, o, s, "throw", e) } o(void 0) })) } } var jl = "sq-cash-app-redirect-payment-method-tracking-id"; class Vl extends ks { constructor(e, t) { if (super(e), this.methodType = dn.CASH_APP, this.preloadedQRImage = new Image, this.authTimeoutId = -1, this.elements = { button: null, qrCode: null }, this.isCashAppNativePlatform = g.isAndroid() || Dl.isIOS(), this.wasFirstInteractionCalled = !1, this.paymentMethodMessenger = new Fs(this.context), this.cashAppClient = new Ml, !this.session.locationId) throw new Vn("locationId must be provided for Cash App"); if (this.locationId = this.session.locationId, function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1]; if (!e.redirectURI) throw new Vn("redirectURI missing"); if (!e.transactionId) throw new Vn("transactionId missing"); if (t) { if (!e.totalTransactionAmount) throw new Vn("totalTransactionAmount required"); if (!Number.isInteger(e.totalTransactionAmount.amount) || e.totalTransactionAmount.amount <= 0) throw new Vn("totalTransactionAmount.amount must be a positive integer") } }(t), t.transactionId.length > 50) throw new Vn("transactionId too long. Should be less than ".concat(50, " characters.")); var r = Dl.extractCashAppParamsFromURI(t.redirectURI, e.errorLogger); this.fetchAuthURLs(this.locationId, r, t.transactionId, t.totalTransactionAmount) } get willRedirect() { return this.isCashAppNativePlatform } destroy() { return this.metricsHandler.logEvent(xa.Destroyed), window.clearTimeout(this.authTimeoutId), Promise.resolve() } attachAll(e, t) { var r = this; return ql((function* () { r.metricsHandler.logEvent(Da.AttachStart); try { if (e.button) { var n = yield r.cashAppClient.createCashAppButton(Object.assign({ shape: Si.ROUNDED, theme: Ii.DARK }, null == t ? void 0 : t.button)); r.elements.button = r.validateAndQuerySelector(e.button), r.elements.button.appendChild(n) } return r.elements.qrCode = r.validateAndQuerySelector(e.qrCode), void r.metricsHandler.logEvent(Da.AttachOK) } catch (e) { throw r.metricsHandler.logEvent(Da.AttachError), e } }))() } tokenize() { var e = this; return ql((function* () { e.handleFirstInteraction(); var { qrCode: t } = e.elements; if (!t) throw new ti(e.methodType); try { var r, n = yield Kr.timeout((() => e.fetchAuthURLsPromise), Vi.minutesToMs(1), new Sa("Precondition failed", e.methodType)); if (n.error) throw n.error; if (!e.transactionId) throw new Sa("expected transactionId to exist at tokenization", e.methodType); if (e.willRedirect) { var i = { paymentMethodTrackingId: e.context.getPaymentMethodTrackingId(), transactionId: e.transactionId }; return e.context.getSession().paymentsUIInstanceId && (i = Bl(Bl({}, i), {}, { paymentsUIInstanceId: e.context.getPaymentsUIInstanceId() })), Nl({ key: jl, value: i }), g.redirectTo(n.redirectURL), new Promise((() => { })) } var a = yield e.cashAppClient.createQrCodeContainer(n.qrURL); t.appendChild(a); var { token: o, cashtag: s, paymentMethodTrackingId: c, sessionId: u } = yield e.paymentMethodMessenger.request(Tl.REQUEST_CASH_APP_CREATE_WALLET_TOKEN, { expiresAt: Date.now() + Vi.secondsToMs(n.expiresIn), requestBody: { analytics_token: null !== (r = e.session.analyticsToken) && void 0 !== r ? r : "", client_id: e.session.applicationId, location_id: e.locationId, payment_method_tracking_id: e.context.getPaymentMethodTrackingId(), session_id: e.session.sessionId, transaction_id: e.transactionId, websdk_version: y.VERSION, website_url: e.session.sourceUrl } }); return yield e.context.updateSession(u), e.context.setPaymentMethodTrackingId(c), kl(s, e.transactionId, o) } catch (t) { return t instanceof Ll && e.errorLogger.captureException(t), qs(t, e.errorLogger) } }))() } getRedirectResult() { var e = this; return ql((function* () { var t, { error: r } = Dl.findAndRemoveQueryParams(window.location.search, ["error"]); if (r) { var n = new pi([Ol(r)]); return e.errorLogger.captureException(n), qs(n, e.errorLogger) } var i, a, o, s, c, { state: u, code: l, access_token: d } = Dl.findAndRemoveQueryParams(window.location.search, Dl.CASH_APP_OAUTH_PARAMS); if (!u || !l || !d) return null; try { a = function (e) { var { transaction_id: t } = JSON.parse(e); if (void 0 === t) throw new Aa("Malformed state in redirect query params: ".concat(e)); return t }(u); var p = function (e) { var t = e.split(":"); if (t.length < 3) throw new Aa("Invalid transaction ID: could not separate"); return t }(a); i = p[0], o = p[1] } catch (t) { return qs(t, e.errorLogger) } var h = Rl(jl); null !== h && a === (null === (t = h.value) || void 0 === t ? void 0 : t.transactionId) && (s = h.value.paymentMethodTrackingId, c = h.value.paymentsUIInstanceId), Pl(jl); var f = t => { e.context.metricsHandler.metricsLogger.logEvent({ event: t, eventSource: e.context.metricsHandler.eventSource }, e.session.instanceId, i, s, c) }; f(Da.NonceStart); try { var g = yield e.messenger.request(Tl.REQUEST_CASH_APP_CUSTOMER, { session: Object.assign({}, e.session, { paymentMethodTrackingId: s, sessionId: i }), body: d }), m = e.generateWalletToken(i, l, a, s); return f(Da.NonceOK), kl(g, o, m) } catch (t) { return f(Da.NonceError), qs(t, e.errorLogger) } }))() } validateAndQuerySelector(e) { if ("string" != typeof e) throw new TypeError("selector should be a string: ".concat(e)); var t = document.querySelector(e); if (null === t) throw new Gn(e); return t } fetchAuthURLs(e, t, r, n) { var i = this; this.fetchAuthURLsPromise = ql((function* () { var a, o = { expiresIn: -1, qrURL: "", redirectURL: "" }, s = 1e3, c = i.willRedirect ? t : void 0, u = n ? { amount: n.amount, currency_code: n.currencyCode } : void 0, l = { client_id: i.session.applicationId, location_id: e, redirect_uri: c, total_transaction_amount: u, transaction_id: r }; try { var { expires_in: d, qr_url: p, redirect_url: h, transaction_id: f } = yield i.paymentMethodMessenger.request(Tl.REQUEST_CASH_APP_AUTH, l); i.transactionId = f, o.expiresIn = d, o.qrURL = p, o.redirectURL = h, a = d, s = Math.max(Vi.secondsToMs(a) - Vi.minutesToMs(1), Vi.minutesToMs(1)), i.willRedirect || (i.preloadedQRImage.src = p), o.expiresIn < 2147483647 ? i.authTimeoutId = window.setTimeout((() => { i.errorLogger.captureException(new Sa("Cash App Auth URLS expired unexpectedly with expiry of ".concat(s, "ms"), dn.CASH_APP), i.session.instanceId, i.session.sessionId) }), s) : i.errorLogger.captureException(new Sa("Cash App Auth URLS expires_in larger than 32 bit integer ".concat(o.expiresIn, "ms"), dn.CASH_APP), i.session.instanceId, i.session.sessionId) } catch (e) { o.error = e } return o }))() } generateWalletToken(e, t, r) { var n = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : ""; return "wnon:".concat(window.btoa(JSON.stringify({ analytics_token: this.session.analyticsToken, client_id: this.session.applicationId, entry_method: "REDIRECT", location_id: this.locationId, payment_method_tracking_id: n, session_id: e, tender: { brand: "CASH_APP", preauth_idempotency_key: t, transaction_id: r }, websdk_version: y.VERSION, website_url: this.session.sourceUrl }))) } handleFirstInteraction() { this.wasFirstInteractionCalled || (this.wasFirstInteractionCalled = !0, this.metricsHandler.logEvent(Da.FirstInteraction)) } } sn.GIFT_CARD_NUMBER, sn.GIFT_CARD_NUMBER, "0".repeat(24); var Yl, zl = [ci, ui, li, di, ei, hi]; function Kl(e, t) { var r = Object.keys(e); if (Object.getOwnPropertySymbols) { var n = Object.getOwnPropertySymbols(e); t && (n = n.filter((function (t) { return Object.getOwnPropertyDescriptor(e, t).enumerable }))), r.push.apply(r, n) } return r } function Wl(e) { for (var t = 1; t < arguments.length; t++) { var r = null != arguments[t] ? arguments[t] : {}; t % 2 ? Kl(Object(r), !0).forEach((function (t) { $l(e, t, r[t]) })) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(r)) : Kl(Object(r)).forEach((function (t) { Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(r, t)) })) } return e } function $l(e, t, r) { return t in e ? Object.defineProperty(e, t, { value: r, enumerable: !0, configurable: !0, writable: !0 }) : e[t] = r, e } function Ql(e, t, r, n, i, a, o) { try { var s = e[a](o), c = s.value } catch (e) { return void r(e) } s.done ? t(c) : Promise.resolve(c).then(n, i) } function Zl(e) { return function () { var t = this, r = arguments; return new Promise((function (n, i) { var a = e.apply(t, r); function o(e) { Ql(a, n, i, o, s, "next", e) } function s(e) { Ql(a, n, i, o, s, "throw", e) } o(void 0) })) } } !function (e) { e.CLEAR = "giftCardClear", e.CONFIGURE = "giftCardConfigure", e.DESTROY = "giftCardDestroy", e.LOAD_GIFT_CARDS_FORM = "loadGiftCardsForm", e.REQUEST_CARD_NONCE_IF_VALID_FORM = "giftCardRequestCardNonceIfValidForm", e.SET_FOCUS = "giftCardSetFocus", e.SET_ERROR = "giftCardSetError" }(Yl || (Yl = {})); var Jl = [sn.GIFT_CARD_NUMBER]; class Xl extends ks { constructor(e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}; super(e), this.methodType = dn.GIFT_CARD, this.onResize = this.onResize.bind(this), this.id = Us(), this.iframeName = "".concat("gift-card", "-").concat(this.id), this.paymentMessenger = new Fs(this.context), this.tokenizeInProcess = !1, this.inputLabelsIncluded = Boolean(null == t ? void 0 : t.includeInputLabels), this.initializeMessageBus(), this.validateOptions(t), this.initialOptions = t || {}, this.errorList = new Set, this.stylesLoadedPromise = new Promise(((e, t) => { this.resolveStylePromise = e, this.rejectStylePromise = t })) } attach(e) { var t = this; return Zl((function* () { var r; t.throwIfAlreadyAttached(), t.status = Ms.ATTACHED, t.metricsHandler.logEvent(Da.AttachStart), t.metricsHandler.logEvent(xa.Configured, t.initialOptions); try { r = dl(e) } catch (e) { throw t.metricsHandler.logEvent(Da.AttachError), t.status === Ms.ATTACHED && (t.status = Ms.DETACHED), e } try { return t.attachPromise = t.buildElementOnIframe(r), yield t.attachPromise, t.attachPromise = void 0, t.throwIfDestroyed(), t.element = r, window.addEventListener("resize", t.onResize), t.showCardElement(), t.onResize(), void t.metricsHandler.logEvent(Da.AttachOK) } catch (e) { if (t.status === Ms.ATTACHED && (t.status = Ms.DETACHED), t.metricsHandler.logEvent(Da.AttachError), ta.isInstanceOf(e, zl)) throw e; throw t.errorLogger.captureException(e, t.session.instanceId, t.session.sessionId), new hi("attaching the Gift Card Element") } }))() } configure(e) { var t = this; return Zl((function* () { t.throwIfNotAttached(), t.validateOptions(e), void 0 !== (null == e ? void 0 : e.includeInputLabels) && (t.inputLabelsIncluded = Boolean(null == e ? void 0 : e.includeInputLabels), t.onResize()), void 0 !== e.style && td(e.style, t.id), t.metricsHandler.logEvent(xa.ConfigUpdated, e); try { return void (yield t.paymentMessenger.request(Yl.CONFIGURE, { includeInputLabels: t.inputLabelsIncluded, style: e.style, type: t.methodType })) } catch (e) { if (ta.isInstanceOf(e, tl)) throw e; throw t.errorLogger.captureException(e, t.session.instanceId, t.session.sessionId), new hi("configuring the Gift Card Element") } }))() } destroy() { return this.detachElement(Ms.DESTROYED, xa.Destroyed) } detach() { return this.detachElement(Ms.DETACHED, xa.Detached) } focus(e) { var t = this; return Zl((function* () { if (t.throwIfNotAttached(), !Object.values(sn).includes(e)) throw new Wn(e); t.metricsHandler.logEvent(xa.Focused, e); try { return yield t.paymentMessenger.request(Yl.SET_FOCUS, { field: e }) } catch (e) { t.errorLogger.captureException(e, t.session.instanceId, t.session.sessionId) } return !1 }))() } clear() { var e = this; return Zl((function* () { e.throwIfNotAttached(); try { return yield e.paymentMessenger.request(Yl.CLEAR) } catch (t) { e.errorLogger.captureException(t, e.session.instanceId, e.session.sessionId) } return e.metricsHandler.logEvent(xa.Clear), !1 }))() } addEventListener(e, t) { this.throwIfDestroyed(), this.metricsHandler.logEvent(xa.EventListenerAdded, e), super.addEventListener(e, t) } removeEventListener(e, t) { this.throwIfDestroyed(), super.removeEventListener(e, t) } tokenize() { var e = this; return Zl((function* () { if (e.throwIfNotAttached(), e.tokenizeInProcess) throw new pi([Gs]); e.tokenizeInProcess = !0; try { var t = yield e.paymentMessenger.request(Yl.REQUEST_CARD_NONCE_IF_VALID_FORM, { type: e.methodType }); return e.tokenizeInProcess = !1, e.context.setPaymentMethodTrackingId(t.paymentMethodTrackingId), yield e.context.updateSession(t.sessionId), function (e) { var { card: t, cardNonce: r } = e; return { details: { giftCard: t, method: dn.GIFT_CARD }, status: hn.OK, token: r } }(t) } catch (t) { if (e.tokenizeInProcess = !1, t instanceof ha) return { errors: t.errors, status: hn.INVALID }; throw ta.isInstanceOf(t, il) ? t : (e.errorLogger.captureException(t, e.session.instanceId, e.session.sessionId), fa()) } }))() } setError(e) { var t = this; return Zl((function* () { if (t.throwIfNotAttached(), !Object.values(sn).includes(e)) throw new Wn(e); t.metricsHandler.logEvent(xa.SetError, e); try { return yield t.paymentMessenger.request(Yl.SET_ERROR, { field: e }) } catch (e) { t.errorLogger.captureException(e, t.session.instanceId, t.session.sessionId) } return !1 }))() } buildElementOnIframe(e) { var t = this; return Zl((function* () { yield t.buildCardElement(e), yield t.paymentMessenger.request(Yl.LOAD_GIFT_CARDS_FORM, { configuration: Wl(Wl({}, t.initialOptions), {}, { type: t.methodType }), iframeName: t.iframeName }), yield t.stylesLoadedPromise }))() } validateOptions(e) { var t = { includeInputLabels: e => "boolean" == typeof e, style: e => "object" == typeof e }; Object.entries(e).forEach((e => { var [r, n] = e; if (void 0 === t[r]) throw new $n(r); if (t[r] && !t[r](n)) throw new Qn(r, n) })) } buildCardElement(e) { var t = this; return Zl((function* () { var r; t.wrapperElement = document.createElement("div"), t.wrapperElement.id = ed(t.id), t.wrapperElement.classList.add(Su), t.hideCardElement(), t.cardDetail = document.createElement("span"), t.cardDetail.classList.add(Ou), e.appendChild(t.wrapperElement), t.iframeContainer = document.createElement("div"), t.iframeContainer.classList.add(Iu), t.wrapperElement.appendChild(t.iframeContainer), t.iframe = yield t.buildCardIframe(t.iframeContainer), t.iframe.classList.add(Cu), t.wrapperElement.appendChild(t.cardDetail), fl.addStyleElement(y.SINGLE_CARD_WRAPPER_STYLES, "sq-single-card-styles", t.resolveStylePromise, t.rejectStylePromise), null !== (r = t.initialOptions) && void 0 !== r && r.style && td(t.initialOptions.style, t.id) }))() } buildCardIframe(e) { return al({ frameborder: "0", height: "0px", name: this.iframeName, scrolling: "no", src: y.GIFT_CARD_IFRAME, width: "100%" }, e) } hideCardElement() { this.wrapperElement && this.wrapperElement.setAttribute("style", "display: none;") } showCardElement() { this.wrapperElement && this.wrapperElement.removeAttribute("style") } onResize(e) { if (this.iframe && this.wrapperElement && this.iframeContainer && !this.currentResizeTimeout) { var t = () => { if (this.wrapperElement && this.iframe && this.iframeContainer) { var e = this.inputLabelsIncluded ? 62 : 48; e += 2, this.iframe.style.height = "".concat(e, "px"), this.iframeContainer.style.height = "".concat(Math.round(e), "px") } }; t(), this.currentResizeTimeout = window.setTimeout((() => { t(), this.currentResizeTimeout = void 0 }), 100) } } updateCardDetailText() { var e, t, r; this.cardDetail && (0 === this.errorList.size ? (e = null !== (r = this.focusedInput) && void 0 !== r ? r : "emptyMessage", t = this.buildHelperMessage(e), this.cardDetail.classList.remove(Tu), this.cardDetail.classList.add(Pu)) : (e = Jl.find((e => this.errorList.has(e))) || Jl[0], t = this.buildErrorMessage(e), this.cardDetail.classList.add(Tu), this.cardDetail.classList.remove(Pu)), this.cardDetail.textContent !== t && (this.cardDetail.textContent = t), t.length > 0 ? this.cardDetail.classList.add(Ru) : this.cardDetail.classList.remove(Ru)) } addErrorMessage(e) { this.errorList.add(e), this.updateCardDetailText() } removeErrorMessage(e) { this.errorList.has(e) && (this.errorList.delete(e), this.updateCardDetailText()) } addFocusMessage(e) { this.focusedInput = e, this.updateCardDetailText() } removeFocusMessage(e) { this.focusedInput === e && (this.focusedInput = null), setTimeout((() => { null === this.focusedInput && this.updateCardDetailText() }), 50) } handleInputEvent(e) { var t, r, { data: n } = e, i = n.payload.body; switch (i.eventType) { case cn.ERROR_CLASS_ADDED: this.addErrorMessage(i.field), null === (t = this.wrapperElement) || void 0 === t || t.classList.add(sc); break; case cn.ERROR_CLASS_REMOVED: this.removeErrorMessage(i.field), this.removeErrorClass(); break; case cn.FOCUS_CLASS_ADDED: this.addFocusMessage(i.field), null === (r = this.wrapperElement) || void 0 === r || r.classList.add(oc); break; case cn.FOCUS_CLASS_REMOVED: this.removeFocusMessage(i.field), this.removeFocusClass() }super.dispatchEvent(i.eventType, i) } removeFocusClass() { setTimeout((() => { var e; this.focusedInput || null === (e = this.wrapperElement) || void 0 === e || e.classList.remove(oc) }), 50) } removeErrorClass() { var e; 0 === this.errorList.size && (null === (e = this.wrapperElement) || void 0 === e || e.classList.remove(sc)) } initializeMessageBus() { var e = this.handleInputEvent.bind(this), t = { [Ks.FOCUS_CLASS_ADDED]: e, [Ks.FOCUS_CLASS_REMOVED]: e, [Ks.ERROR_CLASS_ADDED]: e, [Ks.ERROR_CLASS_REMOVED]: e, [Ks.CARD_BRAND_CHANGED]: e, [Ks.SUBMIT]: e, [Ks.ESCAPE]: e }; this.paymentMessenger.initializeMessageBus(t) } buildErrorMessage(e) { return e === sn.GIFT_CARD_NUMBER ? this.context.getLocaleString().paymentMethods.giftCards.errors.giftCardNumberError : "" } buildHelperMessage(e) { return e === sn.GIFT_CARD_NUMBER ? this.context.getLocaleString().paymentMethods.giftCards.helperText.giftCardNumber : "" } detachElement(e, t) { var r = this; return Zl((function* () { r.throwIfDestroyed(); var n = r.status; if (r.status = e, r.attachPromise) try { yield r.attachPromise } catch (e) { } try { var i = yield r.paymentMessenger.request(Yl.DESTROY); return r.element && (ol(r.element), window.removeEventListener("resize", r.onResize)), r.metricsHandler.logEvent(t), i } catch (e) { throw r.status = n, e } }))() } } function ed(e) { return "".concat("gift-card-wrapper", "-").concat(e) } function td(e, t) { var r = function (e) { return "".concat("sq-gift-card-custom-styles", "-").concat(e) }(t), n = document.getElementById(r); null === n && ((n = document.createElement("style")).id = r, document.head.appendChild(n)), n.innerHTML = Zu(e, ed(t)) } class rd extends Nn { constructor(e) { super("The event listener for ".concat(e, " timed out (30 seconds). If you've returned a promise, ensure it is resolving")), this.name = "EventListenerTimeoutError", Object.setPrototypeOf(this, rd.prototype) } } function nd(e, t, r, n, i, a, o) { try { var s = e[a](o), c = s.value } catch (e) { return void r(e) } s.done ? t(c) : Promise.resolve(c).then(n, i) } class id extends Ls { constructor() { super(), this.listeners = {}, this.listeners = {} } dispatchEvent(e, t, r) { var n, i = this; return (n = function* () { if (e in i.listeners) for (var n = new fi(e, t), a = [...i.listeners[e]], o = function* (t, i) { var o = void 0; try { o = a[t](n) } catch (t) { throw new jn(e, t.message) } var s = void 0; if (o instanceof Promise) try { s = yield Kr.timeout((() => o), 3e4, new rd(e)) } catch (t) { if (t instanceof rd) throw t; throw new jn(e, t.message) } else s = o; r && r(s) }, s = 0, c = a.length; s < c; s++)yield* o(s) }, function () { var e = this, t = arguments; return new Promise((function (r, i) { var a = n.apply(e, t); function o(e) { nd(a, r, i, o, s, "next", e) } function s(e) { nd(a, r, i, o, s, "throw", e) } o(void 0) })) })() } } function ad(e, t) { if ("object" != typeof e) return { isValid: !1, missingFields: [] }; var r = []; return { isValid: Object.entries(t).map((n => { var [i, a] = n; if ("object" == typeof a) { var { isValid: o, missingFields: s } = ad("object" == typeof e[i] ? e[i] : {}, t[i]); return s.forEach((e => { var [t, n] = e; r.push(["".concat(i, ".").concat(t), n]) })), o } return i in e && typeof e[i] === a || (r.push([i, a]), !1) })).every((e => e)), missingFields: r } } function od(e, t, r) { if (!Array.isArray(e)) return { isValid: !1, missingFields: [[t, "Array"]] }; var n = e.reduce(((e, n) => { var i = ad({ [t]: n }, { [t]: r }), a = Object.fromEntries(i.missingFields); return { isValid: e.isValid && i.isValid, missingFieldsMap: Object.assign({}, e.missingFieldsMap, a) } }), { isValid: !0, missingFieldsMap: {} }); return { isValid: n.isValid, missingFields: Object.entries(n.missingFieldsMap) } } var sd, cd, ud = { amount: "string", label: "string" }, ld = { amount: "string", id: "string", label: "string" }, dd = { amount: "string", label: "string" }, pd = {}; function hd(e, t) { var { lineItems: r, taxLineItems: n, discounts: i, shippingLineItems: a } = e, o = !1, s = [], c = r, u = n, l = a, d = fd(i); return void 0 === t || void 0 === r && void 0 === n && void 0 === a && void 0 === d || (c || (c = t.lineItems), u || (u = t.taxLineItems), d || (d = fd(t.discounts)), l || (l = t.shippingLineItems)), [c, u, d, l].forEach((e => { void 0 !== e && (o = !0, s.push(...e)) })), o ? s : void 0 } function fd(e) { return void 0 === e ? e : e.map((e => Object.assign({}, e, { amount: "-".concat(e.amount) }))) } function gd(e, t, r, n, i, a, o) { try { var s = e[a](o), c = s.value } catch (e) { return void r(e) } s.done ? t(c) : Promise.resolve(c).then(n, i) } function md(e) { return function () { var t = this, r = arguments; return new Promise((function (n, i) { var a = e.apply(t, r); function o(e) { gd(a, n, i, o, s, "next", e) } function s(e) { gd(a, n, i, o, s, "throw", e) } o(void 0) })) } } function vd(e, t) { var r = Object.keys(e); if (Object.getOwnPropertySymbols) { var n = Object.getOwnPropertySymbols(e); t && (n = n.filter((function (t) { return Object.getOwnPropertyDescriptor(e, t).enumerable }))), r.push.apply(r, n) } return r } function Ed(e, t, r) { return t in e ? Object.defineProperty(e, t, { value: r, enumerable: !0, configurable: !0, writable: !0 }) : e[t] = r, e } !function (e) { e.UPDATE = "update" }(sd || (sd = {})); class yd { constructor(e, t, r) { this.eventTarget = new id, this.metricsBuffer = [], this.localeStrings = t, this._requestBillingContact = Boolean(e.requestBillingContact), this._requestShippingContact = Boolean(e.requestShippingContact), this._countryCode = e.countryCode, this._currencyCode = e.currencyCode, this._lineItems = e.lineItems, this._shippingLineItems = e.shippingLineItems, this._taxLineItems = e.taxLineItems, this._discounts = e.discounts, this._total = e.total, this._shippingOptions = e.shippingOptions, this._shippingContact = e.shippingContact, this._pickupContact = e.pickupContact, this.updateLock = r; var { isValid: n, missingFields: i } = Ad(this); if (!n) throw new Fn(i) } get requestBillingContact() { return this._requestBillingContact } get requestShippingContact() { return this._requestShippingContact } get countryCode() { return this._countryCode } get currencyCode() { return this._currencyCode } get lineItems() { return this._lineItems } get pickupContact() { return this._pickupContact } get shippingLineItems() { return this._shippingLineItems } get taxLineItems() { return this._taxLineItems } get discounts() { return this._discounts } get total() { return this._total } get shippingOptions() { return this._shippingOptions } get shippingContact() { return this._shippingContact } update(e) { var t = function (e) { for (var t = 1; t < arguments.length; t++) { var r = null != arguments[t] ? arguments[t] : {}; t % 2 ? vd(Object(r), !0).forEach((function (t) { Ed(e, t, r[t]) })) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(r)) : vd(Object(r)).forEach((function (t) { Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(r, t)) })) } return e }({ countryCode: this.countryCode, currencyCode: this.currencyCode, lineItems: this.lineItems, shippingLineItems: this.shippingLineItems, taxLineItems: this.taxLineItems, discounts: this.discounts, pickupContact: this.pickupContact, requestBillingContact: this.requestBillingContact, requestShippingContact: this.requestShippingContact, shippingContact: this.shippingContact, shippingOptions: this.shippingOptions, total: this.total }, e), r = new yd(t, this.localeStrings, this.updateLock), { isValid: n, missingFields: i } = Ad(r); if (!n) throw new Fn(i); return !this.updateLock.isLocked && (void 0 !== e.requestBillingContact && (this._requestBillingContact = Boolean(e.requestBillingContact)), void 0 !== e.requestShippingContact && (this._requestShippingContact = Boolean(e.requestShippingContact)), e.countryCode && (this._countryCode = e.countryCode), e.currencyCode && (this._currencyCode = e.currencyCode), e.lineItems && (this._lineItems = e.lineItems), e.shippingLineItems && (this._shippingLineItems = e.shippingLineItems), e.taxLineItems && (this._taxLineItems = e.taxLineItems), e.discounts && (this._discounts = e.discounts), e.total && (this._total = e.total), e.pickupContact && (this._pickupContact = e.pickupContact), e.shippingOptions && (this._shippingOptions = e.shippingOptions), e.shippingContact && (this._shippingContact = e.shippingContact), this.eventTarget.dispatchEvent(sd.UPDATE, r), this.logMetrics(xa.ConfigUpdated, t), !0) } addEventListener(e, t) { switch (ta.enumValues(pn).includes(e) && this.logMetrics(xa.EventListenerAdded, e), e) { case pn.SHIPPING_CONTACT_CHANGED: this.shippingContactEventListener(t); break; case pn.SHIPPING_OPTION_CHANGED: this.shippingOptionEventListener(t); break; case sd.UPDATE: this.updateEventListener(t); break; case An.AFTERPAY_SHIPPING_ADDRESS_CHANGED: this.afterpayShippingContactEventListener(t); break; case An.AFTERPAY_SHIPPING_OPTION_CHANGED: this.afterpayShippingOptionEventListener(t); break; default: throw new bs("PaymentRequest.addEventListener", "event", "PaymentRequestEvent") } } dispatchEvent(e, t, r) { return this.eventTarget.dispatchEvent(e, t, (t => { if (ta.enumValues(An).includes(e)) { var n = function (e) { if (void 0 !== e.error) return { isValid: !0, missingFields: [] }; if (void 0 !== e.shippingErrors) return { isValid: !0, missingFields: [] }; if (void 0 === e.shippingOptions) return { isValid: !1, missingFields: [["paymentRequestUpdate.shippingOptions", "array"]] }; var t = od(e.shippingOptions, "shippingOptions", { id: "string", label: "string", amount: "string", total: "object" }); if (!t.isValid) return t; for (var r of e.shippingOptions) { if (!(t = ad({ "shippingOptions.total": r.total }, { "shippingOptions.total": dd })).isValid) return t; if (void 0 !== r.taxLineItems && !(t = od(r.taxLineItems, "shippingOptions.taxLineItems", ud)).isValid) return t } return { isValid: !0, missingFields: [] } }(t); if (!n.isValid) throw new qn(n.missingFields); r(t) } else { var i = function (e) { var { lineItems: t, discounts: r, taxLineItems: n, shippingLineItems: i, shippingErrors: a, shippingOptions: o, error: s, total: c } = e; if (t) { var u = od(t, "lineItem", ud); if (!u.isValid) return u } if (r) { var l = od(r, "discounts", ud); if (!l.isValid) return l } if (n) { var d = od(n, "taxLineItems", ud); if (!d.isValid) return d } if (i) { var p = od(i, "shippingLineItems", ud); if (!p.isValid) return p } if (o) { var h = od(o, "shippingOption", ld); if (!h.isValid) return h } if (c) { var f = ad({ total: c }, { total: dd }); if (!f.isValid) return f } if (s && "string" != typeof s) return { isValid: !1, missingFields: [["error", "string"]] }; if (a) { var g = ad(a, pd); if (!g.isValid) return g } return { isValid: !0, missingFields: [] } }(t); if (!i.isValid) throw new qn(i.missingFields); r(t) } })) } hasEventListener(e) { return this.eventTarget.hasEventListener(e) } setPaymentMetricsHandler(e) { this.paymentMetricsHandler = e, this.metricsBuffer.length > 0 && (this.metricsBuffer.forEach((t => { var [r, n] = t; e.logEvent(r, n) })), this.metricsBuffer = []) } shippingContactEventListener(e) { var t = this; this.eventTarget.addEventListener(pn.SHIPPING_CONTACT_CHANGED, function () { var r = md((function* (r) { var { contactOrOption: n } = r.detail; try { return yield e(n) } catch (e) { return console.error("ShippingContactUpdateError", e), { error: t.localeStrings.getLocaleString().paymentMethods.wallets.callbackErrors.optionsError } } })); return function (e) { return r.apply(this, arguments) } }()) } shippingOptionEventListener(e) { var t = this; this.eventTarget.addEventListener(pn.SHIPPING_OPTION_CHANGED, function () { var r = md((function* (r) { var { contactOrOption: n } = r.detail; try { return yield e(n) } catch (e) { return console.error("ShippingOptionUpdateError", e), { error: t.localeStrings.getLocaleString().paymentMethods.wallets.callbackErrors.optionsError } } })); return function (e) { return r.apply(this, arguments) } }()) } afterpayShippingContactEventListener(e) { var t = this; this.eventTarget.addEventListener(An.AFTERPAY_SHIPPING_ADDRESS_CHANGED, function () { var r = md((function* (r) { var { contactOrOption: n } = r.detail; try { return yield e(n) } catch (e) { return console.error("AfterpayShippingContactUpdateError", e), { error: t.localeStrings.getLocaleString().paymentMethods.wallets.callbackErrors.optionsError } } })); return function (e) { return r.apply(this, arguments) } }()) } afterpayShippingOptionEventListener(e) { this.eventTarget.addEventListener(An.AFTERPAY_SHIPPING_OPTION_CHANGED, (t => { e(t.detail.contactOrOption) })) } updateEventListener(e) { this.eventTarget.addEventListener(sd.UPDATE, (t => { e(t.detail) })) } logMetrics(e, t) { void 0 !== this.paymentMetricsHandler ? this.paymentMetricsHandler.logEvent(e, t) : this.metricsBuffer.push([e, t]) } } function _d(e) { return Boolean(e.shippingOptions && e.shippingOptions.length > 0) } function Ad(e) { return ad(e, { countryCode: "string", currencyCode: "string", total: { amount: "string", label: "string" } }) } class Id { constructor() { this.lockSet = new Set } get isLocked() { return this.lockSet.size > 0 } lock(e) { this.lockSet.add(e) } unlock(e) { this.lockSet.delete(e) } } class Sd extends Nn { constructor() { super("Method is not enabled for this app."), this.name = "MethodNotAvailableError", Object.setPrototypeOf(this, Sd.prototype) } } !function (e) { e.REQUEST_HYDRATION = "REQUEST_HYDRATION" }(cd || (cd = {})); var Cd = function (e) { var t = function () { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}, t = new URL(y.IFRAME_SRC); return Object.entries(e).forEach((e => { var [r, n] = e; t.searchParams.set(r, n) })), t.toString() }(e); return al({ frameborder: "0", height: "0", scrolling: "no", src: t, style: "border: none !important; display: block !important; visibility: hidden !important", width: "0" }) }, Od = function (e) { var t = new (Ya[e.name] || Nn); return t.fromSerializedError(e), t }, Td = function (e) { return { _isSerializedError: !0, errors: e.errors, message: e.message, name: e.name } }; class Pd extends class { constructor(e = {}) { this.logDevelopmentErrors = !1, this.messageListeners = {}, this.channel = new class { constructor(e) { this.receiveMessage = e => { switch (e.data) { case this.messageWithName(Mr): this.handleConnecting(e); break; case this.messageWithName(Ur): this.handleConnected(); break; case this.messageWithName(kr): this.close(); break; case this.messageWithName(Hr): break; default: this.handleMessage(e) } }, this.connected = !1, this.listeners = [], this.messageBuffer = [], this.name = e ? `:${e}` : "" } close() { this.port && (this.postMessage(this.messageWithName(kr)), this.port.close(), this.port = void 0, this.connected || window.removeEventListener("message", this.receiveMessage)), this.connected = !1 } connect(e) { if (this.connected) throw new Dr("message channel is already connected"); if (e) { if (void 0 === e.origin) throw new Dr("message channel remote.origin must be defined"); if (null === e.window) throw new Dr("message channel remote.window cannot be null"); let t = new MessageChannel; this.setupPort(t.port1), e.window.postMessage(this.messageWithName(Mr), e.origin, [t.port2]) } else window.addEventListener("message", this.receiveMessage) } setErrorHandler(e) { this.errorHandler = e } set onmessage(e) { this.listeners.push(e) } postMessage(e) { this.port && this.connected ? this.port.postMessage(e) : this.messageBuffer.push(e) } handleConnecting(e) { if (this.connected) throw new Dr("message channel should not be connecting because already connected"); window.removeEventListener("message", this.receiveMessage), this.setupPort(e.ports[0]), this.postMessage(this.messageWithName(Ur)), this.connectionEstablished() } handleConnected() { if (this.connected) throw new Dr("message channel already connected"); this.connectionEstablished() } connectionEstablished() { for (this.connected = !0; this.messageBuffer.length > 0;)this.postMessage(this.messageBuffer.shift()) } handleMessage(e) { this.listeners.forEach((t => { t(e) })) } setupPort(e) { this.port = e, this.port.onmessage = this.receiveMessage, this.port.onmessageerror = e => { this.postMessage(this.messageWithName(Hr)), this.errorHandler && this.errorHandler(new Dr("message channel failed to deserialize message"), e) } } messageWithName(e) { return e + this.name } }(e.name), this.channel.onmessage = this.handleMessage.bind(this), this.payloadSerializer = e.payloadSerializer, this.errorSerializer = e.errorSerializer, void 0 !== e.logDevelopmentErrors && (this.logDevelopmentErrors = e.logDevelopmentErrors) } setErrorHandler(e) { this.errorHandler = e, this.channel.setErrorHandler(e) } sendOneWayMessage(e, t) { let r = t; return void 0 !== t && void 0 !== this.payloadSerializer && (r = this.payloadSerializer.serialize(t)), this.message({ id: this.uniqueId(), mustAcknowledge: !1, mustRespond: !1, payload: r, type: e }) } sendMessage(e, t) { let r = t; return void 0 !== t && void 0 !== this.payloadSerializer && (r = this.payloadSerializer.serialize(t)), this.message({ id: this.uniqueId(), mustAcknowledge: !0, mustRespond: !1, payload: r, type: e }) } request(e, t) { let r = t; return void 0 !== t && void 0 !== this.payloadSerializer && (r = this.payloadSerializer.serialize(t)), this.message({ id: this.uniqueId(), mustAcknowledge: !0, mustRespond: !0, payload: r, type: e }) } respond(e, t) { let r = `${e.type}:${Er.OK}`, n = t; return void 0 !== this.payloadSerializer && (n = this.payloadSerializer.serialize(t)), this.postResponse(r, e, n) } reject(e, t) { let r = `${e.type}:${Er.ERROR}`, n = t; return void 0 !== this.errorSerializer && (n = this.errorSerializer.serialize(t)), this.postResponse(r, e, n) } onMessage(e, t) { let r = t || this.uniqueId(); return this.addMessageEventListener(e, r), r } connect(e, t) { this.iframeID = t, this.channel.connect(e) } close() { this.channel.close() } handleMessage(e) { let t = this.messageListeners[e.data.type]; e.data.type && "undefined" !== e.data.type ? t ? (e.data.mustAcknowledge && this.acknowledge(e.data), Object.values(t).forEach((t => { t.forEach((t => { t(e) })) }))) : this.logDevelopmentErrors && console.error(`Listener does not exist for ${e.data.type}. Add one to your messenger instance:\n            messenger.onMessage({\n                    listener: (msg) => {},\n                    messageType: '${e.data.type}',\n                });\n          `) : void 0 !== this.errorHandler && this.errorHandler(new Lr("Received a messenger message with an undefined type"), e) } logMessengerTimeout(e) { let t = new xr(e.type, e.id, this.iframeID); this.errorHandler && this.errorHandler(t, new MessageEvent(e.type, { data: e })) } handleMessageContract(e) { let t = this.errorSerializer, r = this.payloadSerializer; if (!e.mustAcknowledge) return new Promise((e => { e({}) })); let n, i = () => { [Er.ACK, Er.OK, Er.ERROR].forEach((t => { delete this.messageListeners[`${e.type}:${t}`][n] })) }, a = window.setTimeout((() => { this.logMessengerTimeout(e) }), 1e4); return new Promise(((o, s) => { n = this.onMessage({ listener() { clearTimeout(a), e.mustRespond || (i(), o({})) }, messageType: `${e.type}:${Er.ACK}` }), this.onMessage({ listener(e) { i(); let { payload: t } = e.data; if (void 0 !== r) { let e = r.deserialize(t); o(e) } else o(t) }, messageType: `${e.type}:${Er.OK}` }, n), this.onMessage({ listener(e) { i(); let { payload: r } = e.data; if (void 0 !== t) { let e = t.deserialize(r); s(e) } else s(r) }, messageType: `${e.type}:${Er.ERROR}` }, n) })) } acknowledge(e) { let t = `${e.type}:${Er.ACK}`; return this.message({ id: e.id, mustAcknowledge: !1, mustRespond: !1, type: t }) } postResponse(e, t, r) { return this.message({ id: t.id, mustAcknowledge: !0, mustRespond: !1, payload: r, type: e }) } message(e) { let t = this.handleMessageContract(e); return (!e.type || "undefined" === e.type) && void 0 !== this.errorHandler && this.errorHandler(new Lr("attempting to send a messenger message with an undefined type")), this.channel.postMessage(e), t } addMessageEventListener(e, t) { let { messageType: r, listener: n } = e; this.messageListeners[r] = this.messageListeners[r] || {}, this.messageListeners[r][t] = this.messageListeners[r][t] || [], this.messageListeners[r][t].push(n) } uniqueId() { return Date.now().toString() + Math.floor(8e3 * Math.random()) } }{ constructor(e) { super({ name: e, errorSerializer: { serialize: e => e instanceof Nn ? Td(e) : e, deserialize: e => e instanceof Error ? e : Od(e) } }) } setErrorLogger(e, t) { this.setErrorHandler((function (r, n) { var i, a, o, s, c, u; void 0 !== n && (i = null === (o = n.data.payload) || void 0 === o || null === (s = o.session) || void 0 === s ? void 0 : s.instanceId, a = null === (c = n.data.payload) || void 0 === c || null === (u = c.session) || void 0 === u ? void 0 : u.sessionId), r instanceof xr ? t.logEvent({ event: Ua.IframeMessengerTimeoutError, eventSource: Ga.App, internalConfigurationValues: r.message }, i, a) : e.captureException(r, i, a) })) } } function Rd(e, t, r, n, i, a, o) { try { var s = e[a](o), c = s.value } catch (e) { return void r(e) } s.done ? t(c) : Promise.resolve(c).then(n, i) } function Nd(e) { return function () { var t = this, r = arguments; return new Promise((function (n, i) { var a = e.apply(t, r); function o(e) { Rd(a, n, i, o, s, "next", e) } function s(e) { Rd(a, n, i, o, s, "throw", e) } o(void 0) })) } } function wd() { return (wd = Nd((function* (e, t, r, n, i) { var a = new Pd(i); return a.setErrorLogger(t, r), a.connect({ origin: y.ASSET_URL, window: e.contentWindow }, e.id), yield a.sendMessage(rs, n), a }))).apply(this, arguments) } var bd = { build: function (e, t, r, n, i) { return wd.apply(this, arguments) } }; function Dd(e, t, r, n, i, a, o) { try { var s = e[a](o), c = s.value } catch (e) { return void r(e) } s.done ? t(c) : Promise.resolve(c).then(n, i) } function Ld(e) { return function () { var t = this, r = arguments; return new Promise((function (n, i) { var a = e.apply(t, r); function o(e) { Dd(a, n, i, o, s, "next", e) } function s(e) { Dd(a, n, i, o, s, "throw", e) } o(void 0) })) } } function xd() { return (xd = Ld((function* (e, t, r, n) { var { applicationId: i, locationId: a, hostname: o, sourceUrl: s } = e; t.logEvent({ event: Da.InitializeStart, eventSource: Ga.App }); var c, u, l = n.getCurrentLocale(); try { c = yield Cd({ applicationId: i, hostname: o }) } catch (e) { if (t.logEvent({ event: Da.InitializeError, eventSource: Ga.App }), r.captureException(e), ba(e)) throw new hi("initializing the payment method"); throw e } try { u = yield bd.build(c, r, t, { applicationId: i, hostname: o, locale: l, locationId: a }) } catch (e) { if (t.logEvent({ event: Da.InitializeError, eventSource: Ga.App }), r.captureException(e), ba(e)) throw new hi("initializing the payment method"); throw e } try { var { avt: d, sessionId: p, applePartnerInternalMerchantIdentifier: h, cashAppPayMerchantIdentifier: f, instanceId: g, paymentMethodSupportDetail: m, featureFlagValues: v } = yield u.request(cd.REQUEST_HYDRATION, { body: { applicationId: i, hostname: o, locationId: a } }); t.setAvt(d); var E = new rl({ applePayMerchantIdentifier: h, cashAppPayMerchantIdentifier: f, applicationId: i, avt: d, hostname: o, instanceId: g, locale: l, locationId: a, sessionId: p, sourceUrl: s }); return t.logEvent({ event: Da.InitializeOK, eventSource: Ga.App, internalConfigurationValues: v }, g, p), { featureFlagValues: v, localeStrings: n, messenger: u, paymentMethodSupportDetail: m, session: E } } catch (e) { if (t.logEvent({ event: Da.InitializeError, eventSource: Ga.App }), ba(e)) throw new hi("initializing the payment method"); throw e } }))).apply(this, arguments) } function Ud() { return (Ud = Ld((function* (e, t, r) { var { applicationId: n, locationId: i, sourceUrl: a } = e.serialize(); try { var o = yield As.getToken({ applicationId: n, locationId: i, websiteUrl: a }); e.setAnalyticsToken(o) } catch (n) { n instanceof si && t.captureException(n, e.instanceId, e.sessionId), r && window.clearInterval(r) } }))).apply(this, arguments) } var Md, kd = { initializeAnalytics: function (e, t, r) { return Ud.apply(this, arguments) }, initializePayment: function (e, t, r, n) { return xd.apply(this, arguments) }, validateVerificationDetails: function (e, t) { var r = []; return e.billingContact && "object" == typeof e.billingContact || r.push(new bs(t, "details.billingContact", "object")), e.intent && "string" == typeof e.intent && ["CHARGE", "STORE"].includes(e.intent) || r.push(new bs(t, "details.intent", "string")), "CHARGE" === e.intent && (e.amount && "string" == typeof e.amount || r.push(new bs(t, "details.amount", "string")), e.currencyCode && "string" == typeof e.currencyCode || r.push(new bs(t, "details.currencyCode", "string"))), r } }; !function (e) { e.REQUEST_APPLE_PAY_CARD_NONCE = "REQUEST_APPLE_PAY_CARD_NONCE", e.REQUEST_APPLE_PAY_MERCHANT_VALIDITY = "REQUEST_APPLE_PAY_MERCHANT_VALIDITY" }(Md || (Md = {})); var Hd, Bd = { AD: "Andorra", AE: "United Arab Emirates", AF: "Afghanistan", AG: "Antigua And Barbuda", AI: "Anguilla", AL: "Albania", AM: "Armenia", AO: "Angola", AQ: "Antarctica", AR: "Argentina", AS: "American Samoa", AT: "Austria", AU: "Australia", AW: "Aruba", AX: "Finland", AZ: "Azerbaijan", BA: "Bosnia And Herzegovina", BB: "Barbados", BD: "Bangladesh", BE: "Belgium", BF: "Burkina Faso", BG: "Bulgaria (rep.)", BH: "Bahrain", BI: "Burundi", BJ: "Benin", BL: "Saint Barthelemy", BM: "Bermuda", BN: "Brunei Darussalam", BO: "Bolivia", BQ: "Bonaire, Sint Eustatius, And Saba", BR: "Brazil", BS: "Bahamas", BT: "Bhutan", BV: "Bouvet Island", BW: "Botswana", BY: "Belarus", BZ: "Belize", CA: "Canada", CC: "Cocos (keeling) Islands", CD: "Congo (dem. Rep.)", CF: "Central African Republic", CG: "Congo (rep.)", CH: "Switzerland", CI: "Cote D'ivoire", CK: "Cook Islands", CL: "Chile", CM: "Cameroon", CN: "China", CO: "Colombia", CR: "Costa Rica", CV: "Cape Verde", CW: "Curacao", CX: "Christmas Island", CY: "Cyprus", CZ: "Czech Rep.", DE: "Germany", DJ: "Djibouti", DK: "Denmark", DM: "Dominica", DO: "Dominican Rep.", DZ: "Algeria", EC: "Ecuador", EE: "Estonia", EG: "Egypt", EH: "Western Sahara", ER: "Eritrea", ES: "Spain", ET: "Ethiopia", FI: "Finland", FJ: "Fiji", FK: "Falkland Islands (malvinas)", FM: "Micronesia (federated State Of)", FO: "Faroe Islands", FR: "France", GA: "Gabon", GB: "United Kingdom", GD: "Grenada (west Indies)", GE: "Georgia", GF: "French Guiana", GG: "Channel Islands", GH: "Ghana", GI: "Gibraltar", GL: "Greenland", GM: "Gambia", GN: "Guinea", GP: "Guadeloupe", GQ: "Equatorial Guinea", GR: "Greece", GS: "South Georgia", GT: "Guatemala", GU: "Guam", GW: "Guinea-bissau", GY: "Guyana", HK: "Hong Kong", HM: "Heard And Mcdonald Islands", HN: "Honduras", HR: "Croatia", HT: "Haiti", HU: "Hungary (rep.)", ID: "Indonesia", IE: "Ireland", IL: "Israel", IM: "Isle Of Man", IN: "India", IO: "British Indian Ocean Territory", IQ: "Iraq", IR: "Iran", IS: "Iceland", IT: "Italy", JE: "Channel Islands", JM: "Jamaica", JO: "Jordan", JP: "Japan", KE: "Kenya", KG: "Kyrgyzstan", KH: "Cambodia", KI: "Kiribati", KM: "Comoros", KN: "Saint Kitts And Nevis", KR: "South Korea", KW: "Kuwait", KY: "Cayman Islands", KZ: "Kazakhstan", LA: "Lao (people's Dem. Rep.)", LB: "Lebanon", LC: "Saint Lucia", LI: "Liechtenstein", LK: "Sri Lanka", LR: "Liberia", LS: "Lesotho", LT: "Lithuania", LU: "Luxembourg", LV: "Latvia", LY: "Libya", MA: "Morocco", MC: "Monaco", MD: "Rep. Moldova", ME: "Montenegro", MF: "Saint Martin", MG: "Madagascar", MH: "Marshall Islands", MK: "Macedonia", ML: "Mali", MM: "Myanmar", MN: "Mongolia", MO: "Macao", MP: "Northern Mariana Islands", MQ: "Martinique", MR: "Mauritania", MS: "Montserrat", MT: "Malta", MU: "Mauritius", MV: "Maldives", MW: "Malawi", MX: "Mexico", MY: "Malaysia", MZ: "Mozambique", NA: "Namibia", NC: "New Caledonia", NE: "Niger", NF: "Norfolk Island", NG: "Nigeria", NI: "Nicaragua", NL: "Netherlands", NO: "Norway", NP: "Nepal", NR: "Nauru Central Pacific", NU: "Niue", NZ: "New Zealand", OM: "Oman", PA: "Panama (rep.)", PE: "Peru", PF: "French Polynesia", PG: "Papua New Guinea", PH: "Philippines", PK: "Pakistan", PL: "Poland", PM: "St. Pierre And Miquelon", PN: "Pitcairn", PR: "Puerto Rico", PS: "Palestinian Territory", PT: "Portugal", PW: "Palau", PY: "Paraguay", QA: "Qatar", RE: "Reunion", RO: "Romania", RS: "Republic Of Serbia", RU: "Russian Federation", RW: "Rwanda", SA: "Saudi Arabia", SB: "Solomon Islands", SC: "Seychelles", SE: "Sweden", SG: "Rep. Of Singapore", SH: "Saint Helena", SI: "Slovenia", SJ: "Svalbard And Jan Mayen Islands", SK: "Slovakia", SL: "Sierra Leone", SM: "San Marino", SN: "Senegal", SO: "Somalia", SR: "Suriname", SS: "South Sudan", ST: "Sao Tome And Principe", SV: "El Salvador", SX: "Sint Maarten", SZ: "Swaziland", TC: "Turks And Caicos Islands", TD: "Chad", TF: "French Southern Territories", TG: "Togo", TH: "Thailand", TJ: "Tajikistan", TK: "Tokelau", TL: "Timor-leste", TM: "Turkmenistan", TN: "Tunisia", TO: "Tonga", TR: "Turkey", TT: "Trinidad And Tobago", TV: "Tuvalu", TW: "Taiwan", TZ: "Tanzania (united Rep.)", UA: "Ukraine", UG: "Uganda", UM: "United States Minor Outlying Islands", US: "United States", UY: "Uruguay", UZ: "Uzbekistan", VA: "Vatican", VC: "Saint Vincent And The Grenadines (antilles)", VE: "Venezuela", VG: "Virgin Islands (british)", VI: "Virgin Islands (u.s.)", VN: "Viet Nam", VU: "Vanuatu", WF: "Wallis And Futuna Islands", WS: "Samoa", YE: "Yemen", YT: "Mayotte", ZA: "South Africa", ZM: "Zambia", ZW: "Zimbabwe" }; function Gd(e, t) { var r = Object.keys(e); if (Object.getOwnPropertySymbols) { var n = Object.getOwnPropertySymbols(e); t && (n = n.filter((function (t) { return Object.getOwnPropertyDescriptor(e, t).enumerable }))), r.push.apply(r, n) } return r } function Fd(e) { for (var t = 1; t < arguments.length; t++) { var r = null != arguments[t] ? arguments[t] : {}; t % 2 ? Gd(Object(r), !0).forEach((function (t) { qd(e, t, r[t]) })) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(r)) : Gd(Object(r)).forEach((function (t) { Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(r, t)) })) } return e } function qd(e, t, r) { return t in e ? Object.defineProperty(e, t, { value: r, enumerable: !0, configurable: !0, writable: !0 }) : e[t] = r, e } !function (e) { e.PENDING = "pending", e.FINAL = "final" }(Hd || (Hd = {})); var jd = { addressLines: "addressLines", city: "locality", country: "countryCode", postalCode: "postalCode", state: "administrativeArea" }, Vd = ["visa", "masterCard", "jcb", "discover", "amex"]; function Yd(e) { return { amount: e.amount, label: e.label, type: e.pending ? Hd.PENDING : Hd.FINAL } } function zd(e) { return { amount: e.amount, detail: "", identifier: e.id, label: e.label } } function Kd(e, t) { return t ? Yd(t) : e } function Wd(e, t) { return t ? t.map(Yd) : e } function $d(e, t) { return t ? t.map(zd) : e } function Qd() { for (var e = 3; e > 0 && !window.ApplePaySession.supportsVersion(e);)e--; return e } function Zd(e) { var { addressLines: t, locality: r, administrativeArea: n, postalCode: i, countryCode: a, givenName: o, familyName: s, emailAddress: c, phoneNumber: u } = e; return { addressLines: t, city: r, countryCode: a && a.toUpperCase(), email: c, familyName: s, givenName: o, phone: u, postalCode: i, state: n } } function Jd(e) { var { amount: t, identifier: r, label: n } = e; return { amount: t, id: r, label: n } } function Xd(e, t, r) { return { errors: (n = e, i = [], n.error && i.push(new window.ApplePayError("addressUnserviceable", "postalAddress", n.error)), n.shippingErrors && Object.entries(n.shippingErrors).forEach((e => { var [t, r] = e, n = jd[t] || "postalAddress"; i.push(new window.ApplePayError("shippingContactInvalid", n, r)) })), i), newLineItems: Wd(t.lineItems, hd(e, r)), newShippingMethods: $d(t.shippingMethods, e.shippingOptions), newTotal: Kd(t.total, e.total) }; var n, i } function ep(e, t, r) { var n = Xd(e, t, r); return Fd({ status: window.ApplePaySession.STATUS_SUCCESS }, n) } function tp(e, t, r) { return { newLineItems: Wd(t.lineItems, hd(e, r)), newTotal: Kd(t.total, e.total) } } function rp(e, t, r) { var n = Xd(e, t, r); return Fd({ status: window.ApplePaySession.STATUS_SUCCESS }, n) } function np(e, t, r, n, i, a, o) { try { var s = e[a](o), c = s.value } catch (e) { return void r(e) } s.done ? t(c) : Promise.resolve(c).then(n, i) } function ip(e) { return function () { var t = this, r = arguments; return new Promise((function (n, i) { var a = e.apply(t, r); function o(e) { np(a, n, i, o, s, "next", e) } function s(e) { np(a, n, i, o, s, "throw", e) } o(void 0) })) } } class ap extends ks { constructor(e, t, r) { if (super(t), this.methodType = dn.APPLE_PAY, this.sessionInProgress = !1, this.wasFirstInteractionCalled = !1, this.paymentMethodMessenger = new Fs(this.context), this.paymentRequestLockController = r, this.req = e, void 0 === window.ApplePaySession) throw new ai(Ns.APPLE_PAY_BROWSER_NOT_SUPPORTED); if (!window.ApplePaySession.canMakePayments()) throw new ai(Ns.APPLE_PAY_DEVICE_NOT_SUPPORTED); this.validateConfiguration() } get applePaySession() { if (!this.sessionHandler) { var e = "Apple Pay Session is expected to exist when it does not."; throw this.errorLogger.captureException(new Sa(e, "Apple Pay"), this.session.instanceId, this.session.sessionId), new hi(e) } return this.sessionHandler } set applePaySession(e) { this.sessionHandler = e } tokenize() { var e = this; return ip((function* () { if (e.handleFirstInteraction(), e.throwIfDestroyed(), e.sessionInProgress) throw new pi([Gs]); e.applePayPaymentRequest = function (e, t) { var r = [...Vd]; null != t && t.isActive(Zi.CanUseInterac) && r.push("interac"); var n, i = { countryCode: e.countryCode, currencyCode: e.currencyCode, lineItems: Wd([], hd(e)), merchantCapabilities: ["supports3DS"], requiredBillingContactFields: ["postalAddress"], shippingMethods: $d([], e.shippingOptions), supportedNetworks: r, total: Yd(e.total) }; return e.shippingContact && (i.shippingContact = { addressLines: (n = e.shippingContact).addressLines, administrativeArea: n.state, country: Bd[n.countryCode], countryCode: n.countryCode, emailAddress: n.email, familyName: n.familyName, givenName: n.givenName, locality: n.city, phoneNumber: n.phone, postalCode: n.postalCode }), e.requestBillingContact && (i.requiredShippingContactFields = ["email", "name", "phone"]), e.requestShippingContact && (i.requiredShippingContactFields = ["postalAddress", "name", "email", "phone"]), i }(e.req, e.featureFlagHandler), e.applePaySession = new window.ApplePaySession(Qd(), e.applePayPaymentRequest); var t = e.shippingContactChanged.bind(e); e.applePaySession.onshippingcontactselected = r => { t(r.shippingContact, e.applePayPaymentRequest) }; var r = e.shippingOptionChanged.bind(e); e.applePaySession.onshippingmethodselected = t => { r(t.shippingMethod, e.applePayPaymentRequest) }; var n = new Promise((t => { e.applePaySession.oncancel = () => { e.metricsHandler.logEvent(La.ExternalSessionCancel), e.deleteApplePaySession(), t({ status: Bs.CANCEL }) } })), i = new Promise(((t, r) => { e.applePaySession.onvalidatemerchant = function () { var n = ip((function* (n) { try { var i = yield e.requestApplePayMerchantValidity(n.validationURL, e.applePayPaymentRequest); t(i) } catch (e) { r(e) } })); return function (e) { return n.apply(this, arguments) } }() })), a = new Promise(((t, r) => { e.applePaySession.onpaymentauthorized = function () { var n = ip((function* (n) { try { var i = yield e.requestApplePayCardNonce(n); e.deleteApplePaySession(), t(i) } catch (t) { e.deleteApplePaySession(), r(t) } })); return function (e) { return n.apply(this, arguments) } }() })); e.sessionInProgress = !0, e.paymentRequestLockController.lock(e), e.metricsHandler.logEvent(La.ExternalSessionStart), e.applePaySession.begin(); try { var o = yield i; e.applePaySession.completeMerchantValidation(o); var { status: s, token: c, details: u } = yield Promise.race([a, n]); return e.metricsHandler.logEvent(La.ExternalSessionOK), s === Bs.SUCCESS ? { details: u, status: hn.OK, token: c } : { status: hn.CANCEL } } catch (t) { throw e.metricsHandler.logEvent(La.ExternalSessionError), t } }))() } destroy() { return this.status = Ms.DESTROYED, this.metricsHandler.logEvent(xa.Destroyed), this.sessionHandler && (this.sessionHandler.abort(), this.deleteApplePaySession()), Promise.resolve() } validateConfiguration() { var e = this.session; if (!e.applePayMerchantIdentifier) throw new ai(Ns.INVALID_CONFIG, "applePayMerchantIdentifier"); if (!e.locationId) throw new ai(Ns.INVALID_CONFIG, "locationId") } requestApplePayCardNonce(e) { var t = this; return ip((function* () { var r = { applepayData: e.payment }, n = t.session, i = t.selectedShippingMethod || t.getDefaultShippingMethod(); try { var a = yield t.paymentMethodMessenger.request(Md.REQUEST_APPLE_PAY_CARD_NONCE, r); return t.applePaySession.completePayment(window.ApplePaySession.STATUS_SUCCESS), t.context.setPaymentMethodTrackingId(a.paymentMethodTrackingId), t.wasFirstInteractionCalled = !1, yield t.context.updateSession(a.sessionId), function (e, t) { var { card: r, cardNonce: n, shippingContact: i, billingContact: a } = e, o = { details: { card: r, method: dn.APPLE_PAY }, status: Bs.SUCCESS, token: n }; if (i) { var s = { contact: i }; t && (s.option = Jd(t)), o.details.shipping = s } return a && (o.details.card && (o.details.card.billing = a), o.details.billing = a), o }(a, i) } catch (e) { throw t.applePaySession.completePayment(window.ApplePaySession.STATUS_FAILURE), e instanceof pi || t.errorLogger.captureException(e, n.instanceId, n.sessionId), e } }))() } requestApplePayMerchantValidity(e, t) { var r = this; return ip((function* () { var n, i = t && t.total ? t.total.label : null, a = r.session, o = { clientId: a.applicationId, locationId: a.locationId, merchantName: i, sourceUrl: a.sourceUrl, validationUrl: e }; try { n = yield r.paymentMethodMessenger.request(Md.REQUEST_APPLE_PAY_MERCHANT_VALIDITY, o) } catch (e) { throw r.applePaySession.abort(), r.deleteApplePaySession(), e } try { return JSON.parse(n.session) } catch (e) { throw r.applePaySession.abort(), r.deleteApplePaySession(), r.errorLogger.captureException(new Sa(e.message, r.methodType), r.session.instanceId, r.session.sessionId), new hi("parsing Apple Pay merchant validity") } }))() } shippingContactChanged(e, t) { var r = Qd() >= 3 ? this.updateApplePayShippingContactV3(t) : this.updateApplePayShippingContactLegacy(t); this.req.hasEventListener(pn.SHIPPING_CONTACT_CHANGED) ? this.req.dispatchEvent(pn.SHIPPING_CONTACT_CHANGED, { contactOrOption: Zd(e) }, (e => { this.handleShippingContactUpdate(r, e) })) : this.handleShippingContactUpdate(r) } handleShippingContactUpdate(e) { var t, r = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}, n = null === (t = r.shippingOptions) || void 0 === t ? void 0 : t[0], i = this.getDefaultShippingMethod(); void 0 === n && null !== i && (n = Jd(i)), void 0 !== n && this.req.hasEventListener(pn.SHIPPING_OPTION_CHANGED) ? (this.selectedShippingMethod = zd(n), this.req.dispatchEvent(pn.SHIPPING_OPTION_CHANGED, { contactOrOption: n }, (t => { e(Object.assign({}, r, t)) }))) : e(r) } shippingOptionChanged(e, t) { this.selectedShippingMethod = e; var r = Qd() >= 3 ? this.updateApplePayShippingMethodV3(t) : this.updateApplePayShippingMethodLegacy(t); this.req.hasEventListener(pn.SHIPPING_OPTION_CHANGED) ? this.req.dispatchEvent(pn.SHIPPING_OPTION_CHANGED, { contactOrOption: Jd(e) }, r) : r() } updateApplePayPaymentRequest(e) { e.newTotal && (this.applePayPaymentRequest.total = e.newTotal), e.newLineItems && (this.applePayPaymentRequest.lineItems = e.newLineItems), e.newShippingMethods && (this.applePayPaymentRequest.shippingMethods = e.newShippingMethods) } updateApplePayShippingContactV3(e) { var t = this; return function () { var r = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}, n = Xd(r, e, t.req); t.updateApplePayPaymentRequest(n), t.metricsHandler.logEvent(La.ShippingAddressChangeOK), t.applePaySession.completeShippingContactSelection(n) } } updateApplePayShippingContactLegacy(e) { var t = this; return function () { var r = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}, n = ep(r, e, t.req); t.updateApplePayPaymentRequest(n), t.metricsHandler.logEvent(La.ShippingAddressChangeOK), t.applePaySession.completeShippingContactSelection(n.status, n.newShippingMethods, n.newTotal, n.newLineItems) } } updateApplePayShippingMethodV3(e) { var t = this; return function () { var r = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}, n = tp(r, e, t.req); t.updateApplePayPaymentRequest(n), t.metricsHandler.logEvent(La.ShippingOptionChangeOK), t.applePaySession.completeShippingMethodSelection(n) } } updateApplePayShippingMethodLegacy(e) { var t = this; return function () { var r = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}, n = rp(r, e, t.req); t.updateApplePayPaymentRequest(n), t.metricsHandler.logEvent(La.ShippingOptionChangeOK), t.applePaySession.completeShippingMethodSelection(n.status, n.newTotal, n.newLineItems) } } getDefaultShippingMethod() { var e = this.applePayPaymentRequest.shippingMethods; return e && e.length > 0 ? this.applePayPaymentRequest.shippingMethods[0] : null } deleteApplePaySession() { delete this.sessionHandler, this.paymentRequestLockController.unlock(this), this.sessionInProgress = !1 } handleFirstInteraction() { this.wasFirstInteractionCalled || (this.metricsHandler.logEvent(Da.FirstInteraction), this.wasFirstInteractionCalled = !0) } } function op(e, t) { return Intl.NumberFormat(g.windowNavigationLanguage, { currency: t, style: "currency" }).format(Number.parseFloat(e)) } var sp = ["PAN_ONLY", "CRYPTOGRAM_3DS"], cp = ["AMEX", "DISCOVER", "JCB", "MASTERCARD", "VISA"]; function up(e) { return { label: e.label, price: e.amount, status: e.pending ? o.Estimated : o.Final, type: "LINE_ITEM" } } function lp(e, t) { var r = null != t ? t : e; return r ? r.map((e => up(e))) : [] } function dp(e, t) { return t.map((t => function (e, t) { return { description: op(t.amount, e), id: t.id, label: t.label } }(e, t))) } function pp(e, t, r, n) { var i = null != n ? n : r; if (i && i.length > 0) { var a = { shippingOptions: dp(e, i) }; return i.some((e => (null == e ? void 0 : e.id) === t)) && (a.defaultSelectedOptionId = t), a } } function hp(e, t) { return null == t ? void 0 : t.find((t => t.id === e)) } function fp(e, t, r, n, i, a) { var { countryCode: o, currencyCode: s, total: c, lineItems: u, taxLineItems: l, discounts: d, requestBillingContact: p, requestShippingContact: h, shippingOptions: f } = t, g = _d(t), m = Boolean(h || g), v = Object.assign({}, e, { emailRequired: Boolean(p), merchantInfo: i, shippingAddressRequired: m, shippingOptionRequired: g, transactionInfo: { countryCode: o, currencyCode: s, totalPrice: c.amount, totalPriceLabel: c.label, totalPriceStatus: n } }); if (u && u.length > 0 && (v.transactionInfo.displayItems = lp([], hd({ lineItems: u, taxLineItems: l, discounts: d }, t))), m && (v.shippingAddressParameters = { phoneNumberRequired: !0 }), g) { var E = pp(s, a, [], f); E && (v.shippingOptionParameters = E) } return r.length > 0 && (v.callbackIntents = r), v } function gp(e, t) { var r = []; return e.error && r.push({ intent: t, message: e.error, reason: Ai.SHIPPING_ADDRESS_UNSERVICEABLE }), e.shippingErrors && Object.entries(e.shippingErrors).forEach((e => { var [n, i] = e; r.push({ intent: t, message: "".concat(n, ": ").concat(i), reason: Ai.SHIPPING_ADDRESS_INVALID }) })), r } function mp(e, t, r, n, i, a, o) { try { var s = e[a](o), c = s.value } catch (e) { return void r(e) } s.done ? t(c) : Promise.resolve(c).then(n, i) } function vp(e) { return function () { var t = this, r = arguments; return new Promise((function (n, i) { var a = e.apply(t, r); function o(e) { mp(a, n, i, o, s, "next", e) } function s(e) { mp(a, n, i, o, s, "throw", e) } o(void 0) })) } } var Ep, yp, _p, Ap, Ip = ["#google"]; class Sp extends ks { constructor(e, t, r, n, i) { var a; super(r), this.methodType = dn.GOOGLE_PAY, this.shippingOptions = void 0, this.wasFirstInteractionCalled = !1, this.validateConfiguration(), this.paymentRequestLockController = i, this.req = t, this.merchantInfo = n, this.element = null, this.paymentMethodMessenger = new Fs(r), _d(this.req) && (this.shippingOptions = this.req.shippingOptions, this.selectedShippingOptionId = null === (a = this.req.shippingOptions) || void 0 === a ? void 0 : a[0].id), this.callbackIntents = function (e, t) { var r = [], n = _d(e) && t.includes(pn.SHIPPING_OPTION_CHANGED), i = e.requestShippingContact && t.includes(pn.SHIPPING_CONTACT_CHANGED); return n ? r.push(s.SHIPPING_ADDRESS, s.SHIPPING_OPTION) : i && r.push(s.SHIPPING_ADDRESS), (!g.isAndroid() || n || i) && r.push(s.PAYMENT_AUTHORIZATION), r }(this.req, this.handlers); var o, p, h, f, m = function (e, t, r) { var n = { environment: y.GOOGLE_PAY_ENV, merchantInfo: r }, i = e.includes(s.SHIPPING_OPTION) || e.includes(s.SHIPPING_ADDRESS); if (!g.isAndroid() || i) { var a = { onPaymentAuthorized: () => ({ transactionState: d.SUCCESS }) }; i && (a.onPaymentDataChanged = t), n.paymentDataCallbacks = a } return n }(this.callbackIntents, this.onPaymentDataChanged.bind(this), this.merchantInfo); this.googlePayClient = new e.api.PaymentsClient(m), this.isReadyToPayRequest = (o = this.session.applicationId, p = this.req.requestBillingContact, h = this.featureFlagHandler, f = [...cp], null != h && h.isActive(Zi.CanUseInterac) && f.push("INTERAC"), { allowedPaymentMethods: [{ parameters: { allowedAuthMethods: sp, allowedCardNetworks: f, billingAddressParameters: { format: p ? c.FULL : c.MIN, phoneNumberRequired: Boolean(p) }, billingAddressRequired: !0 }, tokenizationSpecification: { parameters: { gateway: "square", gatewayMerchantId: o }, type: l.PAYMENT_GATEWAY }, type: u.CARD }], apiVersion: 2, apiVersionMinor: 0 }) } get handlers() { var e = []; return this.req.hasEventListener(pn.SHIPPING_OPTION_CHANGED) && e.push(pn.SHIPPING_OPTION_CHANGED), this.req.hasEventListener(pn.SHIPPING_CONTACT_CHANGED) && e.push(pn.SHIPPING_CONTACT_CHANGED), e } attach(e, t) { var r = this; return vp((function* () { var n, i, a; r.throwIfAlreadyAttached(), r.status = Ms.ATTACHED; var o = null !== (n = null == t ? void 0 : t.buttonColor) && void 0 !== n ? n : Ei.DEFAULT, s = null !== (i = null == t ? void 0 : t.buttonSizeMode) && void 0 !== i ? i : yi.STATIC, c = null !== (a = null == t ? void 0 : t.buttonType) && void 0 !== a ? a : _i.LONG; r.metricsHandler.logEvent(Da.AttachStart), r.metricsHandler.logEvent(xa.Configured, t); try { r.element = pl(e) } catch (e) { throw r.status === Ms.ATTACHED && (r.status = Ms.DETACHED), r.metricsHandler.logEvent(Da.AttachError), e } r.isReadyToPay = yield r.checkIfReadyToPay(Da.AttachError); try { var u = r.googlePayClient.createButton({ buttonColor: o, buttonSizeMode: s, buttonType: c, onClick: () => { } }); return r.element.appendChild(u), void r.metricsHandler.logEvent(Da.AttachOK) } catch (e) { throw r.status === Ms.ATTACHED && (r.status = Ms.DETACHED), r.errorLogger.captureException(e), r.metricsHandler.logEvent(Da.AttachError), r.status = Ms.DETACHED, new ai(Ns.UNKNOWN, e) } }))() } destroy() { return this.detachElement(Ms.DESTROYED, xa.Destroyed), Promise.resolve() } detach() { return this.detachElement(Ms.DETACHED, xa.Detached), Promise.resolve() } tokenize() { var e = this; return vp((function* () { var t; e.throwIfDestroyed(), e.handleFirstInteraction(), e.metricsHandler.logEvent(La.ExternalSessionStart), e.isReadyToPay = e.isReadyToPay || (yield e.checkIfReadyToPay(La.ExternalSessionError)), e.paymentRequestLockController.lock(e); try { t = yield e.loadPaymentData(), delete e.googlePayTokenDeferred, e.metricsHandler.logEvent(La.ExternalSessionOK) } catch (t) { if (delete e.googlePayTokenDeferred, e.paymentRequestLockController.unlock(e), "CANCELED" === t.statusCode) return e.metricsHandler.logEvent(La.ExternalSessionCancel), { status: hn.CANCEL }; if (e.metricsHandler.logEvent(La.ExternalSessionError), t instanceof Error) throw e.errorLogger.captureException(t), t; throw e.errorLogger.captureException(new Sa(JSON.stringify(t), e.methodType)), new hi("tokenizing Google Pay.") } var { token: r, details: n } = yield e.requestGooglePayCardNonce(t); return { details: n, status: hn.OK, token: r } }))() } validateConfiguration() { var e = Ip.join(", "); if (document.querySelectorAll(e).length > 0) throw new ii(this.methodType, e) } checkIfReadyToPay(e) { var t = this; return vp((function* () { var r; try { r = yield t.googlePayClient.isReadyToPay(t.isReadyToPayRequest) } catch (e) { t.errorLogger.captureException(new Sa('Calling googlePayClient.isReadyToPay threw "'.concat(e, '"'), dn.GOOGLE_PAY)), r = { result: !1 } } var n = Boolean(r.result); if (!n) throw e && t.metricsHandler.logEvent(e), new ai(Ns.GOOGLE_PAY_BROWSER_NOT_SUPPORTED); var i = t.callbackIntents.length > 0 ? o.Unknown : o.Final; return t.googlePayClient.prefetchPaymentData(fp(t.isReadyToPayRequest, t.req, t.callbackIntents, i, t.merchantInfo, t.selectedShippingOptionId)), n }))() } loadPaymentData() { return this.googlePayTokenDeferred || (this.googlePayTokenDeferred = this.googlePayClient.loadPaymentData(fp(this.isReadyToPayRequest, this.req, this.callbackIntents, o.Final, this.merchantInfo, this.selectedShippingOptionId))), this.googlePayTokenDeferred } onPaymentDataChanged(e) { switch (e.callbackTrigger) { case s.INITIALIZE: case s.SHIPPING_ADDRESS: return this.onPaymentDataChangedShippingAddress(e); case s.SHIPPING_OPTION: return this.onPaymentDataChangedShippingOption(e); default: return this.errorLogger.captureException(new Sa("Unknown callbackTrigger: ".concat(e.callbackTrigger), dn.GOOGLE_PAY)), Promise.resolve({}) } } onPaymentDataChangedShippingOption(e) { var t = this; return vp((function* () { var r; t.selectedShippingOptionId = null === (r = e.shippingOptionData) || void 0 === r ? void 0 : r.id; var { updatedOptionRequest: n, optionErrors: i } = yield t.dispatchShippingOptionChanged(t.selectedShippingOptionId, t.shippingOptions); return t.paymentDataChangedComplete(n, i) }))() } dispatchShippingOptionChanged(e, t) { var r = { optionErrors: [], updatedOptionRequest: {} }; if (!this.handlers.includes(pn.SHIPPING_OPTION_CHANGED)) return Promise.resolve(r); var n = hp(e, t); return n ? this.status === Ms.DESTROYED ? Promise.resolve({ optionErrors: [{ intent: s.SHIPPING_OPTION, message: "An error occurred when attempting to submit payment, please close this window and try again.", reason: Ai.PAYMENT_METHOD_DESTROYED }], updatedOptionRequest: {} }) : new Promise((e => { this.req.dispatchEvent(pn.SHIPPING_OPTION_CHANGED, { contactOrOption: n }, (function () { var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}; e({ optionErrors: gp(t, s.SHIPPING_OPTION), updatedOptionRequest: t }) })) })) : Promise.resolve(r) } onPaymentDataChangedShippingAddress(e) { var t = this; return vp((function* () { var { updatedContactRequest: r, contactErrors: n } = yield t.dispatchShippingContactChanged(e); if (void 0 === t.req.shippingOptions || 0 === t.req.shippingOptions.length) return t.paymentDataChangedComplete(r, n); var i, a = t.shippingOptions; void 0 !== r.shippingOptions ? (a = r.shippingOptions, t.selectedShippingOptionId = r.shippingOptions[0].id) : t.selectedShippingOptionId = null === (i = t.shippingOptions) || void 0 === i ? void 0 : i[0].id; var { updatedOptionRequest: o, optionErrors: s } = yield t.dispatchShippingOptionChanged(t.selectedShippingOptionId, a), c = Object.assign({}, r, o), u = [...n, ...s]; return t.paymentDataChangedComplete(c, u) }))() } dispatchShippingContactChanged(e) { var t = { contactErrors: [], updatedContactRequest: {} }; return new Promise((r => { var n; void 0 !== e.shippingAddress && this.handlers.includes(pn.SHIPPING_CONTACT_CHANGED) ? this.status !== Ms.DESTROYED ? this.req.dispatchEvent(pn.SHIPPING_CONTACT_CHANGED, { contactOrOption: (n = e.shippingAddress, { city: n.locality, countryCode: n.countryCode, postalCode: n.postalCode, state: n.administrativeArea }) }, (function () { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}; r({ contactErrors: gp(e, s.SHIPPING_ADDRESS), updatedContactRequest: e }) })) : r({ contactErrors: [{ intent: s.SHIPPING_ADDRESS, message: "An error occurred when attempting to submit payment, please close this window and try again.", reason: Ai.PAYMENT_METHOD_DESTROYED }], updatedContactRequest: {} }) : r(t) })) } paymentDataChangedComplete(e, t) { e.shippingOptions && e.shippingOptions.length > 0 && (this.shippingOptions = e.shippingOptions); var r = function (e, t, r, n) { var i, { total: a, countryCode: o, currencyCode: s } = t, c = r, u = up(null !== (i = e.total) && void 0 !== i ? i : a), l = { totalPrice: u.price, totalPriceLabel: u.label, totalPriceStatus: u.status }, d = Object.assign({}, { countryCode: o, currencyCode: s }, l), p = lp(hd(t), hd(e, t)); p.length > 0 && (d.displayItems = p); var h = { newTransactionInfo: d }, f = pp(s, n, c, e.shippingOptions); return f && (h.newShippingOptionParameters = f), h }(e, this.req, this.shippingOptions, this.selectedShippingOptionId); return t.length > 0 && (r.error = t[0]), r } requestGooglePayCardNonce(e) { var t = this; return vp((function* () { var r = t.session, n = hp(t.selectedShippingOptionId, t.shippingOptions); try { var i = yield t.paymentMethodMessenger.request(xs.REQUEST_GOOGLE_PAY_CARD_NONCE, e); return t.context.setPaymentMethodTrackingId(i.paymentMethodTrackingId), yield t.context.updateSession(i.sessionId), t.wasFirstInteractionCalled = !1, t.paymentRequestLockController.unlock(t), function (e, t) { var { card: r, cardNonce: n, shippingContact: i, billingContact: a } = e, o = { details: { card: r, method: dn.GOOGLE_PAY }, token: n }; return i && (o.details.shipping = { contact: i }, t && (o.details.shipping.option = t)), a && (o.details.card && (o.details.card.billing = a), o.details.billing = a), o }(i, n) } catch (e) { throw t.paymentRequestLockController.unlock(t), e instanceof pi || t.errorLogger.captureException(e, r.instanceId, r.sessionId), e } }))() } handleFirstInteraction() { this.wasFirstInteractionCalled || (this.wasFirstInteractionCalled = !0, this.metricsHandler.logEvent(Da.FirstInteraction)) } detachElement(e, t) { this.throwIfNotAttached(), this.status = e, this.element && (this.element.innerHTML = ""), this.metricsHandler.logEvent(t) } } !function (e) { e.SHIPPING_ADDRESS_UNRECOGNIZED = "SHIPPING_ADDRESS_UNRECOGNIZED", e.SHIPPING_ADDRESS_UNSUPPORTED = "SHIPPING_ADDRESS_UNSUPPORTED", e.SERVICE_UNAVAILABLE = "SERVICE_UNAVAILABLE" }(Ep || (Ep = {})), function (e) { e.BADGE = "badge", e.LOCKUP = "lockup" }(yp || (yp = {})), function (e) { e.BLACK = "black", e.WHITE = "white", e.MINT = "mint" }(_p || (_p = {})), function (e) { e.REQUEST_AFTERPAY_INSTANT_WALLET_TOKEN = "REQUEST_AFTERPAY_INSTANT_WALLET_TOKEN", e.REQUEST_AFTERPAY_CHECKOUT_HANDLER = "REQUEST_AFTERPAY_CHECKOUT_HANDLER" }(Ap || (Ap = {})); var Cp = "sq-afterpay-styles", Op = { [fn.BLACK]: { [gn.CheckoutWithAfterpay]: "afterpay-buttons/Afterpay_Checkout_Button_Black-White.svg", [gn.BuyNowWithAfterpay]: "afterpay-buttons/Afterpay_BuyNow_Button_Black-White.svg", [gn.PlaceOrderWithAfterpay]: "afterpay-buttons/Afterpay_PlaceOrder_Button_Black-White.svg" }, [fn.MINT]: { [gn.CheckoutWithAfterpay]: "afterpay-buttons/Afterpay_Checkout_Button_Mint-Black.svg", [gn.BuyNowWithAfterpay]: "afterpay-buttons/Afterpay_BuyNow_Button_Mint-Black.svg", [gn.PlaceOrderWithAfterpay]: "afterpay-buttons/Afterpay_PlaceOrder_Button_Mint-Black.svg" } }, Tp = { [fn.BLACK]: { [gn.CheckoutWithAfterpay]: "afterpay-buttons/Clearpay_Checkout_Button_Black-White.svg", [gn.BuyNowWithAfterpay]: "afterpay-buttons/Clearpay_BuyNow_Button_Black-White.svg", [gn.PlaceOrderWithAfterpay]: "afterpay-buttons/Clearpay_PlaceOrder_Button_Black-White.svg" }, [fn.MINT]: { [gn.CheckoutWithAfterpay]: "afterpay-buttons/Clearpay_Checkout_Button_Mint-Black.svg", [gn.BuyNowWithAfterpay]: "afterpay-buttons/Clearpay_BuyNow_Button_Mint-Black.svg", [gn.PlaceOrderWithAfterpay]: "afterpay-buttons/Clearpay_PlaceOrder_Button_Mint-Black.svg" } }, Pp = new Set(["US", "CA", "AU", "NZ"]); function Rp(e, t) { var r = 0; return e.forEach((e => { r += ta.paymentRequestAmountToMoneyAmount(e, t) })), ta.moneyAmountToPaymentRequestAmount(r, t) } function Np(e, t) { return Rp(e.map((e => e.amount)), t) } var wp = function (e, t) { return e.map((e => ({ name: e.label, quantity: 1, sku: e.id, price: { amount: e.amount, currency: t }, imageUrl: e.imageUrl, pageUrl: e.productUrl }))) }, bp = function (e, t) { return e.map((e => ({ displayName: e.label, amount: { amount: e.amount, currency: t } }))) }, Dp = function (e) { return { area1: e.city, countryCode: e.countryCode, line1: e.addressLines[0], line2: e.addressLines[1], name: "".concat(e.givenName, " ").concat(e.familyName), phoneNumber: e.phone, postcode: e.postalCode, region: e.state } }, Lp = function (e) { if (e.requestShippingContact && void 0 !== e.lineItems && e.lineItems.length > 0) { var t = Np(e.lineItems, e.currencyCode); if (e.discounts) t = Rp([t, (r = e.discounts, n = e.currencyCode, "-".concat(Np(r, n)))], e.currencyCode); return { amount: t, currency: e.currencyCode } } var r, n; return { amount: e.total.amount, currency: e.currencyCode } }, xp = function (e, t) { return e.shippingOptions.map((e => ({ description: "", id: e.id, name: e.label, shippingAmount: { amount: e.amount, currency: t.currencyCode }, orderAmount: { amount: e.total.amount, currency: t.currencyCode }, taxAmount: { amount: Np(e.taxLineItems || [], t.currencyCode), currency: t.currencyCode } }))) }, Up = function (e) { var t, r, n = []; return [e.address1, e.address2].forEach((e => { void 0 !== e && n.push(e) })), e.name && ([t, r] = e.name.split(/\s(?=\S+$)/)), { givenName: t, familyName: r, city: e.suburb, state: e.state, postalCode: e.postcode, countryCode: e.countryCode, phone: e.phoneNumber, addressLines: n } }, Mp = function (e) { return { amount: e.shippingAmount.amount, id: e.id, label: e.name } }; function kp(e, t) { return ad({ [t]: e }, { [t]: { city: "string", countryCode: "string", addressLines: "object", postalCode: "string", state: "string", givenName: "string", familyName: "string" } }) } var Hp = function (e) { return kp(e, "shippingContact") }; function Bp(e) { var t = e.split("-")[1]; return Pp.has(t) } var Gp, Fp = function (e, t) { return Bp(t) ? Op[e] : Tp[e] }, qp = function (e) { return Bp(e) ? "afterpay-brand.svg" : "clearpay-brand.svg" }, jp = [pi]; !function (e) { e.UNKNOWN = "UNKNOWN", e.UNAUTHORIZED = "UNAUTHORIZED", e.TRANSACTION_LIMIT = "TRANSACTION_LIMIT", e.UNSUPPORTED_CURRENCY = "UNSUPPORTED_CURRENCY" }(Gp || (Gp = {})); var Vp = [Un, Mn]; function Yp(e, t, r, n, i, a, o) { try { var s = e[a](o), c = s.value } catch (e) { return void r(e) } s.done ? t(c) : Promise.resolve(c).then(n, i) } var zp = [25, 50, 75, 100]; class Kp { constructor(e, t) { this.attached = !1, this.req = e, this.stylesLoadedPromise = new Promise(((e, t) => { this.resolveStylePromise = e, this.rejectStylePromise = t })), this.context = t, this.locale = this.context.getSession().locale, this.currencyCode = this.req.currencyCode; var r = this.context.getLocaleString().paymentMethods.afterpay.checkoutWidget.weeks; this.PERIOD_TEXT = [this.context.getLocaleString().paymentMethods.afterpay.checkoutWidget.today, "2 ".concat(r), "4 ".concat(r), "6 ".concat(r)], t.addLocaleChangedListener((() => { this.locale = this.context.getSession().locale, this.update() })), e.addEventListener(sd.UPDATE, (() => { this.update() })) } attach(e, t) { var r, n = this; return (r = function* () { n.element = e, fl.addStyleElement(y.AFTERPAY_STYLES, Cp, n.resolveStylePromise, n.rejectStylePromise); try { yield n.stylesLoadedPromise } catch (e) { throw new hi("attaching the Afterpay Checkout Widget") } var r = n.buildAmounts().map((e => ta.moneyAmountToInternationalizedCurrency(e, n.currencyCode, n.locale))), i = !1; t && t.includeBranding && (i = !0); var a = qp(n.locale), o = '\n      <div class="sq-ap__checkout-widget-container">\n        '.concat(i ? '<div class="sq-ap__wordmark">\n                <img id="ap-wordmark-image" src="'.concat(y.STATIC_ASSET(a), '"/>\n              </div>') : "", '\n        <p class="sq-ap__checkout-title">').concat(n.context.getLocaleString().paymentMethods.afterpay.checkoutWidget.title, '</p>\n        <div class="sq-ap__payment-container">\n          ').concat(r.map(((e, t) => '\n              <div id="ap-payment-container-'.concat(t, '" class="sq-ap__individual-payment">\n                <div class="sq-ap__harvey-ball-container">\n                  ').concat(function (e) { var t = 12, r = 2 * Math.PI * 6, n = r * zp[e] / 100; return '\n      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 '.concat(24, " ").concat(24, '" class="sq-ap__harvey-ball">\n        <circle\n          r="').concat(t, '"\n          cx="').concat(t, '"\n          cy="').concat(t, '"\n          fill="white"\n        />\n        <circle\n          r="').concat(6, '"\n          cx="').concat(t, '"\n          cy="').concat(t, '"\n          fill="none"\n          stroke="').concat("#B2FCE4", '"\n          stroke-width="').concat(t, '"\n          stroke-dasharray="').concat(n, " ").concat(r, '"\n          transform="rotate(-90) translate(-').concat(24, ')"\n        />\n        <circle\n          r="').concat(t, '"\n          cx="').concat(t, '"\n          cy="').concat(t, '"\n          fill="none"\n          stroke-width="2"\n          stroke="black"\n       />\n      </svg>\n    ') }(t), '\n                </div>\n                <p id="ap-payment-amount-').concat(t, '" class="sq-ap__amount">').concat(e, '</p>\n                <p class="sq-ap__period">').concat(n.PERIOD_TEXT[t], "</p>\n              </div>\n            "))).join(""), "\n        </div>\n      </div>\n    "); n.element.insertAdjacentHTML("afterbegin", o), n.attached = !0 }, function () { var e = this, t = arguments; return new Promise((function (n, i) { var a = r.apply(e, t); function o(e) { Yp(a, n, i, o, s, "next", e) } function s(e) { Yp(a, n, i, o, s, "throw", e) } o(void 0) })) })() } update() { if (this.attached && this.element) { var e = document.getElementById("ap-wordmark-image"); if (e) { var t = qp(this.locale); e.src = y.STATIC_ASSET(t) } this.buildAmounts().map((e => ta.moneyAmountToInternationalizedCurrency(e, this.currencyCode, this.locale))).forEach(((e, t) => { var r, n = null === (r = this.element) || void 0 === r ? void 0 : r.querySelector("#ap-payment-amount-".concat(t)); n && (n.innerHTML = e) })) } } buildAmounts() { var e = ta.paymentRequestAmountToMoneyAmount(this.req.total.amount, this.req.currencyCode), t = e / 4; switch (e % 4) { case 0: return Wp(t, 0); case 1: return Wp(t, 1); case 2: return Wp(t, -2); case 3: return Wp(t, -1); default: return [] } } } function Wp(e, t) { var r = Array.from({ length: 3 }).fill(Math.round(e)); return r.push(e + t), r } function $p(e, t, r, n, i, a, o) { try { var s = e[a](o), c = s.value } catch (e) { return void r(e) } s.done ? t(c) : Promise.resolve(c).then(n, i) } function Qp(e) { return function () { var t = this, r = arguments; return new Promise((function (n, i) { var a = e.apply(t, r); function o(e) { $p(a, n, i, o, s, "next", e) } function s(e) { $p(a, n, i, o, s, "throw", e) } o(void 0) })) } } var Zp, Jp, Xp = new Set(["en_US", "en_CA", "fr_CA", "en_AU", "en_NZ", "en_GB", "fr_FR", "es_ES", "it_IT"]), eh = new Set(["AUD", "GBP", "USD", "CAD", "EUR"]), th = { [fn.BLACK]: "#000", [fn.MINT]: "#b2fce4" }; class rh extends ks { constructor(e, t, r, n, i) { if (super(n), this.methodType = dn.AFTERPAY_CLEARPAY, this.onTokenizeCallbacks = [], this.tokenizationBuffer = [], this.wasFirstInteractionCalled = !1, this.onTokenizeHandlerAdded = !1, this.transferOptions = {}, this.buyNowOption = !1, this.afterpayLibrary = e, this.afterpayMessagingLibrary = t, this.req = r, this.paymentRequestLockController = i, this.paymentMessenger = new Fs(this.context), this.total = this.totalMoney(), !this.session.locationId) throw new ai(Ns.INVALID_CONFIG, "locationId"); this.locationID = this.session.locationId, this.req.addEventListener("update", (() => { delete this.checkoutTokenResponse, this.element && this.initializeAfterpayPopup(this.element), this.total = this.totalMoney() })), this.stylesLoadedPromise = new Promise(((e, t) => { this.resolveStylePromise = e, this.rejectStylePromise = t })) } attach(e, t) { var r = this; return Qp((function* () { var n, i; r.throwIfAlreadyAttached(), r.status = Ms.ATTACHED, r.metricsHandler.logEvent(Da.AttachStart), r.metricsHandler.logEvent(xa.Configured, t); try { n = pl(e) } catch (e) { throw r.metricsHandler.logEvent(Da.AttachError), r.status === Ms.ATTACHED && (r.status = Ms.DETACHED), e } if (!t || !t.useCustomButton) { fl.addStyleElement(y.AFTERPAY_STYLES, Cp, r.resolveStylePromise, r.rejectStylePromise); try { yield r.stylesLoadedPromise } catch (e) { throw r.status === Ms.ATTACHED && (r.status = Ms.DETACHED), new hi("attaching Afterpay") } var a = (null == t ? void 0 : t.buttonColor) || fn.BLACK, o = (null == t ? void 0 : t.buttonType) || gn.BuyNowWithAfterpay, s = Fp(a, r.session.locale); if (!s) throw r.status === Ms.ATTACHED && (r.status = Ms.DETACHED), new Qn("buttonColor", a); var c = s[o]; if (!c) throw r.status === Ms.ATTACHED && (r.status = Ms.DETACHED), new Qn("buttonType", o); var u = '\n        <button\n          type="button"\n          class="sq-ap__button"\n          style="\n            background-color: '.concat(th[a], ";\n            background-image: url(").concat(y.STATIC_ASSET(c), ');\n          "\n        ></button>\n      '); n.insertAdjacentHTML("afterbegin", u) } r.buyNowOption = (null == t ? void 0 : t.finalCtaButtonType) === mn.BUY_NOW, r.initializeAfterpayPopup(n), r.metricsHandler.logEvent(Da.AttachOK), r.element = n, r.onTokenizeHandlerAdded && (null === (i = r.element) || void 0 === i || i.addEventListener("click", Qp((function* () { yield r.openPaymentModal() })))) }))() } attachMessaging(e, t) { return this.throwIfDestroyed(), function (e) { ll(e, cl) }(e), this.afterpayMessagingLibrary.createPlacements({ targetSelector: e, attributes: { amount: Number(this.req.total.amount), badgeTheme: null == t ? void 0 : t.badgeTheme, currency: this.req.currencyCode, locale: this.session.locale, modalLinkStyle: null == t ? void 0 : t.modalLinkStyle, modalTheme: null == t ? void 0 : t.modalTheme, size: null == t ? void 0 : t.size } }), Promise.resolve() } attachCheckoutWidget(e, t) { var r = this; return Qp((function* () { if (!eh.has(r.req.currencyCode)) throw new Bn("Currency is not supported by Afterpay. Valid currencies are: ".concat([...eh].join(", "))); var n = new Kp(r.req, r.context), i = pl(e); yield n.attach(i, t) }))() } displayInformationModal() { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}, t = ta.convertLocaleToUnderscore(this.session.locale); Xp.has(t) || (t = "en_US"), this.afterpayMessagingLibrary.launchModal(Object.assign({}, e, { locale: t })) } onTokenize(e) { var t, r = this; this.throwIfDestroyed(), this.onTokenizeCallbacks.push(e), 1 === this.onTokenizeCallbacks.length && (this.tokenizationBuffer.forEach((e => { var { result: t, error: r } = e; this.emitTokenizationResult(t, r) })), this.tokenizationBuffer = []), this.onTokenizeHandlerAdded || void 0 === this.element || null === (t = this.element) || void 0 === t || t.addEventListener("click", Qp((function* () { yield r.openPaymentModal() }))), this.onTokenizeHandlerAdded = !0 } tokenize() { var e = this; return Qp((function* () { if (e.throwIfNotAttached(), e.onTokenizeHandlerAdded) throw new Ln; var t, r, n = new Promise(((e, n) => { t = e, r = n })); return e.onTokenizeCallbacks = [function (e, n) { void 0 === n ? void 0 !== e ? t(e) : r(new pi([ca.UNKNOWN])) : r(n) }], yield e.openPaymentModal(), n }))() } destroy() { return this.detachElement(Ms.DESTROYED, xa.Destroyed), Promise.resolve() } detach() { return this.detachElement(Ms.DETACHED, xa.Detached), Promise.resolve() } internalSetCheckoutToken() { var e = this; return Qp((function* () { try { var t = yield e.paymentMessenger.request(Ap.REQUEST_AFTERPAY_CHECKOUT_HANDLER, e.buildCheckoutPayload()); return e.checkoutTokenResponse = t, e.checkoutTokenResponse.token } catch (t) { var r = t; throw ta.isInstanceOf(t, [...Vp, Fn, Bn]) || (e.errorLogger.captureException(t, e.session.instanceId, e.session.sessionId), r = new hi("tokenizing with Afterpay")), r } }))() } commenceCheckout(e) { var t = this; return Qp((function* () { if (t.wasFirstInteractionCalled || (t.wasFirstInteractionCalled = !0, t.metricsHandler.logEvent(Da.FirstInteraction)), t.metricsHandler.logEvent(La.ExternalSessionStart), t.paymentRequestLockController.lock(t), void 0 !== t.checkoutTokenResponse && new Date(t.checkoutTokenResponse.expires) > new Date) e.resolve(t.checkoutTokenResponse.token); else try { var r = yield t.internalSetCheckoutToken(); e.resolve(r) } catch (r) { t.paymentRequestLockController.unlock(t), t.metricsHandler.logEvent(La.ExternalSessionError), t.emitTokenizationResult(void 0, r), e.reject(r.message) } }))() } completeCheckout(e) { var t = this; return Qp((function* () { try { if (function (e) { return "SUCCESS" === e.status && void 0 !== e.orderToken }(e)) { var r, n = yield t.paymentMessenger.request(Ap.REQUEST_AFTERPAY_INSTANT_WALLET_TOKEN, t.buildInstantWalletTokenPayload(e.orderToken, t.total)); t.context.updateSession(n.sessionID), t.metricsHandler.logEvent(La.ExternalSessionOK); var i = { details: { method: dn.AFTERPAY_CLEARPAY, shipping: { contact: { email: null == n || null === (r = n.afterpayData) || void 0 === r ? void 0 : r.email } } }, status: hn.OK, token: n.token }; null != n && n.billingContact && (i.details.billing = null == n ? void 0 : n.billingContact), null != n && n.shippingContact && (i.details.shipping = { contact: null == n ? void 0 : n.shippingContact }), delete t.checkoutTokenResponse, t.emitTokenizationResult(i) } else t.metricsHandler.logEvent(La.ExternalSessionCancel), t.emitTokenizationResult({ status: hn.CANCEL }) } catch (e) { var a = e; t.metricsHandler.logEvent(La.ExternalSessionError), ta.isInstanceOf(e, jp) || (t.errorLogger.captureException(e, t.session.instanceId, t.session.sessionId), a = new hi("tokenizing Afterpay")), t.emitTokenizationResult(void 0, a) } t.paymentRequestLockController.unlock(t) }))() } onShippingOptionChange(e) { this.metricsHandler.logEvent(La.ShippingOptionChangeOK), this.total.amount = ta.paymentRequestAmountToMoneyAmount(e.orderAmount.amount, this.req.currencyCode), this.req.dispatchEvent(An.AFTERPAY_SHIPPING_OPTION_CHANGED, { contactOrOption: Mp(e) }, (e => { })) } onShippingAddressChange(e, t) { if (!this.req.hasEventListener(An.AFTERPAY_SHIPPING_ADDRESS_CHANGED)) return this.emitTokenizationResult(void 0, new xn("PaymentRequest", An.AFTERPAY_SHIPPING_ADDRESS_CHANGED)), t.reject(Ep.SERVICE_UNAVAILABLE), void this.afterpayLibrary.close(); var r = this.req; this.metricsHandler.logEvent(La.ShippingAddressChangeOK), this.req.dispatchEvent(An.AFTERPAY_SHIPPING_ADDRESS_CHANGED, { contactOrOption: Up(e) }, (e => { if (e.error) t.reject(Ep.SHIPPING_ADDRESS_UNSUPPORTED); else if (e.shippingErrors) t.reject(Ep.SHIPPING_ADDRESS_UNRECOGNIZED); else { var n = xp(e, r); t.resolve(n) } })) } emitTokenizationResult(e, t) { 0 === this.onTokenizeCallbacks.length ? this.tokenizationBuffer.push({ result: e, error: t }) : this.onTokenizeCallbacks.forEach((r => { r(e, t) })) } buildInstantWalletTokenPayload(e, t) { return { paymentMethodTrackingID: this.context.getPaymentMethodTrackingId(), analyticsToken: this.session.analyticsToken, afterpayData: { afterpayToken: e, buyerAmount: t }, clientID: this.session.applicationId, locationID: this.locationID, sessionID: this.session.sessionId, websdkVersion: y.VERSION, websiteURL: this.session.sourceUrl, requestBillingContact: this.req.requestBillingContact, requestShippingContact: this.req.requestShippingContact } } buildCheckoutPayload() { var e, t = { applicationID: this.session.applicationId, discounts: [], locationID: this.locationID, popupOriginUrl: this.session.sourceUrl, amount: Lp(this.req) }; if (this.req.lineItems && (t.items = wp(this.req.lineItems, this.req.currencyCode)), this.req.discounts && (t.discounts = bp(this.req.discounts, this.req.currencyCode)), this.req.requestShippingContact ? e = this.req.shippingContact : this.req.pickupContact && (e = this.req.pickupContact), void 0 !== e) { var r = Hp(e); if (!r.isValid) throw new Fn(r.missingFields); t.shipping = Dp(e) } return t } totalMoney() { return { amount: ta.paymentRequestAmountToMoneyAmount(this.req.total.amount, this.req.currencyCode), currency: this.req.currencyCode } } openPaymentModal() { var e = this; return Qp((function* () { e.afterpayLibrary.open(); var t = yield new Promise(((t, r) => { e.commenceCheckout({ resolve: t, reject: r }) })); e.afterpayLibrary.transfer(Object.assign({ token: t }, e.transferOptions)) }))() } initializeAfterpayPopup(e) { var t = this.commenceCheckout.bind(this), r = this.completeCheckout.bind(this), n = document.createElement("div"); n.id = "sq-afterpay-dummy-element-".concat(Us()), n.style.visibility = "hidden", e.appendChild(n), this.transferOptions = { buyNow: this.buyNowOption, shippingOptionRequired: this.req.requestShippingContact }, this.req.requestShippingContact || this.req.pickupContact || (this.transferOptions.addressMode = "NO_ADDRESS"); var i, a, o = { countryCode: this.req.countryCode, onCommenceCheckout: (a = Qp((function* (e) { yield t(e) })), function (e) { return a.apply(this, arguments) }), onComplete: (i = Qp((function* (e) { var { data: t } = e; yield r(t) })), function (e) { return i.apply(this, arguments) }), target: "#".concat(n.id), shippingOptionRequired: this.req.requestShippingContact, addressMode: this.transferOptions.addressMode }; this.req.requestShippingContact ? (o.onShippingAddressChange = this.onShippingAddressChange.bind(this), o.onShippingOptionChange = this.onShippingOptionChange.bind(this)) : this.req.pickupContact && (this.transferOptions.pickup = !0), this.afterpayLibrary.initializeForPopup(o), e.removeChild(n) } detachElement(e, t) { this.throwIfNotAttached(), this.status = e, this.afterpayLibrary.close(), this.element && (this.element.innerHTML = ""), this.element = null, this.tokenizationBuffer = [], this.onTokenizeCallbacks = [], this.metricsHandler.logEvent(t) } } !function (e) { e.CUSTOMER_INTERACTION = "CUSTOMER_INTERACTION", e.CUSTOMER_REQUEST_APPROVED = "CUSTOMER_REQUEST_APPROVED", e.CUSTOMER_REQUEST_DECLINED = "CUSTOMER_REQUEST_DECLINED", e.CUSTOMER_REQUEST_FAILED = "CUSTOMER_REQUEST_FAILED" }(Zp || (Zp = {})), function (e) { e.REQUEST_CASH_APP_PAY_INSTANT_WALLET_TOKEN = "REQUEST_CASH_APP_PAY_INSTANT_WALLET_TOKEN" }(Jp || (Jp = {})); class nh extends Nn { constructor(e) { var t = e.map((e => { var [t, r] = e; return 'expected property: "'.concat(t, '" of type "').concat(r, '"') })).join("\n"); super("\n".concat(t)), this.name = "InvalidCashAppPayV1OptionsFieldTypes", Object.setPrototypeOf(this, nh.prototype) } } class ih extends Nn { constructor(e) { var t = e.map((e => { var [t, r] = e; return 'accepted property: "'.concat(t, '" values are "').concat(r, '"') })).join("\n"); super("\n".concat(t)), this.name = "InvalidCashAppPayV1OptionsFieldValues", Object.setPrototypeOf(this, ih.prototype) } } class ah extends Nn { constructor(e) { super(e), this.name = "CashAppPayInvalidPaymentRequestError", Object.setPrototypeOf(this, ah.prototype) } } class oh extends Nn { constructor() { super("A redirect url is always required for requests. This must also be a secure link."), this.name = "CashAppPayMissingRedirectUrlError", Object.setPrototypeOf(this, oh.prototype) } } class sh extends Nn { constructor() { super("A grant was not returned from CashApp and is required for tokenization"), this.name = "CashAppPayGrantIsUndefinedError", Object.setPrototypeOf(this, sh.prototype) } } function ch(e, t) { var r = Object.keys(e); if (Object.getOwnPropertySymbols) { var n = Object.getOwnPropertySymbols(e); t && (n = n.filter((function (t) { return Object.getOwnPropertyDescriptor(e, t).enumerable }))), r.push.apply(r, n) } return r } function uh(e, t, r) { return t in e ? Object.defineProperty(e, t, { value: r, enumerable: !0, configurable: !0, writable: !0 }) : e[t] = r, e } function lh(e, t, r, n, i, a, o) { try { var s = e[a](o), c = s.value } catch (e) { return void r(e) } s.done ? t(c) : Promise.resolve(c).then(n, i) } function dh(e) { return function () { var t = this, r = arguments; return new Promise((function (n, i) { var a = e.apply(t, r); function o(e) { lh(a, n, i, o, s, "next", e) } function s(e) { lh(a, n, i, o, s, "throw", e) } o(void 0) })) } } var ph = new Set(["USD"]); class hh extends ks { constructor(e, t, r, n, i) { if (super(n), this.methodType = dn.CASH_APP_PAY, this.wasFirstInteractionCalled = !1, this.cashAppPayElementId = "cash_app_pay_v1_element", this.CashAppPayInstance = e, this.req = t, this.context = n, this.paymentRequestLockController = i, this.element = void 0, this.options = r, this.paymentMessenger = new Fs(this.context), !this.session.locationId) throw new ai(Ns.INVALID_CONFIG, "locationId"); if (this.locationId = this.session.locationId, !this.session.cashAppPayMerchantIdentifier) throw new ai(Ns.INVALID_CONFIG, "merchantId"); if (this.scopeId = this.session.cashAppPayMerchantIdentifier, !ph.has(this.req.currencyCode)) throw new ah("".concat(this.req.currencyCode, " is not supported by CashAppPay. Valid currencies are: ").concat([...ph].join(", "))); if (!r.redirectURL) throw new oh; var a = this.createCustomerRequestDetails(); this.customerRequestCreated = e.customerRequest(a), this.cashAppEventHandler = { [Zp.CUSTOMER_INTERACTION]: () => this.registerExternalEventStart(), [Zp.CUSTOMER_REQUEST_APPROVED]: e => this.customerRequestApprovedEvent(e), [Zp.CUSTOMER_REQUEST_DECLINED]: e => this.customerRequestDeclinedEvent(e), [Zp.CUSTOMER_REQUEST_FAILED]: e => this.customerRequestFailedEvent(e) }, Object.keys(Zp).forEach((e => this.CashAppPayInstance.addEventListener(e, this.cashAppEventHandler[e]))), this.paymentRequestLockController.lock(this) } attach(e, t) { var r = this; return dh((function* () { r.throwIfAlreadyAttached(); var n = t; n && n.values && (n.theme || (n.theme = n.values)); var i = function (e) { if (void 0 === e) return { isValid: !0, missingFields: [] }; var t = {}; return Object.keys(e).forEach((function (e) { yo.has(e) && (t[e] = "string") })), ad(e, t) }(n); if (!i.isValid) throw new nh(i.missingFields); var a = function (e) { var t = [], r = !0; if (void 0 === e) return { isValid: r, missingFields: t }; var n = { shape: Do, size: bo, theme: Lo, width: xo }, i = JSON.parse(Bo(e)); return Object.entries(i).forEach((function (e) { var [i, a] = e; a === uo && (r = !1, t.push([i, [...n[i]].join(",")])) })), { isValid: r, missingFields: t } }(n); if (!a.isValid) throw new ih(a.missingFields); r.metricsHandler.logEvent(Da.AttachStart), n && r.metricsHandler.logEvent(xa.Configured, n), r.status = Ms.ATTACHED, r.element = dl(e); try { var o = document.createElement("div"); o.id = r.cashAppPayElementId, r.element.appendChild(o); var s = "#".concat(r.cashAppPayElementId); r.renderController = yield r.CashAppPayInstance.render(s, { button: n }), r.metricsHandler.logEvent(Da.AttachOK) } catch (e) { throw r.metricsHandler.logEvent(Da.AttachError), r.status === Ms.ATTACHED && (r.status = Ms.DETACHED), e } }))() } destroy() { return this.detachElement(Ms.DESTROYED, xa.Destroyed), Object.keys(Zp).forEach((e => this.CashAppPayInstance.removeEventListener(e, this.cashAppEventHandler[e]))), Promise.resolve(!0) } detach() { return this.detachElement(Ms.DETACHED, xa.Detached), Promise.resolve(!0) } addEventListener(e, t) { this.metricsHandler.logEvent(xa.EventListenerAdded, e), super.addEventListener(e, t) } removeEventListener(e, t) { super.removeEventListener(e, t) } createCustomerRequestDetails() { var { amount: e } = this.req.total, t = function (e) { for (var t = 1; t < arguments.length; t++) { var r = null != arguments[t] ? arguments[t] : {}; t % 2 ? ch(Object(r), !0).forEach((function (t) { uh(e, t, r[t]) })) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(r)) : ch(Object(r)).forEach((function (t) { Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(r, t)) })) } return e }({ actions: { payment: { amount: { currency: this.req.currencyCode, value: ta.paymentRequestAmountToMoneyAmount(e, this.req.currencyCode) }, scopeId: this.scopeId } } }, this.options); return t } customerRequestApprovedEvent(e) { var t = this; return dh((function* () { var r = yield t.createNonce(e); t.dispatchEvent("ontokenization", { tokenResult: r }) }))() } customerRequestDeclinedEvent(e) { var t = { status: hn.CANCEL }; this.metricsHandler.logEvent(La.ExternalSessionCancel), this.dispatchEvent("ontokenization", { tokenResult: t }) } customerRequestFailedEvent(e) { var t = { status: hn.ERROR, errors: [new hi("tokenizing Cash App Pay")] }; this.metricsHandler.logEvent(La.ExternalSessionError), this.dispatchEvent("ontokenization", { tokenResult: t }) } createNonce(e) { var t = this; return dh((function* () { var { customerProfile: r, grants: n, referenceId: i } = e, a = r.cashtag, o = n.payment, s = t.req.total.amount, c = t.req.currencyCode; try { if (!o) throw new sh; var u = yield t.paymentMessenger.request(Jp.REQUEST_CASH_APP_PAY_INSTANT_WALLET_TOKEN, t.buildInstantWalletTokenPayload({ amount: s, currency: c }, a, o, i)); return t.context.updateSession(u.sessionID), t.metricsHandler.logEvent(La.ExternalSessionOK), { details: { method: dn.CASH_APP_PAY }, status: hn.OK, token: u.token } } catch (e) { var l = e; return t.metricsHandler.logEvent(La.ExternalSessionError), ta.isInstanceOf(e, [pi]) || (t.errorLogger.captureException(e, t.session.instanceId, t.session.sessionId), l = new hi("tokenizing CashAppPay")), { status: hn.ERROR, errors: [l] } } }))() } buildInstantWalletTokenPayload(e, t, r, n) { return { paymentMethodTrackingID: this.context.getPaymentMethodTrackingId(), analyticsToken: this.session.analyticsToken, clientID: this.session.applicationId, locationID: this.locationId, sessionID: this.session.sessionId, websdkVersion: y.VERSION, websiteURL: this.session.sourceUrl, requestBillingContact: this.req.requestBillingContact, requestShippingContact: this.req.requestShippingContact, applicationId: this.session.applicationId, cashAppPayData: { referenceId: n, grantId: r.grantId, cashtag: t, totalAmount: { amount: e.amount, currency: e.currency } } } } registerExternalEventStart() { this.metricsHandler.logEvent(La.ExternalSessionStart), this.wasFirstInteractionCalled || (this.wasFirstInteractionCalled = !0, this.metricsHandler.logEvent(Da.FirstInteraction)) } detachElement(e, t) { this.throwIfNotAttached(), this.status = e, this.renderController && this.renderController.destroy(), this.element && (this.element.innerHTML = ""), this.paymentRequestLockController.unlock(this), this.metricsHandler.logEvent(t) } } var fh = function (e, t, r, n, i) { return new rh(e, t, r, n, i) }, gh = function (e, t, r) { return new ap(e, t, r) }, mh = function (e, t, r, n, i) { return new hh(e, t, r, n, i) }, vh = function (e, t, r, n, i) { return new Sp(e, t, r, n, i) }; function Eh(e, t, r, n, i, a, o) { try { var s = e[a](o), c = s.value } catch (e) { return void r(e) } s.done ? t(c) : Promise.resolve(c).then(n, i) } function yh(e) { return function () { var t = this, r = arguments; return new Promise((function (n, i) { var a = e.apply(t, r); function o(e) { Eh(a, n, i, o, s, "next", e) } function s(e) { Eh(a, n, i, o, s, "throw", e) } o(void 0) })) } } function _h(e, t) { var { paymentMethodSupportDetail: r, metricsHandler: n } = t, i = t.getSession(); if (!i.locationId || 0 === i.locationId.length) throw new ai(Ns.INVALID_CONFIG, "locationId"); if (r && r[e] && !r[e].IsSupported) { var { UnsupportedReasonType: a } = r[e], o = Ns.UNKNOWN; throw a && a in Rs && (o = ws[a]), n.logEvent(Da.BuildError), new ai(o) } } function Ah(e, t) { if (!(e instanceof yd)) throw t.metricsHandler.logEvent(Da.BuildError), new Fn([["paymentRequest", "PaymentRequest"]]) } function Ih() { return (Ih = yh((function* (e, t) { return { authJwt: (yield e.request(xs.GENERATE_GOOGLE_PAY_AUTH_TOKEN, { session: t })).token, merchantId: y.GOOGLE_PAY_MERCHANT_ID } }))).apply(this, arguments) } class Sh { constructor(e, t, r) { this.localeStrings = new co(navigator.language), this.paymentOptions = e, this.metrics = t, this.errorLogger = r, this.paymentRequestLockMap = new WeakMap } overrideStrings(e) { var t = this; return yh((function* () { try { var r = yield t.getPaymentContext(Ga.App); if (!r.featureFlagHandler.isActive(Zi.CanUseOverrideStrings)) throw new oi("overrideStrings"); r.metricsHandler.logEvent(xa.OverrideStrings, e), r.setTranslationOverrides(e) } catch (e) { if (ba(e)) throw t.errorLogger.captureException(e), new hi("overriding the strings"); throw e } }))() } setLocale(e) { var t = this; return yh((function* () { try { var r = yield t.getPaymentContext(Ga.App); return r.metricsHandler.logEvent(xa.SetLocale, e), r.setLocale(e) } catch (e) { if (ba(e)) throw t.errorLogger.captureException(e), new hi("setting the locale"); throw e } }))() } verifyBuyer(e, t) { var r = this; return yh((function* () { var n = []; if (r.paymentOptions.locationId && 0 !== r.paymentOptions.locationId.length || n.push(new bs("verifyBuyer", "locationId", "string")), e && "string" == typeof e && 0 !== e.length || n.push(new bs("verifyBuyer", "source", "string")), t && "object" == typeof t ? n.push(...kd.validateVerificationDetails(t, "verifyBuyer")) : n.push(new bs("verifyBuyer", "details", "object")), n.length > 0) throw new Ds(n); var i = yield r.getPaymentContext(Ga.App); try { i.metricsHandler.logEvent(Da.VerificationStart); var a = yield As.verifyBuyer({ applicationId: r.paymentOptions.applicationId, locationId: r.paymentOptions.locationId, websiteUrl: r.paymentOptions.sourceUrl }, e, t); return i.metricsHandler.logEvent(Da.VerificationOK), a } catch (e) { if (i.metricsHandler.logEvent(Da.VerificationError), e instanceof si) throw r.errorLogger.captureException(e), e; throw new Kn(e) } }))() } card(e) { var t = this; return yh((function* () { var r = yield t.getPaymentContext(Ga.Card); r.metricsHandler.logEvent(Da.BuildStart); try { var n = new Cl(r, e); return r.metricsHandler.logEvent(Da.BuildOK), n } catch (e) { throw r.metricsHandler.logEvent(Da.BuildError), e } }))() } paymentRequest(e) { var t = new Id, r = new yd(e, this.localeStrings, t); return this.paymentRequestLockMap.set(r, t), this.getPaymentContext(Ga.PaymentRequest).then((t => { var { metricsHandler: n } = t; r.setPaymentMetricsHandler(n), n.logEvent(xa.Configured, e) })), r } googlePay(e) { var t = this; return yh((function* () { var r, n, i = yield t.getPaymentContext(Ga.GooglePay); i.metricsHandler.logEvent(Da.BuildStart), _h(Qo.GOOGLE_PAY, i), function (e) { if ("undefined" == typeof ShadowRoot) throw e.metricsHandler.logEvent(Da.BuildError), new ai(Ns.GOOGLE_PAY_BROWSER_NOT_SUPPORTED) }(i), Ah(e, i); try { var a = function (e, t) { return Ih.apply(this, arguments) }(i.messenger, i.getSession()), o = hs();[r, n] = yield Promise.all([o, a]) } catch (e) { throw i.metricsHandler.logEvent(Da.BuildError), e } try { var s = t.getPaymentRequestLock(e), c = vh(r, e, i, n, s); return i.metricsHandler.logEvent(Da.BuildOK), c } catch (e) { throw i.metricsHandler.logEvent(Da.BuildError), e } }))() } applePay(e) { var t = this; return yh((function* () { var r = yield t.getPaymentContext(Ga.ApplePay); r.metricsHandler.logEvent(Da.BuildStart), _h(Qo.APPLE_PAY, r), Ah(e, r); try { var n = t.getPaymentRequestLock(e), i = gh(e, r, n); return r.metricsHandler.logEvent(Da.BuildOK), i } catch (e) { throw r.metricsHandler.logEvent(Da.BuildError), e } }))() } ach(e) { var t = this; return yh((function* () { var r = yield t.getPaymentContext(Ga.Ach); r.metricsHandler.logEvent(Da.BuildStart), _h(Qo.ACH, r), e && e.redirectURI && e.transactionId || (r.metricsHandler.logEvent(Da.AchMissingRequiredOAuthParameters), console.warn("Missing required OAuth parameters: Chase, Wells Fargo, and Capital One will no longer be available after February 15th, 2022 if these parameters are not provided")); try { var n = yield fs(); return r.metricsHandler.logEvent(Da.BuildOK), new rc(n, r, e) } catch (e) { throw r.metricsHandler.logEvent(Da.BuildError), e } }))() } cashApp(e) { var t = this; return yh((function* () { var r = yield t.getPaymentContext(Ga.CashApp); r.metricsHandler.logEvent(Da.BuildStart), _h(Qo.CASH_APP, r); try { var n = new Vl(r, e); return r.metricsHandler.logEvent(Da.BuildOK), n } catch (e) { throw r.metricsHandler.logEvent(Da.BuildError), e } }))() } giftCard(e) { var t = this; return yh((function* () { var r = yield t.getPaymentContext(Ga.GiftCard); r.metricsHandler.logEvent(Da.BuildStart); try { var n = new Xl(r, e); return r.metricsHandler.logEvent(Da.BuildOK), n } catch (e) { throw r.metricsHandler.logEvent(Da.BuildError), e } }))() } afterpayClearpay(e) { var t = this; return yh((function* () { var r = yield t.getPaymentContext(Ga.Afterpay); if (r.metricsHandler.logEvent(Da.BuildStart), !r.featureFlagHandler.isActive(Zi.CanUseBNPLA)) throw r.metricsHandler.logEvent(Da.BuildError), new Sd; _h(Qo.AFTERPAY, r), Ah(e, r); try { var n = t.getPaymentRequestLock(e), [i, a] = yield Promise.all([us(), ls()]), o = fh(i, a, e, r, n); return yield o.internalSetCheckoutToken(), r.metricsHandler.logEvent(Da.BuildOK), o } catch (e) { throw r.metricsHandler.logEvent(Da.BuildError), e } }))() } cashAppPay(e, t) { var r = this; return yh((function* () { var n, i = yield r.getPaymentContext(Ga.CashAppPayV1); i.metricsHandler.logEvent(Da.BuildStart), _h(Qo.CASH_APP_PAY_V1, i), Ah(e, i); try { n = yield ps() } catch (e) { throw i.errorLogger.captureException(e), e } try { if (void 0 === n) throw new hi("initializing Cash App Pay"); var a = r.getPaymentRequestLock(e), o = y.CASH_APP_PAY_CLIENT_ID, s = yield n.pay({ clientId: o }), c = mh(s, e, t, i, a); return i.metricsHandler.logEvent(Da.BuildOK), c } catch (e) { throw i.metricsHandler.logEvent(Da.BuildError), e } }))() } getPaymentContext(e) { var t = this; return yh((function* () { var { featureFlagValues: r, messenger: n, session: i, paymentMethodSupportDetail: a } = yield t.initializePaymentMethod(); i.avt && t.errorLogger.setAvt(i.avt); var o = Us(), s = new class { constructor(e, t, r, n) { this.metricsLogger = e, this.eventSource = r, this.session = t, this.paymentMethodTrackingId = n } logEvent(e, t) { var r = { event: e, eventSource: this.eventSource }; void 0 !== t && (r.eventConfigurationValues = t); var { instanceId: n, sessionId: i, paymentsUIInstanceId: a } = this.session.serialize(); return this.metricsLogger.logEvent(r, n, i, this.paymentMethodTrackingId, a) } setPaymentMethodTrackingId(e) { this.paymentMethodTrackingId = e } getPaymentMethodTrackingId() { return this.paymentMethodTrackingId } }(t.metrics, i, e, o); t.setAnalytics(i), t.contextEventTarget || (t.contextEventTarget = new Ls); var c = new Os(t.errorLogger, n, s, i, a, t.localeStrings, t.contextEventTarget, r); return t.errorLogger.setFeatureFlagHandler(c.featureFlagHandler), c }))() } initializePaymentMethod() { return this.initializePaymentParamPromise || (this.initializePaymentParamPromise = kd.initializePayment(this.paymentOptions, this.metrics, this.errorLogger, this.localeStrings)), this.initializePaymentParamPromise } setAnalytics(e) { if (!this.analyticsInterval) { var t = this.analyticsInterval = window.setInterval((() => { kd.initializeAnalytics(e, this.errorLogger, t) }), vs); kd.initializeAnalytics(e, this.errorLogger, t) } } getPaymentRequestLock(e) { var t = this.paymentRequestLockMap.get(e); if (!t) { var r = new hi("PaymentRequestLockMap entry does not exist. This should never happen."); throw this.errorLogger.captureException(r), r } return t } } var Ch = y.ENABLE_ERROR_LOGGING, Oh = y.env, Th = new Map; window.Square = { errors: Va, payments: function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : "", r = "".concat(e, "-").concat(t); if (Th.has(r)) return Th.get(r); if (!xi(g.windowLocation)) throw new Xn; if (!g.isSupported()) throw new Jn; Bi(e); var n = new oa({ applicationId: e, applicationUrl: window.location.origin, enableErrorLogging: Ch, environment: Oh, sourceName: "web-payments-sdk-public", useGlobalHandlers: !1, version: y.VERSION }), i = g.windowLocation.hostname, a = g.windowLocation.origin, o = { applicationId: e, hostname: i, locationId: t, sourceUrl: a }, s = new Xo(n, { applicationId: e, hostname: i, locationId: t }); s.logEvent({ event: Da.LoadOK, eventSource: Ga.App }); var c = new Sh(o, s, n); return Th.set(r, c), c } } })() })();